"use strict";(()=>{var im=Object.create;var Ln=Object.defineProperty;var sm=Object.getOwnPropertyDescriptor;var lm=Object.getOwnPropertyNames;var cm=Object.getPrototypeOf,um=Object.prototype.hasOwnProperty;var fm=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var p=(e,r)=>()=>(e&&(r=e(e=0)),r);var Cr=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),H=(e,r)=>{for(var t in r)Ln(e,t,{get:r[t],enumerable:!0})},Kl=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(var n=lm(r),a=0,c=n.length,u;a<c;a++)u=n[a],!um.call(e,u)&&u!==t&&Ln(e,u,{get:(d=>r[d]).bind(null,u),enumerable:!(o=sm(r,u))||o.enumerable});return e};var F=(e,r,t)=>(t=e!=null?im(cm(e)):{},Kl(r||!e||!e.__esModule?Ln(t,"default",{value:e,enumerable:!0}):t,e)),cr=e=>Kl(Ln({},"__esModule",{value:!0}),e);var m,s=p(()=>{"use strict";m=Symbol("Symbol.asyncIterator")});var dm,mm,pm,f,l=p(()=>{"use strict";dm=e=>({status:"fulfilled",value:e}),mm=e=>({status:"rejected",reason:e}),pm=e=>Promise.resolve(e).then(dm,mm),f=Promise.allSettled??=e=>Promise.all(Array.from(e).map(pm))});function ql(e,r,t,o,n,a,c){try{var u=e[a](c),d=u.value}catch(b){t(b);return}u.done?r(d):Promise.resolve(d).then(o,n)}function S(e){return function(){var r=this,t=arguments;return new Promise(function(o,n){var a=e.apply(r,t);function c(d){ql(a,o,n,c,u,"next",d)}function u(d){ql(a,o,n,c,u,"throw",d)}c(void 0)})}}var be=p(()=>{s();l()});var Dn=Cr((Hh,Ql)=>{s();l();var vi=Object.defineProperty,hm=Object.getOwnPropertyDescriptor,vm=Object.getOwnPropertyNames,gm=Object.prototype.hasOwnProperty,ym=(e,r)=>{for(var t in r)vi(e,t,{get:r[t],enumerable:!0})},_m=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function"){var n=function(c){!gm.call(e,c)&&c!==t&&vi(e,c,{get:()=>r[c],enumerable:!(o=hm(r,c))||o.enumerable})};for(var a of vm(r))n(a)}return e},bm=e=>_m(vi({},"__esModule",{value:!0}),e),Xl={};ym(Xl,{after:()=>Tm,before:()=>xm,instead:()=>wm,unpatchAll:()=>Em});Ql.exports=bm(Xl);var Jl=["a","b","i"],zt=new Map;function Sm(e,r,t,o,n){var a=zt.get(r)?.[e];if(!a)return n?Reflect.construct(r[e],t,o):r[e].apply(o,t);for(var c of a.b.values()){var u=c.call(o,t);Array.isArray(u)&&(t=u)}var d=[...a.i.values()].reduce((h,x)=>(...I)=>x.call(o,I,h),(...h)=>n?Reflect.construct(a.o,h,o):a.o.apply(o,h))(...t);for(var b of a.a.values())d=b.call(o,t,d)??d;return d}function Zl(e,r,t,o){var n=zt.get(e),a=n?.[r];if(!a?.[o].has(t))return!1;if(a[o].delete(t),Jl.every(u=>a[u].size===0)){var c=Reflect.defineProperty(e,r,{value:a.o,writable:!0,configurable:!0});c||(e[r]=a.o),delete n[r]}return Object.keys(n).length==0&&zt.delete(e),!0}function Em(){for(var[e,r]of zt.entries())for(var t in r)for(var o of Jl)for(var n of r[t]?.[o].keys()??[])Zl(e,t,n,o)}var gi=e=>(r,t,o,n=!1)=>{if(typeof t[r]!="function")throw new Error(`${r} is not a function in ${t.constructor.name}`);zt.has(t)||zt.set(t,Object.create(null));var a=zt.get(t);if(!a[r]){var c=t[r];a[r]={o:c,b:new Map,i:new Map,a:new Map};var u=(I,U,Q)=>{var W=Sm(r,t,U,I,Q);return n&&x(),W},d=new Proxy(c,{apply:(I,U,Q)=>u(U,Q,!1),construct:(I,U)=>u(c,U,!0),get:(I,U,Q)=>U=="toString"?c.toString.bind(c):Reflect.get(I,U,Q)}),b=Reflect.defineProperty(t,r,{value:d,configurable:!0,writable:!0});b||(t[r]=d)}var h=Symbol(),x=()=>Zl(t,r,h,e);return a[r][e].set(h,o),x},xm=gi("b"),wm=gi("i"),Tm=gi("a")});var Mn={};H(Mn,{RTNBundleUpdaterManager:()=>$r,RTNClientInfoManager:()=>$t,RTNDeviceManager:()=>Gt,RTNFileManager:()=>re,RTNMMKVManager:()=>zr,RTNThemeManager:()=>yi});var Nr,zr,re,$t,Gt,$r,yi,er=p(()=>{"use strict";s();l();Nr=window.nativeModuleProxy,zr=Nr.MMKVManager;re=Nr.DCDFileManager??Nr.RTNFileManager;$t=Nr.InfoDictionaryManager??Nr.RTNClientInfoManager;Gt=Nr.DCDDeviceManager??Nr.RTNDeviceManager,{BundleUpdaterManager:$r}=Nr,yi=Nr.RTNThemeManager??Nr.DCDTheme});var Go={};H(Go,{clearFolder:()=>Am,downloadFile:()=>Ti,fileExists:()=>ur,readFile:()=>st,removeFile:()=>Gr,writeFile:()=>Ke});function Am(e){return _i.apply(this,arguments)}function _i(){return _i=S(function*(e,r="pyoncord/"){if(typeof re.clearFolder!="function")throw new Error("'fs.clearFolder' is not supported");return void(yield re.clearFolder("documents",`${r}${e}`))}),_i.apply(this,arguments)}function Gr(e){return bi.apply(this,arguments)}function bi(){return bi=S(function*(e,r="pyoncord/"){if(typeof re.removeFile!="function")throw new Error("'fs.removeFile' is not supported");return void(yield re.removeFile("documents",`${r}${e}`))}),bi.apply(this,arguments)}function ur(e){return Si.apply(this,arguments)}function Si(){return Si=S(function*(e,r="pyoncord/"){return yield re.fileExists(`${re.getConstants().DocumentsDirPath}/${r}${e}`)}),Si.apply(this,arguments)}function Ke(e,r){return Ei.apply(this,arguments)}function Ei(){return Ei=S(function*(e,r,t="pyoncord/"){if(typeof r!="string")throw new Error("Argument 'data' must be a string");return void(yield re.writeFile("documents",`${t}${e}`,r,"utf8"))}),Ei.apply(this,arguments)}function st(e){return xi.apply(this,arguments)}function xi(){return xi=S(function*(e,r="pyoncord/"){try{return yield re.readFile(`${re.getConstants().DocumentsDirPath}/${r}${e}`,"utf8")}catch(t){throw new Error(`An error occured while reading '${e}'`,{cause:t})}}),xi.apply(this,arguments)}function Ti(e,r){return wi.apply(this,arguments)}function wi(){return wi=S(function*(e,r,t="pyoncord/"){var o=yield fetch(e).then(u=>u.blob()),n=yield new Promise(u=>{var d=new FileReader;d.onload=()=>u(d.result),d.readAsDataURL(o)}),a;if(n==null)throw new Error("Failed to convert blob to data URL");var c=n.indexOf("base64,");if(c===-1)throw new Error("dataURL does not contain base64");return a=n.slice(c+7),void(yield re.writeFile("documents",`${t}${r}`,a,"base64"))}),wi.apply(this,arguments)}var lt=p(()=>{"use strict";s();l();be();er()});function rr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Vo=p(()=>{s();l()});function ct(e,r){return ct=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},ct(e,r)}var Bn=p(()=>{s();l()});function ut(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&ct(e,r)}var Fn=p(()=>{s();l();Bn()});function Un(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ai=p(()=>{s();l()});function Yo(e,r,t){return Un()?Yo=Reflect.construct:Yo=function(n,a,c){var u=[null];u.push.apply(u,a);var d=Function.bind.apply(n,u),b=new d;return c&&ct(b,c.prototype),b},Yo.apply(null,arguments)}var ec=p(()=>{s();l();Ai();Bn()});function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(e)}var Ii=p(()=>{s();l()});function rc(e){return Function.toString.call(e).indexOf("[native code]")!==-1}var tc=p(()=>{s();l()});function jn(e){var r=typeof Map=="function"?new Map:void 0;return jn=function(o){if(o===null||!rc(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(o))return r.get(o);r.set(o,n)}function n(){return Yo(o,arguments,Vt(this).constructor)}return n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ct(n,o)},jn(e)}var oc=p(()=>{s();l();ec();Ii();tc();Bn()});function nc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ac=p(()=>{s();l()});function ic(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var sc=p(()=>{s();l()});function lc(e,r){return r&&(ic(r)==="object"||typeof r=="function")?r:nc(e)}var cc=p(()=>{s();l();ac();sc()});function ft(e){var r=Un();return function(){var o=Vt(e),n;if(r){var a=Vt(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return lc(this,n)}}var kn=p(()=>{s();l();Ii();Ai();cc()});var Im,uc,Rm,Cm,fc,dc,mc=p(()=>{s();l();Im=Object.defineProperty,uc=Object.getOwnPropertySymbols,Rm=Object.prototype.hasOwnProperty,Cm=Object.prototype.propertyIsEnumerable,fc=(e,r,t)=>r in e?Im(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,dc=(e,r)=>{for(var t in r||(r={}))Rm.call(r,t)&&fc(e,t,r[t]);if(uc)for(var t of uc(r))Cm.call(r,t)&&fc(e,t,r[t]);return e}});function Hn(e){return e!=null}var pc=p(()=>{s();l()});function Yt(e,r){var t=dc({},e);for(var o of r)delete t[o];return t}var hc=p(()=>{s();l();mc()});function Wo(e,r,{signal:t}={}){var o=null,n=function(...u){o!==null&&clearTimeout(o),!t?.aborted&&(o=setTimeout(()=>{e(...u),o=null},r))},a=function(){n.cancel()};return n.cancel=function(){o!==null&&(clearTimeout(o),o=null)},t?.addEventListener("abort",a,{once:!0}),n}var vc=p(()=>{s();l()});var Wt=p(()=>{s();l();pc();hc();vc()});var Sr,Or,zn=p(()=>{"use strict";s();l();(function(e){e[e.EXISTS=1]="EXISTS",e[e.BLACKLISTED=2]="BLACKLISTED",e[e.ASSET=4]="ASSET"})(Sr||(Sr={}));(function(e){e[e.FULL_LOOKUP=0]="FULL_LOOKUP",e[e.NOT_FOUND=1]="NOT_FOUND"})(Or||(Or={}))});var Kt={};H(Kt,{_patcherDelaySymbol:()=>Ko,after:()=>_e,before:()=>dt,default:()=>qo,instead:()=>vo});function Ri(e){function r(...o){if(Ko in o[1]){var n=o[1][Ko],a=!1,c=()=>a=!0;return n(u=>{a||(o[1]=u,c=e.apply(this,o))}),()=>c()}return e.apply(this,o)}function t(...o){var n=o[1];if(!n||!("then"in n))throw new Error("target is not a then-able object");var a=!1,c=()=>a=!0;return n.then(u=>{a||(o[1]=u,c=r.apply(this,o))}),()=>c()}return Object.assign(r,{await:t})}var Nm,Om,Pm,Ko,_e,dt,vo,qo,tr=p(()=>{"use strict";s();l();({after:Nm,before:Om,instead:Pm}=Dn()),Ko=Symbol.for("bunny.api.patcher.delay");_e=Ri(Nm),dt=Ri(Om),vo=Ri(Pm),qo={after:_e,before:dt,instead:vo}});var gc={};H(gc,{assetsModule:()=>go,patchAssets:()=>Lm});function Lm(e){if(!go){go=e;var r=_e("registerAsset",go,()=>{var t=Ni();t!==-1&&Oi(t)});return r}}var go,Ci=p(()=>{"use strict";s();l();tr();pt();mt()});function yc(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Er(e,r,t){return r&&yc(e.prototype,r),t&&yc(e,t),e}var Xo=p(()=>{s();l()});function Jo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Pi=p(()=>{s();l()});var Li,$n,Di=p(()=>{"use strict";s();l();Vo();Xo();Pi();(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(Li||(Li={}));$n=function(){"use strict";function e(){rr(this,e),Jo(this,"listeners",Object.values(Li).reduce((r,t)=>(r[t]=new Set,r),{}))}return Er(e,[{key:"on",value:function(t,o){this.listeners[t].has(o)||this.listeners[t].add(o)}},{key:"off",value:function(t,o){this.listeners[t].delete(o)}},{key:"once",value:function(t,o){var n=(a,c)=>{this.off(a,n),o(a,c)};this.on(t,n)}},{key:"emit",value:function(t,o){for(var n of this.listeners[t])n(t,o)}}]),e}()});var Zo,Qo,Gn,_c,bc,te,Dm,Mm,Bm,Fm,Um,jm,Sc,km,fr,ht,Hm,zm,$m,Gm,Ec,xc,wc,Tc,Vm,Ym,Wm,Km,Ne,Mi,Ac,Ic,Rc,ze,en=p(()=>{s();l();Vo();Xo();Fn();kn();Zo="insert",Qo="update",Gn="delete",_c="reverse",bc="shuffle",te=Symbol.for("object-observer-meta-key-0"),Dm={async:1},Mm=e=>{if(!e||typeof e!="object")return null;var r={},t=[];for(var[o,n]of Object.entries(e))if(o==="path"){if(typeof n!="string"||n==="")throw new Error('"path" option, if/when provided, MUST be a non-empty string');r[o]=n}else if(o==="pathsOf"){if(e.path)throw new Error('"pathsOf" option MAY NOT be specified together with "path" option');if(typeof n!="string")throw new Error('"pathsOf" option, if/when provided, MUST be a string (MAY be empty)');r[o]=e.pathsOf.split(".").filter(Boolean)}else if(o==="pathsFrom"){if(e.path||e.pathsOf)throw new Error('"pathsFrom" option MAY NOT be specified together with "path"/"pathsOf" option/s');if(typeof n!="string"||n==="")throw new Error('"pathsFrom" option, if/when provided, MUST be a non-empty string');r[o]=n}else t.push(o);if(t.length)throw new Error(`'${t.join(", ")}' is/are not a valid observer option/s`);return r},Bm=(e,r,t)=>{var o={};o[te]=r;for(var n in e)o[n]=ht(e[n],n,r,t);return o},Fm=(e,r,t)=>{var o=e.length,n=new Array(o);n[te]=r;for(var a=0;a<o;a++)n[a]=ht(e[a],a,r,t);return n},Um=(e,r)=>(e[te]=r,e),jm=(e,r)=>{if(e===null)return r;var t=r;if(e.path){var o=e.path;t=r.filter(u=>u.path.join(".")===o)}else if(e.pathsOf){var n=e.pathsOf,a=n.join(".");t=r.filter(u=>(u.path.length===n.length+1||u.path.length===n.length&&(u.type===_c||u.type===bc))&&u.path.join(".").startsWith(a))}else if(e.pathsFrom){var c=e.pathsFrom;t=r.filter(u=>u.path.join(".").startsWith(c))}return t},Sc=(e,r)=>{try{e(r)}catch(t){console.error(`failed to notify listener ${e} with ${r}`,t)}},km=function(){var r=this.batches;this.batches=[];for(var[t,o]of r)Sc(t,o)},fr=(e,r)=>{var t=e,o,n,a,c,u,d,b=r.length;do{for(o=t.options.async,n=t.observers,d=n.length;d--;)if([a,c]=n[d],u=jm(c,r),u.length)if(o){t.batches.length===0&&queueMicrotask(km.bind(t));var h=void 0;for(var x of t.batches)if(x[0]===a){h=x;break}h||(h=[a,[]],t.batches.push(h)),Array.prototype.push.apply(h[1],u)}else Sc(a,u);var I=t.parent;if(I){for(var U=0;U<b;U++){var Q=r[U];r[U]=new Ne(Q.type,[t.ownKey,...Q.path],Q.value,Q.oldValue,Q.object)}t=I}else t=null}while(t)},ht=(e,r,t,o)=>o!==void 0&&o.has(e)?null:typeof e!="object"||e===null?e:Array.isArray(e)?new Ic({target:e,ownKey:r,parent:t,visited:o}).proxy:ArrayBuffer.isView(e)?new Rc({target:e,ownKey:r,parent:t}).proxy:e instanceof Date?e:new Ac({target:e,ownKey:r,parent:t,visited:o}).proxy,Hm=function(){var r=this[te],t=r.target,o=t.length-1,n=t.pop();if(n&&typeof n=="object"){var a=n[te];a&&(n=a.detach())}var c=[new Ne(Gn,[o],void 0,n,this)];return fr(r,c),n},zm=function(){for(var r=this[te],t=r.target,o=arguments.length,n=new Array(o),a=t.length,c=0;c<o;c++)n[c]=ht(arguments[c],a+c,r);for(var u=Reflect.apply(t.push,t,n),d=[],b=a,h=t.length;b<h;b++)d[b-a]=new Ne(Zo,[b],t[b],void 0,this);return fr(r,d),u},$m=function(){var r=this[te],t=r.target,o,n,a,c,u;for(o=t.shift(),o&&typeof o=="object"&&(u=o[te],u&&(o=u.detach())),n=0,a=t.length;n<a;n++)c=t[n],c&&typeof c=="object"&&(u=c[te],u&&(u.ownKey=n));var d=[new Ne(Gn,[0],void 0,o,this)];return fr(r,d),o},Gm=function(){for(var r=this[te],t=r.target,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=ht(arguments[a],a,r);for(var c=Reflect.apply(t.unshift,t,n),u=0,d=t.length,b;u<d;u++)if(b=t[u],b&&typeof b=="object"){var h=b[te];h&&(h.ownKey=u)}for(var x=n.length,I=new Array(x),U=0;U<x;U++)I[U]=new Ne(Zo,[U],t[U],void 0,this);return fr(r,I),c},Ec=function(){var r=this[te],t=r.target,o,n,a;for(t.reverse(),o=0,n=t.length;o<n;o++)if(a=t[o],a&&typeof a=="object"){var c=a[te];c&&(c.ownKey=o)}var u=[new Ne(_c,[],void 0,void 0,this)];return fr(r,u),this},xc=function(r){var t=this[te],o=t.target,n,a,c;for(o.sort(r),n=0,a=o.length;n<a;n++)if(c=o[n],c&&typeof c=="object"){var u=c[te];u&&(u.ownKey=n)}var d=[new Ne(bc,[],void 0,void 0,this)];return fr(t,d),this},wc=function(r,t,o){var n=this[te],a=n.target,c=[],u=a.length,d=a.slice(0);if(t=t===void 0?0:t<0?Math.max(u+t,0):Math.min(t,u),o=o===void 0?u:o<0?Math.max(u+o,0):Math.min(o,u),t<u&&o>t){a.fill(r,t,o);for(var b,h=t,x,I;h<o;h++)x=a[h],a[h]=ht(x,h,n),h in d?(I=d[h],I&&typeof I=="object"&&(b=I[te],b&&(I=b.detach())),c.push(new Ne(Qo,[h],a[h],I,this))):c.push(new Ne(Zo,[h],a[h],void 0,this));fr(n,c)}return this},Tc=function(r,t,o){var n=this[te],a=n.target,c=a.length;r=r<0?Math.max(c+r,0):r,t=t===void 0?0:t<0?Math.max(c+t,0):Math.min(t,c),o=o===void 0?c:o<0?Math.max(c+o,0):Math.min(o,c);var u=Math.min(o-t,c-r);if(r<c&&r!==t&&u>0){var d=a.slice(0),b=[];a.copyWithin(r,t,o);for(var h=r,x,I,U;h<r+u;h++)x=a[h],x&&typeof x=="object"&&(x=ht(x,h,n),a[h]=x),I=d[h],I&&typeof I=="object"&&(U=I[te],U&&(I=U.detach())),!(typeof x!="object"&&x===I)&&b.push(new Ne(Qo,[h],x,I,this));fr(n,b)}return this},Vm=function(){for(var r=this[te],t=r.target,o=arguments.length,n=new Array(o),a=t.length,c=0;c<o;c++)n[c]=ht(arguments[c],c,r);for(var u=o===0?0:n[0]<0?a+n[0]:n[0],d=o<2?a-u:n[1],b=Math.max(o-2,0),h=Reflect.apply(t.splice,t,n),x=t.length,I,U=0,Q;U<x;U++)Q=t[U],Q&&typeof Q=="object"&&(I=Q[te],I&&(I.ownKey=U));var W,Rn,it;for(W=0,Rn=h.length;W<Rn;W++)it=h[W],it&&typeof it=="object"&&(I=it[te],I&&(h[W]=I.detach()));var mo=[],ke;for(ke=0;ke<d;ke++)ke<b?mo.push(new Ne(Qo,[u+ke],t[u+ke],h[ke],this)):mo.push(new Ne(Gn,[u+ke],void 0,h[ke],this));for(;ke<b;ke++)mo.push(new Ne(Zo,[u+ke],t[u+ke],void 0,this));return fr(r,mo),h},Ym=function(r,t){var o=this[te],n=o.target,a=r.length,c=n.slice(0);t=t||0,n.set(r,t);for(var u=new Array(a),d=t;d<a+t;d++)u[d-t]=new Ne(Qo,[d],n[d],c[d],this);fr(o,u)},Wm={pop:Hm,push:zm,shift:$m,unshift:Gm,reverse:Ec,sort:xc,fill:wc,copyWithin:Tc,splice:Vm},Km={reverse:Ec,sort:xc,fill:wc,copyWithin:Tc,set:Ym},Ne=function e(r,t,o,n,a){"use strict";rr(this,e),this.type=r,this.path=t,this.value=o,this.oldValue=n,this.object=a},Mi=function(){"use strict";function e(r,t){rr(this,e);var{target:o,parent:n,ownKey:a,visited:c=new Set}=r;n&&a!==void 0?(this.parent=n,this.ownKey=a):(this.parent=null,this.ownKey=null),c.add(o);var u=t(o,this,c);c.delete(o),this.observers=[],this.revocable=Proxy.revocable(u,this),this.proxy=this.revocable.proxy,this.target=u,this.options=this.processOptions(r.options),this.options.async&&(this.batches=[])}return Er(e,[{key:"processOptions",value:function(t){if(t){if(typeof t!="object")throw new Error(`Observable options if/when provided, MAY only be an object, got '${t}'`);var o=Object.keys(t).filter(n=>!(n in Dm));if(o.length)throw new Error(`'${o.join(", ")}' is/are not a valid Observable option/s`);return Object.assign({},t)}else return{}}},{key:"detach",value:function(){return this.parent=null,this.target}},{key:"set",value:function(t,o,n){var a=t[o];if(n!==a){var c=ht(n,o,this);if(t[o]=c,a&&typeof a=="object"){var u=a[te];u&&(a=u.detach())}var d=a===void 0?[new Ne(Zo,[o],c,void 0,this.proxy)]:[new Ne(Qo,[o],c,a,this.proxy)];fr(this,d)}return!0}},{key:"deleteProperty",value:function(t,o){var n=t[o];if(delete t[o],n&&typeof n=="object"){var a=n[te];a&&(n=a.detach())}var c=[new Ne(Gn,[o],void 0,n,this.proxy)];return fr(this,c),!0}}]),e}(),Ac=function(e){"use strict";ut(t,e);var r=ft(t);function t(o){return rr(this,t),r.call(this,o,Bm)}return t}(Mi),Ic=function(e){"use strict";ut(t,e);var r=ft(t);function t(o){return rr(this,t),r.call(this,o,Fm)}return Er(t,[{key:"get",value:function(n,a){return Wm[a]||n[a]}}]),t}(Mi),Rc=function(e){"use strict";ut(t,e);var r=ft(t);function t(o){return rr(this,t),r.call(this,o,Um)}return Er(t,[{key:"get",value:function(n,a){return Km[a]||n[a]}}]),t}(Mi),ze=Object.freeze({from:(e,r)=>{if(!e||typeof e!="object")throw new Error("observable MAY ONLY be created from a non-null object");if(e[te])return e;if(Array.isArray(e))return new Ic({target:e,ownKey:null,parent:null,options:r}).proxy;if(ArrayBuffer.isView(e))return new Rc({target:e,ownKey:null,parent:null,options:r}).proxy;if(e instanceof Date)throw new Error(`${e} found to be one of a non-observable types`);return new Ac({target:e,ownKey:null,parent:null,options:r}).proxy},isObservable:e=>!!(e&&e[te]),observe:(e,r,t)=>{if(!ze.isObservable(e))throw new Error("invalid observable parameter");if(typeof r!="function")throw new Error(`observer MUST be a function, got '${r}'`);var o=e[te].observers;o.some(n=>n[0]===r)?console.warn("observer may be bound to an observable only once; will NOT rebind"):o.push([r,Mm(t)])},unobserve:(e,...r)=>{if(!ze.isObservable(e))throw new Error("invalid observable parameter");var t=e[te].observers,o=t.length;if(o){if(!r.length){t.splice(0);return}for(;o;)r.indexOf(t[--o][0])>=0&&t.splice(o,1)}}})});var zi={};H(zi,{awaitStorage:()=>wr,createStorage:()=>he,createStorageAndCallback:()=>Vn,createStorageAsync:()=>qt,migrateToNewStorage:()=>Pr,preloadStorageIfExists:()=>vt,purgeStorage:()=>yo,updateStorageAsync:()=>xr,useObservable:()=>se});function Hi(e){return{get:S(function*(){try{return JSON.parse(yield st(e))}catch(r){throw new Error(`Failed to parse storage from '${e}'`,{cause:r})}}),set:Wo(function(){var r=S(function*(t){if(!t||typeof t!="object")throw new Error("data needs to be an object");yield Ke(e,JSON.stringify(t))});return function(t){return r.apply(this,arguments)}}(),500),exists:S(function*(){return yield ur(e)})}}function Pr(e,r){return Bi.apply(this,arguments)}function Bi(){return Bi=S(function*(e,r){var t=new Promise(u=>o=u),o,n=Pr._migrated??=yield qt(".__vd_migrations",{dflt:[]});if(!n.includes(e)){var a,c=e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-");if(yield ur(`../vd_mmkv/${c}`))Vn(`../vd_mmkv/${c}`,u=>{Promise.resolve(r(u)).then(()=>o())});else if(a=yield zr.getItem(e))return yield r(JSON.parse(a)),n.push(e),Promise.resolve();return t.then(u=>(n.push(e),u))}}),Bi.apply(this,arguments)}function se(e,r){if(e.some(o=>o?.[Cc]))throw new Error("An error occured while initializing the storage");if(e.some(o=>!ze.isObservable(o)))throw new Error("Argument passed isn't an Observable");var[,t]=React.useReducer(o=>~o,0);React.useEffect(()=>{var o=()=>t();return e.forEach(n=>ze.observe(n,o,r)),()=>{e.forEach(n=>ze.unobserve(n,o))}},[])}function xr(e,r){return Fi.apply(this,arguments)}function Fi(){return Fi=S(function*(e,r){Vr[e]=r,yield Hi(e).set(r)}),Fi.apply(this,arguments)}function Vn(e,r,{dflt:t={},nullIfEmpty:o=!1}={}){var n,a=u=>{var d=new Proxy(ze.from(u),{get(h,x,I){return x===Symbol.for("vendetta.storage.emitter")?n||(n=new $n,ze.observe(h,U=>{for(var Q of U)n.emit(Q.type!=="delete"?"SET":"DEL",{path:Q.path,value:Q.value})}),n):Reflect.get(h,x,I)}}),b=()=>c.set(d);ze.observe(d,b),r(d)},c=Hi(e);Vr[e]?a(Vr[e]):c.exists().then(function(){var u=S(function*(d){d?a(Vr[e]=yield c.get()):o?a(Vr[e]=null):(Vr[e]=t,yield c.set(t),a(t))});return function(d){return u.apply(this,arguments)}}())}function qt(e){return Ui.apply(this,arguments)}function Ui(){return Ui=S(function*(e,r={}){return new Promise(t=>Vn(e,t,r))}),Ui.apply(this,arguments)}function vt(e){return ji.apply(this,arguments)}function ji(){return ji=S(function*(e){if(Vr[e])return!0;var r=Hi(e);return(yield r.exists())?(Vr[e]=yield r.get(),!1):!0}),ji.apply(this,arguments)}function yo(e){return ki.apply(this,arguments)}function ki(){return ki=S(function*(e){yield Gr(e),delete Vr[e]}),ki.apply(this,arguments)}function wr(...e){return Promise.all(e.map(r=>r[Nc]))}var Cc,Nc,Vr,he,Me=p(()=>{"use strict";s();l();be();Di();en();lt();er();Wt();Cc=Symbol.for("bunny.storage.initError"),Nc=Symbol.for("bunny.storage.promise"),Vr={};he=(e,r={})=>{var t=new Promise(d=>c=d),o,n,a,c;Vn(e,d=>{o=d,n=!0,c()},r);var u=()=>{if(n)return!0;throw new Error(`Attempted to access storage without initializing: ${e}`)};return new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(d=>[d,(b,...h)=>u()&&Reflect[d](o,...h)])),get(d,b,h){return b===Cc?a:b===Nc?t:u()&&Reflect.get(o??d,b,h)}})}});var Yn={};H(Yn,{default:()=>O});var O,Te=p(()=>{"use strict";s();l();be();Me();O={general:he("settings/general.json"),developer:he("settings/developer.json"),loader:he("loader.json",{dflt:{customLoadUrl:{enabled:!1,url:"http://localhost:4040/bunny.js"}}}),prepare(){return S(function*(){yield wr(this.general,this.developer,this.loader),yield Pr("VENDETTA_SETTINGS",e=>{this.general.patchIsStaff=e.enableDiscordDeveloperSettings,this.general.safeModeEnabled=e.safeMode?.enabled??!1,this.developer.enabled=e.developerSettings,this.developer.debuggerUrl=e.debuggerUrl,this.developer.evalCommandEnabled=e.enableEvalCommand??!1})}).apply(this)},useSettings(){se([this.general,this.developer,this.loader])},isSafeMode(){return this.general.safeModeEnabled??!1}}});var Yi={};H(Yi,{default:()=>qm});var Oc,Lc,$i,Vi,_o,Gi,Yr,Pc,rn,qm,Wi=p(()=>{"use strict";s();l();pt();Oc=new Set(["AlertActionButton","AlertModal","AlertModalContainer","AvatarDuoPile","AvatarPile","BACKDROP_OPAQUE_MAX_OPACITY","Backdrop","Button","Card","ContextMenu","ContextMenuContainer","FauxHeader","FloatingActionButton","GhostInput","GuildIconPile","HeaderActionButton","HeaderButton","HeaderSubmittingIndicator","IconButton","Input","InputButton","InputContainer","LayerContext","LayerScope","Modal","ModalActionButton","ModalContent","ModalDisclaimer","ModalFloatingAction","ModalFloatingActionSpacer","ModalFooter","ModalScreen","ModalStepIndicator","NAV_BAR_HEIGHT","NAV_BAR_HEIGHT_MULTILINE","Navigator","NavigatorHeader","NavigatorScreen","Pile","PileOverflow","RedesignCompat","RedesignCompatContext","RowButton","STATUS_BAR_HEIGHT","SceneLoadingIndicator","SearchField","SegmentedControl","SegmentedControlPages","Slider","Stack","StepModal","StickyContext","StickyHeader","StickyWrapper","TABLE_ROW_CONTENT_HEIGHT","TABLE_ROW_HEIGHT","TableCheckboxRow","TableRadioGroup","TableRadioRow","TableRow","TableRowGroup","TableRowGroupTitle","TableRowIcon","TableSwitchRow","Tabs","TextArea","TextField","TextInput","Toast","dismissAlerts","getHeaderBackButton","getHeaderCloseButton","getHeaderConditionalBackButton","getHeaderNoTitle","getHeaderTextButton","hideContextMenu","navigatorShouldCrossfade","openAlert","useAccessibilityNativeStackOptions","useAndroidNavScrim","useCoachmark","useFloatingActionButtonScroll","useFloatingActionButtonState","useNativeStackNavigation","useNavigation","useNavigationTheme","useNavigatorBackPressHandler","useNavigatorScreens","useNavigatorShouldCrossfade","useSegmentedControlState","useStackNavigation","useTabNavigation","useTooltip"]),Lc={},$i={},Vi=Ki("redesign_module");for([Pc,rn]of Vi.getModules())for(Yr of Oc){if(_o=void 0,rn[Yr])_o=rn;else if(rn.default?.[Yr])_o=rn.default;else continue;Gi=Reflect.ownKeys(_o).length,!($i[Yr]&&Gi>=$i[Yr])&&(Lc[Yr]=_o[Yr],$i[Yr]=Reflect.ownKeys(_o).length,Vi.cacheId(Pc),Gi===1&&Oc.delete(Yr))}Vi.finish();qm=Lc});var Zi={};H(Zi,{getCachedPolyfillModules:()=>rp,getImportingModuleId:()=>Ni,getModules:()=>qn,metroModules:()=>Be,requireModule:()=>dr,subscribeModule:()=>Ji});function Kn(e){Object.defineProperty(Be,e,{enumerable:!1}),Uc.add(e),es(Number(e))}function tn(e){return!e||e===window||e["<!@ pylix was here :fuyusquish: !@>"]===null||e.__proto__===Object.prototype&&Reflect.ownKeys(e).length===0}function ep(e,r){if(Qi(r,e),e.initSentry&&=()=>{},e.default?.track&&e.default.trackMaker&&(e.default.track=()=>Promise.resolve()),e.registerAsset&&(Ci(),cr(gc)).patchAssets(e),!Bc&&["customBubblingEventTypes","customDirectEventTypes","register","get"].every(c=>e[c])&&(Xi("register",e,(c,u)=>{try{return u(...c)}catch{}}),Bc=!0),e?.default?.constructor?.displayName==="DeveloperExperimentStore"&&(e.default=new Proxy(e.default,{get(c,u,d){if(u==="isDeveloper"){var{general:b}=(Te(),cr(Yn)).default;return b?.patchIsStaff??!1}return Reflect.get(c,u,d)}})),!Mc&&e.fileFinishedImporting&&(Jm("fileFinishedImporting",e,([c])=>{bo===-1||!c||(Be[bo].__filePath=c)}),Mc=!0),!Dc&&window["__core-js_shared__"]){var t=c=>typeof c=="function"&&Qm.apply(c,[]);window["__core-js_shared__"].inspectSource=t,Dc=!0}if(e.findHostInstance_DEPRECATED){var o=Be[r-1]?.publicModule.exports,n=o.default?.reactProfilingEnabled?1:-1;Be[r+n]?.isInitialized||Kn(r+n)}e.isMoment&&Xi("defineLocale",e,(c,u)=>{var d=e.locale();u(...c),e.locale(d)});var a=Wn.get(Number(r));a&&(a.forEach(c=>c()),Wn.delete(Number(r)))}function Ni(){return bo}function Ji(e,r){var t=Wn.get(e)??new Set;return t.add(r),Wn.set(e,t),()=>t.delete(r)}function dr(e){if(Be[0]?.isInitialized||qi(0),!Uc.has(e)){if(Number(e)===-1)return Wi(),cr(Yi);if(Be[e]?.isInitialized&&!Be[e]?.hasError)return qi(e);var r=ErrorUtils.getGlobalHandler();ErrorUtils.setGlobalHandler(Zm);var t;try{t=qi(e)}catch{Kn(e),t=void 0}return ErrorUtils.setGlobalHandler(r),t}}function*qn(e,r=!1){yield[-1,(Wi(),cr(Yi))];var t=Wr().findIndex[e];if(r&&!t?.[`_${Or.FULL_LOOKUP}`]&&(t=void 0),!t?.[`_${Or.NOT_FOUND}`]){for(var o in t)if(o[0]!=="_"){var n=dr(Number(o));tn(n)||(yield[o,n])}for(var a in Be){var c=dr(Number(a));tn(c)||(yield[a,c])}}}function*rp(e){var r=Wr().polyfillIndex[e];for(var t in r){var o=dr(Number(t));tn(o)||(yield[t,o])}if(!r[`_${Or.FULL_LOOKUP}`])for(var n in Be){var a=dr(Number(n));tn(a)||(yield[n,a])}}var Xm,Jm,Xi,Be,qi,Wn,Uc,Zm,Qm,Dc,Mc,Bc,bo,Fc,mt=p(()=>{"use strict";s();l();pt();zn();Xm=function(e){var r=Number(e),t=Be[r],o=Wr().flagsIndex[r];if(o&Sr.BLACKLISTED)return Kn(r),"continue";t.factory&&Xi("factory",t,(n,a)=>{var c=bo;bo=r;var{1:u,4:d}=n;n[2]=b=>{var h=u(b);return h&&h.__esModule?h.default:h},n[3]=b=>{var h=u(b);if(h&&h.__esModule)return h;var x={};return h&&Object.assign(x,h),x.default=h,x},a(...n),tn(d.exports)?Kn(r):ep(d.exports,r),bo=c})},{before:Jm,instead:Xi}=Dn(),Be=window.modules,qi=window.__r,Wn=new Map,Uc=new Set,Zm=()=>{},Qm=Function.prototype.toString,Dc=!1,Mc=!1,Bc=!1,bo=-1;for(Fc in Be)Xm(Fc)});var zc={};H(zc,{getCacherForUniq:()=>Jn,getMetroCache:()=>Wr,getPolyfillModuleCacher:()=>Ki,indexAssetModuleFlag:()=>Oi,indexBlacklistFlag:()=>es,indexExportsFlags:()=>Qi,initMetroCache:()=>tp});function jc(){var e={_v:kc,_buildNumber:$t.Build,_modulesCount:Object.keys(window.modules).length,flagsIndex:{},findIndex:{},polyfillIndex:{}};return setTimeout(()=>{for(var r in window.modules)(mt(),cr(Zi)).requireModule(r)},100),$e=e,e}function tp(){return ts.apply(this,arguments)}function ts(){return ts=S(function*(){if(!(yield ur(rs)))return void jc();var e=yield st(rs);try{if($e=JSON.parse(e),$e._v!==kc)throw $e=null,"cache invalidated; cache version outdated";if($e._buildNumber!==$t.Build)throw $e=null,"cache invalidated; version mismatch";if($e._modulesCount!==Object.keys(window.modules).length)throw $e=null,"cache invalidated; modules count mismatch"}catch{jc()}}),ts.apply(this,arguments)}function Hc(e){if(e){var r=Sr.EXISTS;return r}}function Qi(e,r){var t=Hc(r);t&&t!==Sr.EXISTS&&($e.flagsIndex[e]=t)}function es(e){$e.flagsIndex[e]|=Sr.BLACKLISTED}function Oi(e){$e.flagsIndex[e]|=Sr.ASSET}function Jn(e,r){var t=$e.findIndex[e]??={};return{cacheId(o,n){t[o]??=Hc(n),Xn()},finish(o){r&&(t[`_${Or.FULL_LOOKUP}`]=1),o&&(t[`_${Or.NOT_FOUND}`]=1),Xn()}}}function Ki(e){var r=$e.polyfillIndex[e]??={};return{getModules(){return(mt(),cr(Zi)).getCachedPolyfillModules(e)},cacheId(t){r[t]=1,Xn()},finish(){r[`_${Or.FULL_LOOKUP}`]=1,Xn()}}}var kc,rs,$e,Wr,Xn,pt=p(()=>{"use strict";s();l();be();lt();er();Wt();zn();kc=55,rs="__bunny_metro_cache_key__",$e=null,Wr=window.__getMetroCache=()=>$e;Xn=Wo(()=>{Ke(rs,JSON.stringify($e))},1e3)});var ns={};H(ns,{getProxyFactory:()=>os,lazyDestructure:()=>ue,proxyLazy:()=>Oe});function Oe(e,r={}){var t,o=r.hint!=="object"?function(){}:{},n=()=>t??=e(),a=new Proxy(o,np);return Gc.set(a,n),So.set(o,{factory:e,options:r}),a}function ue(e,r={}){var t=Oe(e);return new Proxy({},{get(o,n){return n===Symbol.iterator?function*(){throw yield t,yield new Proxy({},{get:(a,c)=>Oe(()=>t[c],r)}),new Error("This is not a real iterator, this is likely used incorrectly")}:Oe(()=>t[n],r)}})}function os(e){return Gc.get(e)}var $c,op,Gc,So,np,Fe=p(()=>{"use strict";s();l();$c=new Set(["arguments","caller","prototype"]),op=e=>typeof e=="string"&&$c.has(e),Gc=new WeakMap,So=new WeakMap,np={...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(e=>[e,(r,...t)=>{var o=So.get(r),n=o?.factory();if(!n)throw new Error(`Trying to Reflect.${e} of ${typeof n}`);return Reflect[e](n,...t)}])),has(e,r){var t=So.get(e);if(t?.options){var{exemptedEntries:o}=t.options;if(o&&r in o)return!0}var n=t?.factory();if(!n)throw new Error(`Trying to Reflect.has of ${typeof n}`);return Reflect.has(n,r)},get(e,r,t){var o=So.get(e);if(o?.options){var{exemptedEntries:n}=o.options;if(n?.[r])return n[r]}var a=o?.factory();if(!a)throw new Error(`Trying to Reflect.get of ${typeof a}`);return Reflect.get(a,r,t)},ownKeys:e=>{var r=So.get(e),t=r?.factory();if(!t)throw new Error(`Trying to Reflect.ownKeys of ${typeof t}`);var o=Reflect.ownKeys(t);return $c.forEach(n=>!o.includes(n)&&o.push(n)),o},getOwnPropertyDescriptor:(e,r)=>{var t=So.get(e),o=t?.factory();if(!o)throw new Error(`Trying to getOwnPropertyDescriptor of ${typeof o}`);if(op(r))return Reflect.getOwnPropertyDescriptor(e,r);var n=Reflect.getOwnPropertyDescriptor(o,r);return n&&Object.defineProperty(e,r,n),n}}});var on={};H(on,{createFilterDefinition:()=>mr,createSimpleFilter:()=>ap});function mr(e,r){function t(n,a,c){return Object.assign(n,{filter:e,raw:c,uniq:[c&&"raw::",r(a)].filter(Boolean).join("")})}var o=n=>(...a)=>t((c,u,d)=>e(a,c,u,d),a,n);return Object.assign(o(!1),{byRaw:o(!0),uniqMaker:r})}function ap(e,r){return mr((t,o)=>e(o),()=>`dynamic::${r}`)()}var Zn=p(()=>{"use strict";s();l()});var is={};H(is,{byDisplayName:()=>yt,byFilePath:()=>ea,byMutableProp:()=>as,byName:()=>gt,byProps:()=>nn,byStoreName:()=>Qn,byTypeName:()=>_t});var nn,gt,yt,_t,Qn,ea,as,ra=p(()=>{"use strict";s();l();Zn();mt();nn=mr((e,r)=>e.length===0?r[e[0]]:e.every(t=>r[t]),e=>`bunny.metro.byProps(${e.join(",")})`),gt=mr(([e],r)=>r.name===e,e=>`bunny.metro.byName(${e})`),yt=mr(([e],r)=>r.displayName===e,e=>`bunny.metro.byDisplayName(${e})`),_t=mr(([e],r)=>r.type?.name===e,e=>`bunny.metro.byTypeName(${e})`),Qn=mr(([e],r)=>r.getName?.length===0&&r.getName()===e,e=>`bunny.metro.byStoreName(${e})`),ea=mr(([e,r],t,o,n)=>r===n&&Be[o]?.__filePath===e,([e,r])=>`bunny.metro.byFilePath(${e},${r})`),as=mr(([e],r)=>r?.[e]&&!Object.getOwnPropertyDescriptor(r,e)?.get,e=>`bunny.metro.byMutableProp(${e})`)});function Vc(e,r,t){return e.default&&e.__esModule&&t(e.default,r,!0)?{exports:t.raw?e:e.default,defaultExport:!t.raw}:!t.raw&&t(e,r,!1)?{exports:e,defaultExport:!1}:{}}function ss(e){var{cacheId:r,finish:t}=Jn(e.uniq,!1);for(var[o,n]of qn(e.uniq,!1)){var{exports:a,defaultExport:c}=Vc(n,o,e);if(a!==void 0)return r(o,a),{id:o,defaultExport:c}}return t(!0),{}}function ip(e){return ss(e)?.id}function Ge(e){var{id:r,defaultExport:t}=ss(e);if(r!=null)return t?dr(r).default:dr(r)}function ls(e){var{cacheId:r,finish:t}=Jn(e.uniq,!0),o=[];for(var[n,a]of qn(e.uniq,!0)){var{exports:c,defaultExport:u}=Vc(a,n,e);c!==void 0&&typeof u=="boolean"&&(o.push({id:n,defaultExport:u}),r(n,c))}return t(o.length===0),o}function sp(e){return ls(e).map(r=>r.id)}function bt(e){return ls(e).map(r=>{if(r.id){var{id:t,defaultExport:o}=r;return o?dr(t).default:dr(t)}})}var an=p(()=>{"use strict";s();l();pt();mt()});var cs={};H(cs,{_lazyContextSymbol:()=>ta,createLazyModule:()=>Lr,getLazyContext:()=>Wc});function lp(e){var r=Wr().findIndex[e.uniq];if(r){for(var t in r)if(t[0]!=="_")return Number(t)}}function cp(e,r){var t=Wc(e);if(!t)throw new Error("Subscribing a module for non-proxy-find");if(!t.indexed)throw new Error("Attempting to subscribe to a non-indexed find");return Ji(t.moduleId,()=>{r(Ge(t.filter))})}function Wc(e){return Yc.get(e)}function Lr(e){var r=void 0,t=lp(e),o={filter:e,indexed:!!t,moduleId:t,getExports(a){return!t||Be[t]?.isInitialized?(a(this.forceLoad()),()=>{}):this.subscribe(a)},subscribe(a){return cp(n,a)},get cache(){return r},forceLoad(){if(r??=Ge(e),!r)throw new Error(`${e.uniq} is ${typeof r}! (id ${o.moduleId??"unknown"})`);return r}},n=Oe(()=>o.forceLoad(),{exemptedEntries:{[ta]:o,[Ko]:a=>o.getExports(a)}});return Yc.set(n,o),n}var ta,Yc,sn=p(()=>{"use strict";s();l();tr();Fe();an();pt();mt();ta=Symbol.for("bunny.metro.lazyContext"),Yc=new WeakMap});var z,B,us,oa,Ue,fs,ds,ms,ps,hs,up,vs,gs,Xt,fp,ys,Ee=p(()=>{"use strict";s();l();ra();an();sn();z=(...e)=>Ge(nn(...e)),B=(...e)=>Lr(nn(...e)),us=(...e)=>bt(nn(...e)),oa=(e,r=!0)=>Ge(r?gt(e):gt.byRaw(e)),Ue=(e,r=!0)=>Lr(r?gt(e):gt.byRaw(e)),fs=(e,r=!0)=>bt(r?gt(e):gt.byRaw(e)),ds=(e,r=!0)=>Ge(r?yt(e):yt.byRaw(e)),ms=(e,r=!0)=>Lr(r?yt(e):yt.byRaw(e)),ps=(e,r=!0)=>bt(r?yt(e):yt.byRaw(e)),hs=(e,r=!0)=>Ge(r?_t(e):_t.byRaw(e)),up=(e,r=!0)=>Lr(r?_t(e):_t.byRaw(e)),vs=(e,r=!0)=>bt(r?_t(e):_t.byRaw(e)),gs=e=>Ge(Qn(e)),Xt=e=>Lr(Qn(e)),fp=(e,r=!1)=>Ge(ea(e,r)),ys=(e,r=!1)=>Lr(ea(e,r))});function qc(e){var r=os(e[0]);return r&&(e[0]=r()),e}var Kc,St,i,_,V=p(()=>{"use strict";s();l();Fe();Ee();Kc=B("jsx","jsxs","Fragment");St=Symbol.for("react.fragment"),i=(...e)=>Kc.jsx(...qc(e)),_=(...e)=>Kc.jsxs(...qc(e))});var aa={};H(aa,{Flux:()=>ws,FluxDispatcher:()=>wt,FluxUtils:()=>Ts,NavigationNative:()=>de,React:()=>ln,ReactNative:()=>na,assets:()=>bs,channels:()=>_s,clipboard:()=>Pe,commands:()=>Jt,constants:()=>Et,i18n:()=>xt,invites:()=>Ss,messageUtil:()=>pr,navigation:()=>Es,navigationStack:()=>xs,semver:()=>dp,toasts:()=>xo,tokens:()=>J,url:()=>Eo,useToken:()=>Zt});var Et,_s,xt,Eo,Pe,bs,Ss,Jt,Es,xo,pr,xs,de,dp,J,Zt,ws,wt,Ts,ln,na,Y=p(()=>{"use strict";s();l();Fe();Ee();Et=B("Fonts","Permissions"),_s=B("getVoiceChannelId"),xt=B("Messages"),Eo=B("openURL","openDeeplink"),Pe=B("setString","getString","hasString"),bs=B("registerAsset"),Ss=B("acceptInviteAndTransitionToInviteChannel"),Jt=B("getBuiltInCommands"),Es=B("pushLazy"),xo=ys("modules/toast/native/ToastActionCreators.tsx",!0),pr=B("sendBotMessage"),xs=B("createStackNavigator"),de=B("NavigationContainer"),dp=B("parse","clean"),J=B("colors","unsafe_rawColors"),{useToken:Zt}=ue(()=>z("useToken")),ws=B("connectStores"),wt=z("_interceptors"),Ts=z("useStateFromStores"),ln=window.React=B("createElement"),na=window.ReactNative=B("AppRegistry")});var ia={};H(ia,{common:()=>aa,factories:()=>on,filters:()=>is,findAllExports:()=>bt,findAllModule:()=>ls,findAllModuleId:()=>sp,findByDisplayName:()=>ds,findByDisplayNameAll:()=>ps,findByDisplayNameLazy:()=>ms,findByFilePath:()=>fp,findByFilePathLazy:()=>ys,findByName:()=>oa,findByNameAll:()=>fs,findByNameLazy:()=>Ue,findByProps:()=>z,findByPropsAll:()=>us,findByPropsLazy:()=>B,findByStoreName:()=>gs,findByStoreNameLazy:()=>Xt,findByTypeName:()=>hs,findByTypeNameAll:()=>vs,findByTypeNameLazy:()=>up,findExports:()=>Ge,findModule:()=>ss,findModuleId:()=>ip,lazy:()=>cs});var hr=p(()=>{"use strict";s();l();Y();Zn();ra();an();sn();Ee()});var Tt=Cr((Xy,Xc)=>{"use strict";s();l();Ee();Xc.exports={react:B("createElement"),"react-native":B("AppRegistry"),util:B("inspect","isNullOrUndefined"),moment:B("isMoment"),"chroma-js":B("brewer"),lodash:B("forEachRight"),"@shopify/react-native-skia":B("useFont")}});var Qt=Cr((Qy,Jc)=>{s();l();Jc.exports=Tt()["chroma-js"]});var oe=Cr((t_,Zc)=>{s();l();Zc.exports=Tt()["react-native"]});function cn(e){var r=(W="dark")=>(C.preferences.type??W)==="dark"?"darker":"light";if(e.spec===3){var t={};for(var[o,n]of Object.entries(e.semantic??{}))if(typeof n=="object"){var{type:a,value:c,opacity:u}=n;if(a==="raw")t[o]={value:c,opacity:u??1};else{var d=Qc.RawColor[c];t[o]={value:d,opacity:u??1}}}else if(typeof n=="string")n.startsWith("#")?t[o]={value:wo.default.hex(n).hex(),opacity:1}:t[o]={value:Qc.RawColor[n],opacity:1};else throw new Error(`Invalid semantic definitions: ${n}`);return{reference:r(e.type),semantic:t,raw:e.raw??{},background:e.background}}else if(e.spec===2){var b={},h=e.background?{...Yt(e.background,["alpha"]),opacity:e.background.alpha}:void 0;if(e.semanticColors)for(var x in e.semanticColors){var I=e.semanticColors[x].map(W=>W||void 0).slice(0,2);I[0]&&(b[x]={value:sa(I[r()==="light"?1:0]),opacity:1})}if(e.rawColors){for(var U in e.rawColors){var Q=e.rawColors[U];Q&&(e.rawColors[U]=sa(Q))}la.Platform.OS==="android"&&As(e.rawColors)}return{reference:r(),semantic:b,raw:e.rawColors??{},background:h}}throw new Error("Invalid theme spec")}function As(e){if(e){var r={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var t in r){var[o,n]=r[t];e[o]&&(e[t]=(0,wo.default)(e[o]).alpha(n).hex())}return e}}function sa(e){if(e!==void 0){if(wo.default.valid(e))return(0,wo.default)(e).hex();var r=Number((0,la.processColor)(e));return wo.default.rgb(r>>16&255,r>>8&255,r&255,r>>24&255).hex()}}var wo,la,Qc,Is=p(()=>{"use strict";s();l();hr();wo=F(Qt());Wt();la=F(oe());eo();Qc=z("SemanticColor")});function It(e,{update:r=!0}){if(!O.isSafeMode()){var t=e?cn(e):null,o=Object.assign(le,{current:t,key:`bn-theme-${++ou}`,lastSetDiscordTheme:ru.theme.startsWith("bn-theme-")?le.lastSetDiscordTheme:ru.theme});t!=null&&(At.Theme[o.key.toUpperCase()]=o.key,tu.DIVIDER_COLORS[o.key]=tu.DIVIDER_COLORS[o.current.reference],Object.keys(At.Shadow).forEach(n=>At.Shadow[n][o.key]=At.Shadow[n][o.current.reference]),Object.keys(At.SemanticColor).forEach(n=>{At.SemanticColor[n][o.key]={...At.SemanticColor[n][o.current.reference]}})),r&&(eu.setShouldSyncAppearanceSettings(!1),eu.updateTheme(t!=null?o.key:o.lastSetDiscordTheme))}}var At,mp,eu,ru,tu,ou,le,ro=p(()=>{"use strict";s();l();Te();hr();Is();At=z("SemanticColor"),mp={...At.RawColor},eu=B("updateTheme"),ru=Xt("ThemeStore"),tu=B("DIVIDER_COLORS"),ou=1,le={current:null,key:`bn-theme-${ou}`,origRaw:mp,lastSetDiscordTheme:"darker"}});function ca(e,r=0){for(var t=3735928559^r,o=1103547991^r,n=0,a;n<e.length;n++)a=e.charCodeAt(n),t=Math.imul(t^a,2654435761),o=Math.imul(o^a,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(t^t>>>13,3266489909),[o>>>0,t>>>0]}function nu(e,r=0){var[t,o]=ca(e,r);return t.toString(36).padStart(7,"0")+o.toString(36).padStart(7,"0")}var Rs=p(()=>{"use strict";s();l()});function vr(e,r){return Kr(e,r,{walkable:["props","children","child","sibling"]})}var au=p(()=>{"use strict";s();l();Tr()});function Cs(e,r,t,o){if(!(o>t.maxDepth)&&e){try{if(r(e))return e}catch{}if(Array.isArray(e)){for(var n of e)if(!(typeof n!="object"||n===null))try{var a=Cs(n,r,t,o+1);if(a)return a}catch{}}else if(typeof e=="object"){for(var c of Object.keys(e))if(!(typeof e[c]!="object"||e[c]===null)&&!(t.walkable.length&&!t.walkable.includes(c))&&!t.ignore.includes(c))try{var u=Cs(e[c],r,t,o+1);if(u)return u}catch{}}}}function Kr(e,r,{walkable:t=[],ignore:o=[],maxDepth:n=100}={}){return Cs(e,r,{walkable:t,ignore:o,maxDepth:n},0)}var iu=p(()=>{"use strict";s();l()});function Ns(e,r,t){var o=e;if(r in e)return void t(o[r]);var n;return Object.defineProperty(o,r,{get:()=>n,set(a){n=t(a)??a},configurable:!0,enumerable:!1}),()=>{delete o[r],o[r]=n}}var su=p(()=>{"use strict";s();l()});function To(e,r){if(!e){var t=typeof r=="function"?r():r,o="[Invariant Violation]",n=t?`${o}: ${t}`:o;throw new Error(n)}}var lu=p(()=>{"use strict";s();l()});function or(e,r){return Os.apply(this,arguments)}function Os(){return Os=S(function*(e,r,t=1e4){var o=yield fetch(e,{signal:pp(t),...r});if(!o.ok)throw new Error(`Request returned non-ok: ${o.status} ${o.statusText}`);return o}),Os.apply(this,arguments)}function pp(e){var r=new AbortController;return setTimeout(()=>r.abort(`Timed out after ${e}ms`),e),r.signal}var ua=p(()=>{"use strict";s();l();be()});var fa={};H(fa,{cyrb64:()=>ca,findInReactTree:()=>vr,findInTree:()=>Kr,hookDefineProperty:()=>Ns,invariant:()=>To,lazy:()=>ns,safeFetch:()=>or});var Tr=p(()=>{"use strict";s();l();Rs();au();iu();su();lu();ua();Fe()});function Ps(){var e=[_e("default",hp,(r,t)=>(se([C.preferences]),!le.current||C.preferences.customBackground==="hidden"?t:i(uu.ImageBackground,{style:{flex:1,height:"100%"},source:le.current.background?.url&&{uri:le.current.background.url}||0,blurRadius:typeof le.current.background?.blur=="number"?le.current.background?.blur:0,children:t}))),_e("render",vp.prototype,(r,t)=>{if(!(!le.current||!le.current.background?.url)){var o=vr(t,a=>a&&"HACK_fixModalInteraction"in a.props&&a?.props?.style);if(o){var n=(0,cu.default)(o.props.style.backgroundColor||"black").alpha(1-(le.current.background?.opacity??1));o.props.style=[o.props.style,{backgroundColor:n}]}}})];return()=>e.forEach(r=>r())}var cu,uu,hp,vp,fu=p(()=>{"use strict";s();l();V();ro();tr();Me();Tr();Fe();hr();cu=F(Qt()),uu=F(oe());eo();hp=Ue("MessagesWrapperConnected",!1),{MessagesWrapper:vp}=ue(()=>z("MessagesWrapper"))});function Ds(){var e=([t])=>t===le.key?[le.current.reference]:void 0;Object.keys(Ao.RawColor).forEach(t=>{Object.defineProperty(Ao.RawColor,t,{configurable:!0,enumerable:!0,get:()=>{var o=le.current?.raw[t];return o||le.origRaw[t]}})});var r=[dt("isThemeDark",du,e),dt("isThemeLight",du,e),dt("updateTheme",yi,e),vo("resolveSemanticColor",Ao.default.meta??Ao.default.internal,(t,o)=>{if(!le.current)return o(...t);if(t[0]!==le.key)return o(...t);t[0]=le.current.reference;var[n,a]=mu(le.current.reference,t[1]),c=le.current.semantic[n];if(c?.value)return(0,Ls.default)(c.value).alpha(c.opacity).hex();var u=le.current.raw[a.raw];return u?a.opacity===1?u:(0,Ls.default)(u).alpha(a.opacity).hex():o(...t)}),()=>{Object.defineProperty(Ao,"RawColor",{configurable:!0,writable:!0,value:le.origRaw})}];return()=>r.forEach(t=>t())}function mu(e,r){var t=r[mu._sym??=Object.getOwnPropertySymbols(r)[0]],o=Ao.SemanticColor[t];return[t,o[e]]}var Ls,Ao,du,pu=p(()=>{"use strict";s();l();ro();er();tr();hr();ra();sn();Ls=F(Qt()),Ao=z("SemanticColor"),du=Lr(as("isThemeDark"))});function Ms(){var e=new Set(["ThemeStore","SelectivelySyncedUserSettingsStore"]),r=[_e("get",hu,([t],o)=>{if(!(!le.current||!e.has(t))){var n=Kr(o._state,a=>typeof a.theme=="string");n&&(n.theme=le.key)}}),dt("set",hu,([t,o])=>{if(e.has(t)){var n=JSON.stringify(o),a=le.lastSetDiscordTheme??"darker",c=n.replace(/"theme":"bn-theme-\d+"/,`"theme":${JSON.stringify(a)}`);return[t,JSON.parse(c)]}})];return()=>r.forEach(t=>t())}var hu,vu=p(()=>{"use strict";s();l();ro();tr();Tr();Fe();hr();hu=Oe(()=>{var e=z("impl");return typeof e?.impl=="object"?e.impl:z("storage")})});var Fs={};H(Fs,{LOADER_IDENTITY:()=>ve,getVendettaLoaderIdentity:()=>Bs});function Bs(){if(window.__vendetta_loader)return window.__vendetta_loader;var e={name:Dr.loaderName,features:{loaderConfig:ve.features.loaderConfig!=null,syscolors:ve.features.sysColors!=null?{prop:"__vendetta_syscolors"}:void 0,themes:ve.features.themes!=null?{prop:"__vendetta_theme"}:void 0}};return ve.features.sysColors!=null&&Object.defineProperty(globalThis,"__vendetta_syscolors",{get:()=>ve.features.sysColors?.palette,configurable:!0}),ve.features.themes!=null&&Object.defineProperty(globalThis,"__vendetta_theme",{get:()=>{try{var{default:r}=fm("@lib/addons/themes/colors/manager"),{selected:t}=r.preferences,o=r.getCurrentManifest();return t==null||o==null?null:{id:r.getId(o,r.infos[t].sourceUrl),data:r.convertToVd(o),selected:!0}}catch{return ve.features.themes?.stored}},configurable:!0}),Object.defineProperty(globalThis,"__vendetta_loader",{get:()=>e,configurable:!0}),e}var Dr,Rt,ve,to=p(()=>{"use strict";s();l();({__PYON_LOADER__:Dr,__vendetta_loader:Rt}=globalThis),ve=Dr?{type:"bunny",name:Dr.loaderName,version:Dr.loaderVersion,features:{loaderConfig:{path:"loader.json"},themes:Dr.hasThemeSupport?{stored:Dr.storedTheme,storePath:"current-theme.json"}:null,rdt:{version:window.__reactDevTools?.version,exports:window.__reactDevTools?.exports},sysColors:Dr.isSysColorsSupported?{palette:Dr.sysColors}:null,fonts:Dr.fontPatch?{version:Dr.fontPatch}:null}}:{type:"vendetta",name:Rt.name,version:"N/A",features:{loaderConfig:{path:"../vendetta_loader.json"},themes:Rt.features.themes!=null?{stored:window[Rt.features.themes.prop]||null,storePath:"../vendetta_theme.json"}:null,rdt:Rt.features.devtools!=null?{exports:window[Rt.features.devtools.prop]||null,version:Rt.features.devtools.version}:null,sysColors:Rt.features.syscolors?{palette:window[Rt.features.syscolors.prop]||null}:null,fonts:null}}});var un=Cr((Sb,gu)=>{s();l();gu.exports=Tt().lodash});var yu,_u,C,oo=p(()=>{"use strict";s();l();be();Te();lt();to();Me();Tr();ua();yu=F(Qt()),_u=F(un());eo();Is();ro();C={preferences:he("themes/colors/preferences.json",{dflt:{selected:null,per:{},customBackground:null}}),infos:he("themes/colors/info.json"),prepare(){return S(function*(){yield wr(this.preferences,this.infos),yield this.migrate("VENDETTA_THEMES"),yield f(this.getAllIds().map(e=>vt(`themes/colors/data/${e}.json`))),O.isSafeMode()||(this.preferences.selected?fn(this.getCurrentManifest()):fn(null)),ve.type==="bunny"&&(yield ur("../vendetta_theme.json"))&&(yield Ke("../vendetta_theme.json","null"))}).apply(this)},initialize(){return S(function*(){this.updateAll()}).apply(this)},migrate(e){return S(function*(){var r=this;return Pr(e,function(){var t=S(function*(o){for(var[n,a]of Object.entries(o)){var c=r.sanitizeId(n);yield xr(`themes/colors/data/${c}.json`,a.data),a.selected&&(r.preferences.selected=c),r.preferences.per[c]??={autoUpdate:!0},r.infos[c]??={timeInstalled:null,sourceUrl:n}}});return function(o){return t.apply(this,arguments)}}())}).apply(this)},useColors(){se([this.preferences,this.infos])},sanitizeId(e){return e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-")},convertToVd(e){var r={};if(e.spec===2&&e.semanticColors)for(var t in e.semanticColors)r[t]&&=r[t].map(c=>sa(c||void 0)).map(c=>c||!1);else if(e.spec===3){var o=function(c){var u=b=>(0,yu.default)(b).alpha(n.semantic[c].opacity).hex(),d=u(n.semantic[c].value);r[c]=e.type==="dark"?[d]:[!1,d]},n=cn(e);for(var a in n.semantic)o(a)}return{spec:2,name:e.spec===3?e.display.name:e.name,description:e.spec===3?e.display.description:e.description,authors:e.spec===3?e.display.authors:e.authors,semanticColors:r,rawColors:e.spec===3?e.raw:As(e.rawColors),background:e.spec===2?e.background:e.background?{...(0,_u.omit)(e.background,["opacity"]),alpha:e.background.opacity}:void 0,...e.spec===3&&e.extras}},checkColor(e){return To(e.spec===2||e.spec===3,"Invalid theme spec"),e.spec===2?this.convertToVd(e):(cn(e),e)},getAllIds(){return Object.keys(this.infos)},getId(e,r){return this.sanitizeId("id"in e?e.id:r)},getCurrentManifest(){return this.preferences.selected?this.getManifest(this.preferences.selected):null},getManifest(e){if(e=this.sanitizeId(e),!this.infos[e])throw new Error(`${e} is not installed`);return he(`themes/colors/data/${e}.json`)},getDisplayInfo(e){e=this.sanitizeId(e);var r=he(`themes/colors/data/${e}.json`,{nullIfEmpty:!0});if(!r)throw new Error(`Theme manifest of '${e}' was not stored`);return r.spec===3?{id:e,...r.display}:{id:e,name:r.name,description:r.description,authors:r.authors}},writeForNative(e){return S(function*(){e=e&&this.convertToVd(e),e?yield Ke("current-theme.json",JSON.stringify({id:"native",data:e,selected:!0})):yield Ke("current-theme.json","null")}).apply(this)},fetch(e){return S(function*(){var r;try{r=yield(yield or(e,{cache:"no-store"})).json(),r=this.checkColor(r)}catch{throw new Error(`Failed to fetch theme at ${e}`)}var t=this.getId(r,e);return yield xr(`themes/colors/data/${t}.json`,r),r}).apply(this)},refresh(e){return S(function*(){e=this.sanitizeId(e);var{sourceUrl:r}=this.infos[e];yield this.fetch(r),this.preferences.selected===e&&It(this.getCurrentManifest(),{update:!0})}).apply(this)},select(e){return S(function*(){if(e&&=this.sanitizeId(e),To(e?this.infos[e]:!0,"Tried to select non-existent theme"),this.preferences.selected!==e)if(this.preferences.selected=e,e){var r=yield qt(`themes/colors/data/${e}.json`,{nullIfEmpty:!0});r??=yield this.fetch(this.infos[e].sourceUrl),It(r,{update:!0}),yield this.writeForNative(r)}else It(null,{update:!0}),yield this.writeForNative(null)}).apply(this)},install(e){return S(function*(){if(this.getAllIds().some(o=>this.infos[o].sourceUrl===e))throw new Error("Theme is already installed");var r=yield this.fetch(e),t=this.getId(r,e);this.preferences.per[t]={autoUpdate:!0},this.infos[t]={sourceUrl:e,timeInstalled:new Date().toISOString()}}).apply(this)},uninstall(e){return S(function*(){e=this.sanitizeId(e),this.preferences.selected===e&&(yield this.select(null)),delete this.infos[e],delete this.preferences.per[e],yield Gr(`themes/colors/data/${e}.json`)}).apply(this)},updateAll(){return S(function*(){var e=r=>this.fetch(this.infos[r].sourceUrl);yield f(this.getAllIds().map(e))}).apply(this)}}});var Us={};H(Us,{ColorManager:()=>C,default:()=>fn});function fn(e){var r=[Ms(),Ds(),Ps()];return e&&It(e,{update:!1}),()=>r.forEach(t=>t())}var eo=p(()=>{"use strict";s();l();fu();pu();vu();ro();oo()});function da(){return js.apply(this,arguments)}function js(){return js=S(function*({to:e=!O.general.safeModeEnabled,reload:r=!0}={}){var t=O.general.safeModeEnabled=e,o=C.getCurrentManifest();yield C.writeForNative(t?null:o),r&&setTimeout(()=>$r.reload(),500)}),js.apply(this,arguments)}var ks=p(()=>{"use strict";s();l();be();Te();eo();er()});function ma(e){return"componentStack"in e&&typeof e.componentStack=="string"}function pa(e){return!!e.stack}var Hs=p(()=>{"use strict";s();l()});var va={};H(va,{getDebugInfo:()=>gr});function gr(){var e=window.HermesInternal.getRuntimeProperties(),r=e["OSS Release Version"],t="for RN ",o=ha.Platform.constants,n=o.reactNativeVersion;return{vendetta:{version:"2b93038-dev".split("-")[0],loader:ve.name},bunny:{version:"2b93038-dev",loader:{name:ve.name,version:ve.version}},discord:{version:$t.Version,build:$t.Build},react:{version:React.version,nativeVersion:r.startsWith(t)?r.substring(t.length):`${n.major}.${n.minor}.${n.patch}`},hermes:{version:r,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...ha.Platform.select({android:{os:{name:"Android",version:o.Release,sdk:o.Version}},ios:{os:{name:o.systemName,version:o.osVersion}}}),...ha.Platform.select({android:{device:{manufacturer:o.Manufacturer,brand:o.Brand,model:o.Model,codename:Gt.device}},ios:{device:{manufacturer:Gt.deviceManufacturer,brand:Gt.deviceBrand,model:Gt.deviceModel,codename:Gt.device}}})}}var ha,no=p(()=>{"use strict";s();l();er();ha=F(oe());to()});var Ys={};H(Ys,{TextStyleSheet:()=>dn,ThemeContext:()=>zs,createLegacyClassComponentStyles:()=>Vs,createStyles:()=>nr,isSemanticColor:()=>$s,resolveSemanticColor:()=>Gs});function $s(e){return Su.isSemanticColor(e)}function Gs(e,r=gp.theme){return Su.resolveSemanticColor(r,e)}function nr(e){return Oe(()=>bu.createStyles(e))}function Vs(e){return Oe(()=>bu.createLegacyClassComponentStyles(e))}var bu,zs,dn,gp,Su,Ar=p(()=>{"use strict";s();l();Fe();Y();Ee();bu=B("createStyles"),{ThemeContext:zs}=ue(()=>z("ThemeContext"),{hint:"object"}),{TextStyleSheet:dn}=ue(()=>z("TextStyleSheet")),gp=Xt("ThemeStore"),Su=J.meta??=J.internal});function Ve({selectable:e,style:r,backgroundStyle:t,children:o}){var n=Ws();return e?i(qr.ScrollView,{style:[t,n.background],children:qr.Platform.select({ios:i(yp,{style:r,children:o}),default:i(Eu,{style:r,children:o,selectable:!0})})}):i(qr.ScrollView,{style:[t,n.background],children:i(Eu,{style:r,children:o})})}var qr,Ws,yp,Eu,xu=p(()=>{"use strict";s();l();V();Y();Ar();qr=F(oe()),Ws=nr({background:{backgroundColor:J.colors.BACKGROUND_SECONDARY,borderWidth:1,borderRadius:12,borderColor:J.colors.BACKGROUND_TERTIARY,padding:10},codeBlock:{fontFamily:Et.Fonts.CODE_NORMAL,fontSize:12,textAlignVertical:"center",color:J.colors.TEXT_NORMAL}}),yp=({style:e,children:r})=>i(qr.TextInput,{editable:!1,multiline:!0,style:[Ws().codeBlock,e&&e],value:r}),Eu=({selectable:e,style:r,children:t})=>i(qr.Text,{selectable:e,style:[Ws().codeBlock,r&&r],children:t})});function _p(e,...r){Array.isArray(e)&&"raw"in e&&console.error(String.raw(e,...r)),console.error(e,...r)}var Ye,Ct=p(()=>{"use strict";s();l();Ye={...console,error:_p}});var Tu,wu=p(()=>{Tu={ABOUT:"About",ACTIONS:"Actions",ARE_YOU_SURE_TO_CLEAR_DATA:"Are you sure you wish to clear the data of {name}?",ARE_YOU_SURE_TO_DELETE_PLUGIN:"Are you sure you wish to delete {name}? This will clear all of the plugin's data.",ARE_YOU_SURE_TO_DELETE_THEME:"Are you sure you wish to delete {name}?",ASSET_BROWSER:"Asset Browser",BRAND:"Brand",BUNNY:"Bunny",BUNNY_URL:"Bunny URL",BYTECODE:"Bytecode",CANCEL:"Cancel",CLEAR:"Clear",CLEAR_DATA:"Clear data",CLEAR_DATA_FAILED:"Failed to clear data for {name}!",CLEAR_DATA_SUCCESSFUL:"Cleared data for {name}.",CODENAME:"Codename",COMMAND_DEBUG_DESC:"Send Bunny debug info.",COMMAND_DEBUG_OPT_EPHEMERALLY:"Send debug info ephemerally.",COMMAND_EVAL_DESC:"Evaluate JavaScript code.",COMMAND_EVAL_OPT_ASYNC:"Whether to support 'await' in code. Must explicitly return for result (default: false)",COMMAND_EVAL_OPT_CODE:"The code to evaluate.",COMMAND_PLUGINS_DESC:"Send list of installed plugins.",COMMAND_PLUGINS_OPT_EPHEMERALLY:"Send plugins list ephemerally.",COMPONENT:"Component",CONFIRMATION_LINK_IS_A_TYPE:"This link is a **{urlType, select, plugin {Plugin} theme {Theme} other {Add-on}}**, would you like to install it?",CONNECT_TO_DEBUG_WEBSOCKET:"Connect to debug websocket",CONNECT_TO_REACT_DEVTOOLS:"Connect to React DevTools",CONTINUE:"Continue",COPIED_TO_CLIPBOARD:"Copied to clipboard",COPY_URL:"Copy URL",DEBUG:"Debug",DEBUGGER_URL:"Debugger URL",DELETE:"Delete",DESC_EXTRACT_FONTS_FROM_THEME:'Looks out for "fonts" field in your currently applied theme and install it.',DEVELOPER:"Developer",DEVELOPER_SETTINGS:"Developer Settings",DISABLE_THEME:"Disable Theme",DISABLE_UPDATES:"Disable updates",DISCORD_SERVER:"Discord Server",DONE:"Done",ENABLE_EVAL_COMMAND:"Enable /eval command",ENABLE_EVAL_COMMAND_DESC:"Evaluate JavaScript directly from command. Be cautious when using this command as it may pose a security risk. Make sure to know what you are doing.",ENABLE_UPDATES:"Enable updates",ERROR_BOUNDARY_TOOLS_LABEL:"ErrorBoundary Tools",EXTRACT:"Extract",FONT_NAME:"Font Name",FONTS:"Fonts",GENERAL:"General",GITHUB:"GitHub",HOLD_UP:"Hold Up",INFO:"Info",INSTALL:"Install",INSTALL_ADDON:"Install an add-on",INSTALL_FONT:"Install a font",INSTALL_PLUGIN:"Install a plugin",INSTALL_REACT_DEVTOOLS:"Install React DevTools",INSTALL_THEME:"Install Theme",LABEL_EXTRACT_FONTS_FROM_THEME:"Extract font from theme",LINKS:"Links",LOAD_FROM_CUSTOM_URL:"Load from custom URL",LOAD_FROM_CUSTOM_URL_DEC:"Load Bunny from a custom endpoint.",LOAD_REACT_DEVTOOLS:"Load React DevTools",LOADER:"Loader",MACHINE_ID:"Machine ID",MANUFACTURER:"Manufacturer",MESSAGE:"Message",MISCELLANEOUS:"Miscellaneous",MODAL_THEME_REFETCHED:"Theme refetched",MODAL_THEME_REFETCHED_DESC:"A reload is required to see the changes. Do you want to reload now?",MODAL_UNPROXIED_PLUGIN_DESC:"The plugin you are trying to install has not been proxied/verified by staffs. Are you sure you want to continue?",MODAL_UNPROXIED_PLUGIN_HEADER:"Unproxied Plugin",MODEL:"Model",OPEN_IN_BROWSER:"Open in Browser",OPERATING_SYSTEM:"Operating System",OVERFLOW_PLUGIN_SETTINGS:"Plugin settings",PLATFORM:"Platform",PLUGIN_REFETCH_FAILED:"Failed to refetch plugin!",PLUGIN_REFETCH_SUCCESSFUL:"Successfully refetched plugin!",PLUGINS:"Plugins",REFETCH:"Refetch",RELOAD:"Reload",RELOAD_DISCORD:"Reload Discord",RELOAD_IN_NORMAL_MODE:"Reload in Normal Mode",RELOAD_IN_NORMAL_MODE_DESC:"This will reload Discord normally",RELOAD_IN_SAFE_MODE:"Reload in Safe Mode",RELOAD_IN_SAFE_MODE_DESC:"This will reload Discord without loading addons",REMOVE:"Remove",RESTART_REQUIRED_TO_TAKE_EFFECT:"Restart is required to take effect",RETRY:"Retry",RETRY_RENDER:"Retry Render",SAFE_MODE:"Safe Mode",SAFE_MODE_NOTICE_FONTS:"You are in Safe Mode, meaning fonts have been temporarily disabled. {enabled, select, true {If a font appears to be causing the issue, you can press below to disable it persistently.} other {}}",SAFE_MODE_NOTICE_PLUGINS:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",SAFE_MODE_NOTICE_THEMES:"You are in Safe Mode, meaning themes have been temporarily disabled. {enabled, select, true {If a theme appears to be causing the issue, you can press below to disable it persistently.} other {}}",SEARCH:"Search",SEPARATOR:", ",SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS:"Activate Discord Experiments",SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS_DESC:"Warning: Messing with this feature may lead to account termination. We are not responsible for what you do with this feature.",STACK_TRACE:"Stack Trace",SUCCESSFULLY_INSTALLED:"Successfully installed",THEME_EXTRACTOR_DESC:"This pack overrides the following: {fonts}",THEME_REFETCH_FAILED:"Failed to refetch theme!",THEME_REFETCH_SUCCESSFUL:"Successfully refetched theme.",THEMES:"Themes",THEMES_RELOAD_FOR_CHANGES:"Reload the app to fully apply changes!",TOASTS_INSTALLED_PLUGIN:"Installed plugin",TOASTS_PLUGIN_UPDATE:"{update, select, true {Enabled} other {Disabled}} updates for {name}.",UH_OH:"Uh oh.",UNINSTALL:"Uninstall",UNINSTALL_TITLE:"Uninstall {title}",URL_PLACEHOLDER:"https://example.com",VERSION:"Version",VERSIONS:"Versions"}});function Ru(){var e=({locale:r})=>{var t={"es-ES":"es","es-419":"es_419","zh-TW":"zh-Hant","zh-CN":"zh-Hans","pt-PT":"pt","pt-BR":"pt_BR","sv-SE":"sv"},o=Au=t[r]??r;if(o.startsWith("en-")){Io=null;return}Iu.has(o)?Io=o:(Iu.add(o),fetch(`https://raw.githubusercontent.com/pyoncord/i18n/main/resources/${o}/bunny.json`).then(n=>n.json()).then(n=>Ks[o]=n).then(()=>o===Au&&(Io=o)).catch(n=>Ye.error`An error occured while fetching strings for ${o}: ${n}`))};return wt.subscribe("I18N_LOAD_SUCCESS",e),()=>wt.unsubscribe("I18N_LOAD_SUCCESS",e)}function Ir(e,r){var t=g[e];return new Sp(t).format(r)}var Sp,Io,Au,Iu,Ks,g,Ae=p(()=>{"use strict";s();l();Ct();Y();Ee();wu();Sp=Ue("MessageFormat"),Io=null,Au=null,Iu=new Set,Ks={},g=new Proxy({},{get:(e,r)=>Io&&Ks[Io]?.[r]?Ks[Io]?.[r]:Tu[r]})});function Xr(e,r,t){"then"in r||(r=Promise.resolve({default:r})),Cu.openLazy(r,e,t??{})}function ao(e){Cu.hideActionSheet(e)}var Cu,Ro=p(()=>{"use strict";s();l();Ee();Cu=B("openLazy","hideActionSheet")});var Ep,yr,me,ga,Nu,ya,_a,DS,G,ba,je,MS,BS,L,Co,FS,xe,mn,Nt,Jr,Ou,Sa,US,jS,Pu,Lu,kS,fe,HS,io,Zr,Ea,Du,pe,Mu,Le,Bu,zS,$S,GS,VS,Fu,Ot,xa,xp,A,qs,YS,WS,KS,qS,XS,JS,ZS,QS,Uu,eE,ju,ku,rE,tE,oE,nE,Qr,Xs,aE,iE,sE,lE,cE,uE,Hu,fE,wa,ne=p(()=>{"use strict";s();l();Fe();Zn();an();Ee();Ep=mr(([e],r)=>r[e]&&Object.keys(r).length===1,e=>`bunny.metro.common.components.bySingularProp(${e})`),yr=e=>Oe(()=>Ge(Ep(e))?.[e]),me=(...e)=>Oe(()=>z(...e)[e[0]]),ga=ms("FluxContainer(Alert)"),Nu=B("Looks","Colors","Sizes"),ya=Ue("HelpMessage"),_a=Oe(()=>z("useSafeAreaInsets").SafeAreaView),DS=me("ActionSheetRow"),G=yr("Button"),ba=me("TwinButtons"),je=yr("IconButton"),MS=me("RowButton"),BS=me("PressableScale"),L=me("TableRow"),Co=me("TableRowIcon"),FS=me("TableRowTrailingText"),xe=me("TableRowGroup"),mn=me("TableRadioGroup"),Nt=me("TableRadioRow"),Jr=me("TableSwitchRow"),Ou=me("TableCheckboxRow"),Sa=yr("FormSwitch"),US=yr("FormRadio"),jS=yr("FormCheckbox"),Pu=yr("FormSwitch"),Lu=yr("FormRadio"),kS=yr("FormCheckbox"),fe=me("Card"),HS=Oe(()=>z("RedesignCompat").RedesignCompat),io=me("AlertModal"),Zr=me("AlertActionButton"),Ea=me("AlertActions"),Du=yr("AvatarPile"),pe=me("Stack"),Mu=me("default","AvatarSizes","getStatusSize"),Le=yr("TextInput"),Bu=yr("TextArea"),zS=me("SegmentedControl"),$S=me("SegmentedControlPages"),GS=yr("useSegmentedControlState"),VS=me("CompatSegmentedControl"),Fu=me("FloatingActionButton"),Ot=me("ActionSheet"),xa=me("BottomSheetTitleHeader"),xp=B("Text","LegacyText"),A=Oe(()=>xp.Text),qs=B("Form","FormSection"),{Form:YS,FormArrow:WS,FormCTA:KS,FormCTAButton:qS,FormCardSection:XS,FormCheckbox:JS,FormCheckboxRow:ZS,FormCheckmark:QS,FormDivider:Uu,FormHint:eE,FormIcon:ju,FormInput:ku,FormLabel:rE,FormRadio:tE,FormRadioGroup:oE,FormRadioRow:nE,FormRow:Qr,FormSection:Xs,FormSelect:aE,FormSliderRow:iE,FormSubLabel:sE,FormSwitch:lE,FormSwitchRow:cE,FormTernaryCheckBox:uE,FormText:Hu,FormTitle:fE}=ue(()=>qs),wa=me("FlashList")});function zu(e){return e.split(/[\s|\n]+?in /).filter(Boolean)}var $u=p(()=>{"use strict";s();l()});var Ta={};H(Ta,{filterAssets:()=>Tp,findAsset:()=>No,findAssetId:()=>y,iterateAssets:()=>Pt});function*Pt(){var{flagsIndex:e}=Wr(),r=new Set;for(var t in e)if(e[t]&Sr.ASSET){var o=dr(Number(t));if(typeof o!="number"||r.has(o))continue;yield Gu(o),r.add(o)}}function Gu(e){var r=go.getAssetByID(e);return r&&Object.assign(r,{id:e})}function No(e){if(typeof e=="number")return Gu(e);if(typeof e=="string"&&Js[e])return Js[e];for(var r of Pt()){if(typeof e=="string"&&r.name===e)return Js[e]=r,r;if(typeof e=="function"&&e(r))return r}}function Tp(e){var r=[];for(var t of Pt())(typeof e=="string"?t.name===e:e(t))&&r.push(t);return r}function y(e){return No(e)?.id}var Js,ge=p(()=>{"use strict";s();l();pt();zn();mt();Ci();Js={}});var _r=Cr((xE,Vu)=>{s();l();Vu.exports=Tt().react});function pn(e){var[r,t]=(0,Yu.useState)(!0),o;try{o=zu(e.componentStack),o=r?o.slice(0,4):o}catch{return}return i(fe,{children:_(so.View,{style:{gap:8},children:[i(A,{variant:"heading-lg/bold",children:"Component Stack"}),i(so.View,{style:{gap:4},children:o.map(n=>_(so.View,{style:{flexDirection:"row"},children:[i(A,{variant:"text-md/bold",color:"text-muted",children:"<"}),i(A,{variant:"text-md/bold",children:n}),i(A,{variant:"text-md/bold",color:"text-muted",children:"/>"})]}))}),r&&i(A,{children:"..."}),_(so.View,{style:{gap:8,flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[i(G,{variant:"secondary",text:`Show ${r?"more":"less"}`,icon:r?y("down_arrow"):i(so.Image,{style:{transform:[{rotate:`${r?0:180}deg`}]},source:y("down_arrow")}),onPress:()=>t(n=>!n)}),i(G,{variant:"secondary",text:"Copy",icon:y("CopyIcon"),onPress:()=>Pe.setString(e.componentStack)})]})]})})}var Yu,so,Zs=p(()=>{"use strict";s();l();V();$u();ge();Y();ne();Yu=F(_r()),so=F(oe())});function Cp(e){return e==="InternalBytecode.js"}function Np(e){var r=e.match(Ap);if(r)return{type:"FRAME",functionName:r[1],location:r[2]==="native"?{type:"NATIVE"}:r[3]==="address at "?Cp(r[4])?{type:"INTERNAL_BYTECODE",sourceUrl:r[4],line1Based:Number.parseInt(r[5],10),virtualOffset0Based:Number.parseInt(r[6],10)}:{type:"BYTECODE",sourceUrl:r[4],line1Based:Number.parseInt(r[5],10),virtualOffset0Based:Number.parseInt(r[6],10)}:{type:"SOURCE",sourceUrl:r[4],line1Based:Number.parseInt(r[5],10),column1Based:Number.parseInt(r[6],10)}};var t=e.match(Ip);if(t)return{type:"SKIPPED",count:Number.parseInt(t[1],10)}}function Op(e){for(var r=e.split(/\n/),t=[],o=-1,n=0;n<r.length;++n){var a=r[n];if(a){var c=Np(a);if(c){t.push(c);continue}Rp.test(a)||(o=n,t=[])}}var u=r.slice(0,o+1).join(`
`);return{message:u,entries:t}}function Pp(e){var r=[];for(var t of e.entries)if(t.type==="FRAME"){var{location:o,functionName:n}=t;o.type==="NATIVE"||o.type==="INTERNAL_BYTECODE"||r.push({methodName:n,file:o.sourceUrl,lineNumber:o.line1Based,column:o.type==="SOURCE"?o.column1Based-1:o.virtualOffset0Based})}return r}function Qs(e){if(e==null)return[];var r=Array.isArray(e)?e:Pp(Op(e));return r}var Ap,Ip,Rp,Wu=p(()=>{"use strict";s();l();Ap=/^ {4}at (.+?)(?: \((native)\)?| \((address at )?(.*?):(\d+):(\d+)\))$/,Ip=/^ {4}... skipping (\d+) frames$/,Rp=/^ {4}at .*$/});function hn(e){var[r,t]=(0,el.useState)(!0),o;try{var n=Qs(e.error.stack);o=r?n.slice(0,4):n}catch{return null}return i(fe,{children:_(Lt.View,{style:{gap:12},children:[i(A,{variant:"heading-lg/bold",children:"Call Stack"}),i(Lt.View,{style:{gap:4},children:o.map((a,c)=>i(Lp,{id:c,frame:a}))}),r&&i(A,{children:"..."}),_(Lt.View,{style:{gap:8,flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[i(G,{variant:"secondary",text:`Show ${r?"more":"less"}`,icon:r?y("down_arrow"):i(Lt.Image,{style:{transform:[{rotate:`${r?0:180}deg`}]},source:y("down_arrow")}),onPress:()=>t(a=>!a)}),i(G,{variant:"secondary",text:"Copy",icon:y("CopyIcon"),onPress:()=>Pe.setString(e.error.stack)})]})]})})}function Lp(e){var[r,t]=(0,el.useState)(!0);return _(Lt.Pressable,{onPress:()=>t(o=>!o),children:[i(A,{style:{fontFamily:Et.Fonts.CODE_BOLD},children:e.frame.methodName}),i(A,{style:{fontFamily:Et.Fonts.CODE_NORMAL},ellipsizeMode:"middle",numberOfLines:r?1:void 0,children:_(A,{color:"text-muted",children:[e.frame.file===Ku?"jsbundle":e.frame.file,":",e.frame.lineNumber,":",e.frame.column]})})]},e.id)}var el,Lt,rl=p(()=>{"use strict";s();l();V();Wu();ge();Y();ne();el=F(_r()),Lt=F(oe());Aa()});function tl(e){return i(Ot,{children:_(qu.View,{style:{gap:12,paddingVertical:12},children:[i(A,{variant:"heading-lg/extrabold",children:"Error"}),i(Ve,{selectable:!0,children:e.error.message}),pa(e.error)&&i(hn,{error:e.error}),ma(e.error)?i(pn,{componentStack:e.error.componentStack}):null]})})}var qu,Xu=p(()=>{"use strict";s();l();V();Hs();ar();ne();qu=F(oe());Zs();rl()});function vn(e){return i(fe,{children:_(pe,{children:[e.header&&typeof e.header!="string"?e.header:i(A,{variant:"heading-lg/bold",children:e.header??g.UH_OH}),i(Ve,{selectable:!0,children:String(e.error)}),_(ba,{children:[e.onRetryRender&&i(G,{variant:"destructive",text:g.RETRY_RENDER,onPress:e.onRetryRender}),e.error instanceof Error?i(G,{text:"Details",onPress:()=>Xr("BunnyErrorDetailsActionSheet",tl,{error:e.error})}):null]})]})})}var Ku,Aa=p(()=>{"use strict";s();l();V();Ae();ar();Ro();ne();Xu();Ku=window.HermesInternal.getFunctionLocation(window.__r).fileName});var Dp,Mp,we,ol=p(()=>{"use strict";s();l();Vo();Xo();Pi();Fn();kn();V();Aa();Y();Ar();Dp=Vs({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),we=function(e){"use strict";ut(t,e);var r=ft(t);function t(o){rr(this,t);var n;return n=r.call(this,o),n.state={hasErr:!1},n}return Er(t,[{key:"render",value:function(){var n=Dp(this.context);return this.state.hasErr?i(vn,{error:this.state.error,onRetryRender:()=>this.setState({hasErr:!1})}):this.props.children}}]),t}(Mp=ln.Component);Jo(we,"contextType",zs);Jo(we,"getDerivedStateFromError",e=>({hasErr:!0,error:e}))});function Bp(){return i(Ia.Image,{style:{width:16,height:16},source:y("search")})}var Ia,Dt,Ju=p(()=>{"use strict";s();l();V();Ae();ge();ne();ol();Ia=F(oe());Dt=({onChangeText:e,placeholder:r,style:t,isRound:o})=>{var[n,a]=React.useState(""),c=u=>{a(u),e?.(u)};return i(we,{children:i(Ia.View,{style:t,children:i(Le,{grow:!0,isClearable:!0,leadingIcon:Bp,placeholder:r??g.SEARCH,onChange:c,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,isRound:o,value:n})})})}});function yn({label:e,icon:r,noPadding:t=!1,noAnimation:o=!1,children:n}){var[a,c]=React.useState(!0);return _(St,{children:[i(L,{label:e,icon:r&&i(L.Icon,{source:y(r)}),trailing:i(Qr.Arrow,{style:{transform:[{rotate:`${a?180:90}deg`}]}}),onPress:()=>{c(!a),o||gn.LayoutAnimation.configureNext(gn.LayoutAnimation.Presets.easeInEaseOut)}}),!a&&i(St,{children:i(gn.View,{style:!t&&{paddingHorizontal:15},children:n})})]})}var gn,Zu=p(()=>{"use strict";s();l();V();ge();ne();gn=F(oe())});var Ra={};H(Ra,{Codeblock:()=>Ve,ErrorBoundary:()=>we,Search:()=>Dt,Summary:()=>yn});var ar=p(()=>{"use strict";s();l();xu();ol();Ju();Zu()});function nl(e){var r=Fp(),t=gr();return i(we,{children:_(_a,{style:r.container,children:[_(Ca.View,{style:{gap:4},children:[i(A,{variant:"display-lg",children:"Uh oh."}),i(A,{variant:"text-md/normal",children:"A crash occured while rendering a component. This could be caused by a plugin, Bunny or Discord itself."}),_(A,{variant:"text-sm/normal",color:"text-muted",children:[t.os.name,"; ",t.discord.build," (",t.discord.version,"); ",t.bunny.version]})]}),_(Ca.ScrollView,{fadingEdgeLength:64,contentContainerStyle:{gap:12},children:[i(Ve,{selectable:!0,children:e.error.message}),pa(e.error)&&i(hn,{error:e.error}),ma(e.error)?i(pn,{componentStack:e.error.componentStack}):null]}),_(fe,{style:{gap:6},children:[i(G,{text:"Reload Discord",onPress:()=>$r.reload()}),!O.isSafeMode()&&i(G,{text:"Reload in Safe Mode",onPress:()=>da()}),i(G,{variant:"destructive",text:"Retry Render",onPress:()=>e.rerender()})]})]})})}var Ca,Fp,Qu=p(()=>{"use strict";s();l();V();ks();Te();Hs();no();er();ar();Ar();Y();ne();Ca=F(oe());Zs();rl();Fp=nr({container:{flex:1,backgroundColor:J.colors.BACKGROUND_PRIMARY,paddingHorizontal:16,height:"100%",padding:8,gap:12}})});function Up(){var e=Ue("ErrorBoundary")[ta];return new Promise(r=>e.getExports(t=>r(t.prototype)))}function al(){return _e.await("render",Up(),function(){if(this.state.error)return i(nl,{error:this.state.error,rerender:()=>this.setState({info:null,error:null})})})}var ef=p(()=>{"use strict";s();l();V();Qu();tr();sn();Ee()});var Na={};H(Na,{showToast:()=>ae});function ae(e,r){typeof e=="string"?xo.open({key:`bn-toast-${rf()}`,content:e,source:r,icon:r}):(e.key??=`bn-toast-${rf()}`,xo.open({...e,source:e.icon}))}var rf,et=p(()=>{"use strict";s();l();Ae();ge();Fe();Y();Ee();({uuid4:rf}=ue(()=>z("uuid4")));ae.showCopyToClipboard=(e=g.COPIED_TO_CLIPBOARD)=>{ae({content:e,icon:y("CopyIcon")})}});function Oa(e){if(Rr!==void 0&&Rr.readyState!==WebSocket.CLOSED&&Rr.close(),!e){ae("Invalid debugger URL!",y("Small"));return}Rr=new WebSocket(`ws://${e}`),Rr.addEventListener("open",()=>ae("Connected to debugger.",y("Check"))),Rr.addEventListener("message",r=>{try{(0,eval)(r.data)}catch(t){Ye.error(t)}}),Rr.addEventListener("error",r=>{Ye.log(`Debugger error: ${r.message}`),ae("An error occurred with the debugger connection!",y("Small"))})}function tf(){var e=_e("nativeLoggingHook",globalThis,r=>{Rr?.readyState===WebSocket.OPEN&&Rr.send(JSON.stringify({message:r[0],level:r[1]}))});return()=>{Rr&&Rr.close(),e()}}var Rr,Pa=p(()=>{"use strict";s();l();Ct();ge();tr();et()});var Se,Mt,La=p(()=>{"use strict";s();l();(function(e){e.FETCHING="FETCHING",e.FETCHED="FETCHED",e.PARSING="PARSING",e.PARSED="PARSED",e.INSTANTIATING="INSTANTIATING",e.INSTANTIATED="INSTANTIATED",e.STARTING="STARTING",e.RUNNING="RUNNING",e.STOPPING="STOPPING",e.STOPPED="STOPPED"})(Se||(Se={}));(function(e){e.REQUESTED="REQUESTED",e.ERROR="ERROR"})(Mt||(Mt={}))});function il(e,r=[]){var t=e instanceof Error?{name:e.name,stack:e.stack,message:e.message,cause:e.cause?String(e.cause):void 0}:String(e);return typeof t=="object"&&e instanceof Error&&e.cause instanceof Error&&!r.includes(e)&&(t.cause=il(e.cause,[...r,e])),t}function sl(e){var r=(e.name?window[e.name]:null)??Error,t=new r;for(var{property:o,enumerable:n}of jp)o in e&&Object.defineProperty(t,o,{value:e[o],enumerable:n,configurable:!0,writable:!0});var{cause:a}=e;return a&&typeof a!="string"&&(t.cause=sl(a)),t}var jp,of=p(()=>{"use strict";s();l();jp=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"cause",enumerable:!1}]});var $,rt=p(()=>{"use strict";s();l();en();Me();La();of();$={stages:ze.from({}),errors:he("plugins/reporter/last-errors.json"),disableReason:he("plugins/reporter/disable-reason.json"),useReporter(){se([this.stages,this.disableReason,this.errors])},prepare(){return wr(this.disableReason,this.errors)},hasErrors(){return!!Object.keys(this.errors).length},getError(e){var r=this.errors[e];return typeof r=="string"?r:sl(r)},updateStage(e,r){this.stages[e]=r,r===Se.RUNNING&&this.errors[e]&&delete this.errors[e]},reportPluginError(e,r){this.errors[e]=il(r)},reportPluginDisable(e,r){this.disableReason[e]=r},clearPluginReports(e,r=!1){delete this.disableReason[e],delete this.errors[e],r&&delete this.stages[e]}}});var Da,nf=p(()=>{Da="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABoBJREFUeF7lW1nIVlUUXasom80kijJKaVQzGtTUjCJteNBmeqigssnIpDIqwmw0GqhQi4iw8SEaHtKgMpNKM7SiyUZpLppoTi0rd2f9nCu36/2+79zxv/5t8MV/n333WWefffb0EQ0iM+sH4AEAowG8CGAqycVVqsgqhWeVbWavAtg/tu4vABNIPphVVih/YwAws2EAlrRQfChJgVM6NQmARwGc0GKHX5PcofTdA2gSAJ8A2KXNJueQPLpsEJoEwI8A+rTZ4GrnIAeQ/KpMEJoEwCoAm3TY3DKSezcKADPbCMDWADYEIK/9B4CVJC2LomYWwv8PgC1JCqxSqJAFmNlOAF6PAfA3ACn3MYBLSD4bqmUgABI3l+T4ULmd+IoCcDeAs9p8RI5NPDNJrminTAYAZAVbkJSlFaaiALwJYEiAFh8CuJHk7Fa8ZqaNbRAgSyzjSc4N5G3LVhQAmfiYDIosBXAGyXeSa8xMJ9orUNb7AAZm9TNpsosCMNnd/9sDlY7Y/gRwAYDZJOUzusjMfvK+JFRcX5J6OgtRUQB2B/BBDg3k8ZeQHBED4AsASoZCaTTJRaHMrfiKAqD1jwM4NqcinwE4mOTnZiYgBWgozSN5RChzJQB40x0A4KMCivwO4GQAFwI4JIMcRYa9i74GhSwgZr5XuWs8LYPyaazPAMh6ojvLeop8tywA5L0V/FSSsbXZ4Eh3DV7udgD8VdgMwK8+JC6iU5a115GcmmVBkrcUC4hdhYPcPX6+RhAWkDysMQB4SzgXwB0Zoroi+q8iKcvLTaVaQMwSZgGYWBMIfUj+nBeBSgDwljADwHk1XIdCL0FlAMRAOL/i0tsgku82zgI8AMruLgNwfV4FA9btQ/KtAL5UlkotIOYTjgdwr6o5eRVts244SWWZuagWALw1DFUGCGBwLk1bLxpG8pW8MmsDwIPQ25W+7wNwTF6FU9bJ2U7L+xLUCkDsSij5keLblASEagmjSL6XVV63AOCtQSVw3d2yytxr3JN7LUklZsHUnQAMcnUE1RRVTi+TXgIwjqSsoiN1CwBmtqvzA28A2LyjhvkYlCKr9vhcp+W1A2BmewB4AcB2nZQr+Hc1aaaQlK9pSbUC4E9eLfCynF8IRoo/JpJUMXYdqgUAM9N3RgFYGKJxDh71FK5WAwbAvgAeShRnPgWwZxoIdQFwEwCV0DfOsbmQJWPi993MZGGqMsdT5e9VdE3GC5UCYGY69ehUQjaSh0dv/5B4j0FCXJ8hrWexHMAIkj9EH6oEADNTZUjNj+MqeOaSIM0nOTb5n2amStH8FEQVNh8eWcJaAHybe7gfU9kLgEzmbd/91VCCujArXdd3hdA2M73fKobKzDTYIK+uRsel7tT75jnKnGvUUtuWpMrra8nMNG12aguZatjKMa7pAsDMtnK9tkdylKVz6lz6snsATFKPwB+M+gtppx//sBoyCyMAkuNppWtYg0CVxeT4tvfPbKcI8zHXpD2RZnaOW3RXDQo27ROrSfYSAGowylv/30iR4qYCQBFSVe9zk0Fd5GKH0QJAPfpO96XJG8mjmyJHOcHFAuA1APvlkbIerzmN5P3SXwBc7IaOblmPN5NVdaXK/RUDRACoTqcOq4KfptA37l1XuKpma0QKrlQ/2LEEJY8i+XQXAD4Q6u+uwZwKKrbtdNWYjMboNDClf0qTl+ktb5W6RsLMbDc/naZK80Cvt/YQSvruYJIr46GwanQTAJzph5Y1/Vk2aVZQCck8xR4kpUgpZGYCQDHNOK9/p6bpRSRvS02GzEx1tZGlaAbopH8DcDnJO0uS2VaMmWnzk1xz9hrXldIob9o+ldf0W+cPZiafkLvbmtDsSY3MytQ7mXUVwJiZrFozTKoK6QcZSVrXAszsSABPFVRIs4MzyjTxgvoo4TsAwCm+Yy2rEC1PswC9CAfm+KBMSsWPW0l+l2N9LUt8UfYKf8Vn/gcAM9MT82VGTeTYngBwdqeB6Ixya2FPAnCSKx4+HPhlBRJ6vsaS/DZwTePYkgCozx7SqpJXl69YmqzFNW6HHRSKxwGhc79XApgV2npqOiBxAE73/ftWOquRqbJT7mGEJoIRhcIaZVGjMm14QT+BucHVDKa7oUSlkT2KIgAUT6/zIwbXYFTmpLxZU909kiIAprhM6+bEDqf7Hy93pY09lSIAFriO7aF+k7/4aYs0i+hxOEQAqIGgNrJ+iDS5p3j4kNP6F9f7+CyBdXonAAAAAElFTkSuQmCC"});function lo(e){var r;try{r=new URL(e)}catch{return!1}return r.protocol==="http:"||r.protocol==="https:"}var Ma=p(()=>{"use strict";s();l()});var Z,Oo=p(()=>{"use strict";s();l();be();lt();Me();Tr();Ma();Wt();Z={preferences:he("themes/fonts/preferences.json",{dflt:{selected:null,per:{}}}),traces:he("themes/fonts/traces.json"),prepare(){return S(function*(){yield wr(this.preferences,this.traces);var e=this;yield Pr("BUNNY_FONTS",function(){var r=S(function*(t){e.preferences.selected=t.__selected??null;for(var o in t)if(!o.startsWith("__")){var n=e.sanitizeId(o);e.preferences.per[n]={},e.traces[n]={sourceUrl:t[o].__source??null,timeInstalled:null,lastEdited:null},yield xr(`themes/fonts/manifests/${n}.json`,e.convertToNewFormat(t[o],n))}});return function(t){return r.apply(this,arguments)}}()),yield f(this.getAllIds().map(r=>vt(`themes/fonts/manifests/${r}.json`)))}).apply(this)},sanitizeId(e){return e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-")},getAllIds(){return Object.keys(this.traces)},useFonts(){se([this.preferences,this.traces])},convertToNewFormat(e,r){return{spec:3,id:this.sanitizeId(r),display:{name:e.name,description:e.description},main:e.main,extras:Yt(e,["name","description","main","spec"])}},getManifest(e){return he(`themes/fonts/manifests/${e}.json`,{nullIfEmpty:!0})},writeToNative(e){return S(function*(){if(e){var r={name:e.id,description:e.display.description,main:e.main};yield Ke("fonts.json",JSON.stringify(r))}else yield Gr("fonts.json")})()},validate(e,r){if(!e||typeof e!="object")throw new Error("URL returned a null/non-object JSON");if(typeof e.spec!="number")throw new Error("Invalid font 'spec' number");if(e.spec!==1&&e.spec!==3)throw new Error("Only fonts which follows spec: 1 and 3 are supported");if(e.spec===1){var t=["name","main"];if(t.some(n=>n&&!e[n]))throw new Error(`Font is missing one of the fields: ${t}`);if(e.name.startsWith("__"))throw new Error("Font names cannot start with __");if(r&&this.sanitizeId(r)in this.traces)throw new Error("Font was already installed")}else{var o=["id","main"];if(o.some(n=>n&&!e[n]))throw new Error(`Font is missing one of the fields: ${o}`);if(this.sanitizeId(e.id)in this.traces)throw new Error("Font was already installed");if(e.id!==this.sanitizeId(e.id))throw new Error("Font id contains illegal characters")}},initialize(){return S(function*(){this.updateAll()}).apply(this)},fetch(e){return S(function*(){var r;try{r=yield(yield or(e)).json()}catch(t){throw new Error(`Failed to fetch fonts at ${e}`,{cause:t})}this.validate(r,e),r.spec===1&&(r=this.convertToNewFormat(r,e)),r.id=this.sanitizeId(r.id);try{yield Promise.all(Object.entries(r.main).map(function(){var t=S(function*([o,n]){var a=n.split(".").pop();a!=="ttf"&&a!=="otf"&&(a="ttf");var c=`downloads/fonts/${r.id}/${o}.${a}`;(yield ur(c))||(yield Ti(n,c))});return function(o){return t.apply(this,arguments)}}()))}catch(t){throw new Error("Failed to download font assets",{cause:t})}return r}).apply(this)},install(e){return S(function*(){if(!lo(e)||Object.values(this.traces).some(t=>t.sourceUrl===e))throw new Error("Invalid source or font was already installed");var r=yield this.fetch(e);this.preferences.per[r.id]={},this.traces[r.id]={sourceUrl:e,timeInstalled:new Date().toISOString(),lastEdited:null}}).apply(this)},saveLocally(e,{markAsEdited:r=!1}){return S(function*(){this.validate(e,null),yield xr(`themes/fonts/manifests/${e.id}.json`,e),e.id in this.traces?Object.assign(this.traces[e.id],{lastEdited:r?new Date().toISOString():null}):(this.preferences.per[e.id]={},this.traces[e.id]={sourceUrl:null,timeInstalled:new Date().toISOString(),lastEdited:r?new Date().toISOString():null})}).apply(this)},select(e){return S(function*(){if(e&&=this.sanitizeId(e),e&&!this.traces[e]||typeof e!="string")throw new Error(`Unknown font '${e}'`);this.preferences.selected=e,yield this.writeToNative(e!=null?this.getManifest(e):null)}).apply(this)},uninstall(e){return S(function*(){throw e=this.sanitizeId(e),this.traces[e]?(this.preferences.selected===e&&this.select(null),delete this.traces[e],delete this.preferences.per[e],new Error("Method not implemented.")):new Error(`Unknown font '${e}'`)}).apply(this)},updateAll(){return S(function*(){for(var e in this.traces){var{sourceUrl:r,lastEdited:t}=this.traces[e];!r||t||this.fetch(r)}}).apply(this)}}});var ll={};H(ll,{FontManager:()=>Z});var cl=p(()=>{"use strict";s();l();Oo()});var af,sf,Ba,Fa,Ua=p(()=>{"use strict";s();l();af="https://discord.gg/XjYgWXHb9Q",sf="https://github.com/pyoncord",Ba="https://vd-plugins.github.io/proxy",Fa="https://bn-plugins.github.io/vd-proxy"});var ja,tt,Po,_n=p(()=>{"use strict";s();l();(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(ja||(ja={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(tt||(tt={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(Po||(Po={}))});var cf={};H(cf,{default:()=>Gp});function lf(e){return"```js\n"+e.replaceAll("`","`"+$p)+"\n```"}var Hp,zp,$p,Gp,uf=p(()=>{"use strict";s();l();be();Ae();Te();_n();Y();Ee();Hp=B("inspect"),zp=S(function*(){}).constructor,$p="\u200B";Gp=()=>({name:"eval",description:g.COMMAND_EVAL_DESC,shouldHide:()=>O.developer.evalCommandEnabled===!0,options:[{name:"code",type:tt.STRING,description:g.COMMAND_EVAL_OPT_CODE,required:!0},{name:"async",type:tt.BOOLEAN,description:g.COMMAND_EVAL_OPT_ASYNC}],execute([e,r],t){return S(function*(){try{var o=Hp.inspect(r?.value?yield zp(e.value)():eval?.(e.value)),n=o.length>2e3?o.slice(0,2e3)+"...":o;pr.sendBotMessage(t.channel.id,lf(n))}catch(a){pr.sendBotMessage(t.channel.id,lf(a?.stack??a))}})()}})});var ff={};H(ff,{default:()=>Vp});var Vp,df=p(()=>{"use strict";s();l();Ae();_n();no();Y();Vp=()=>({name:"debug",description:g.COMMAND_DEBUG_DESC,options:[{name:"ephemeral",type:tt.BOOLEAN,description:g.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],r){var t=gr(),o=["**Bunny Debug Info**",`> Bunny: ${t.bunny.version} (${t.bunny.loader.name} ${t.bunny.loader.version})`,`> Discord: ${t.discord.version} (${t.discord.build})`,`> React: ${t.react.version} (RN ${t.react.nativeVersion})`,`> Hermes: ${t.hermes.version} (bcv${t.hermes.bytecodeVersion})`,`> System: ${t.os.name} ${t.os.version} ${t.os.sdk?`(SDK ${t.os.sdk})`:""}`.trimEnd(),`> Device: ${t.device.model} (${t.device.codename})`].join(`
`);e?.value?pr.sendBotMessage(r.channel.id,o):pr.sendMessage(r.channel.id,{content:o})}})});var mf={};H(mf,{default:()=>Yp});var Yp,pf=p(()=>{"use strict";s();l();Ae();ot();_n();Y();Yp=()=>({name:"plugins",description:g.COMMAND_PLUGINS_DESC,options:[{name:"ephemeral",displayName:"ephemeral",type:tt.BOOLEAN,description:g.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],r){var t=N.getAllIds().map(c=>N.getManifest(c)).filter(Boolean);t.sort((c,u)=>c.display.name.localeCompare(u.display.name));var o=t.filter(c=>N.settings[c.id].enabled).map(c=>c.display.name),n=t.filter(c=>!N.settings[c.id].enabled).map(c=>c.display.name),a=[`**Installed Plugins (${t.length}):**`,...o.length>0?[`Enabled (${o.length}):`,"> "+o.join(", ")]:[],...n.length>0?[`Disabled (${n.length}):`,"> "+n.join(", ")]:[]].join(`
`);e?.value?pr.sendBotMessage(r.channel.id,a):pr.sendMessage(r.channel.id,{content:a})}})});var ka={};H(ka,{patchCommands:()=>ul,registerCommand:()=>Lo});function ul(){var e=_e("getBuiltInCommands",Jt,([r],t)=>[...t,...bn.filter(o=>(r instanceof Array?r.includes(o.type):r===o.type)&&o.__bunny?.shouldHide?.()!==!1)]);return[(uf(),cr(cf)),(df(),cr(ff)),(pf(),cr(mf))].forEach(r=>Lo(r.default())),()=>{bn=[],e()}}function Lo(e){var r;try{r=Jt.getBuiltInCommands(Po.CHAT,!0,!1)}catch{r=Jt.getBuiltInCommands(Object.values(Po),!0,!1)}r.sort((n,a)=>parseInt(a.id)-parseInt(n.id));var t=r[r.length-1];if(e.id=(parseInt(t.id,10)-1).toString(),e.__bunny={shouldHide:e.shouldHide},e.applicationId??="-1",e.type??=Po.CHAT,e.inputType=ja.BUILT_IN,e.displayName??=e.name,e.untranslatedName??=e.name,e.displayDescription??=e.description,e.untranslatedDescription??=e.description,e.options)for(var o of e.options)o.displayName??=o.name,o.displayDescription??=o.description;return vo("execute",e,(n,a)=>{Promise.resolve(a.apply(e,n)).then(c=>{c&&typeof c=="object"&&pr.sendMessage(n[1].channel.id,c)}).catch(c=>{Ye.error("Failed to execute command",c)})}),bn.push(e),()=>bn=bn.filter(({id:n})=>n!==e.id)}var bn,Sn=p(()=>{"use strict";s();l();Ct();_n();tr();Y();bn=[]});var dl={};H(dl,{dispatcher:()=>Ha,injectFluxInterceptor:()=>fl,intercept:()=>Kp});function fl(){var e=r=>{for(var t of za){var o=t(r);o!=null&&(o?typeof o=="object"&&(Object.assign(r,o),r[Wp]=!0):r[hf]=!0)}return hf in r};return(Ha._interceptors??=[]).unshift(e),()=>Ha._interceptors&&=Ha._interceptors.filter(r=>r!==e)}function Kp(e){return za.push(e),()=>{za=za.filter(r=>r!==e)}}var hf,Wp,Ha,za,ml=p(()=>{"use strict";s();l();Y();hf=Symbol.for("bunny.flux.blocked"),Wp=Symbol.for("bunny.flux.modified"),Ha=wt,za=[]});var pl={};H(pl,{NativeModules:()=>Mn,fs:()=>Go,loader:()=>Fs});var vf=p(()=>{"use strict";s();l();lt();to();er()});var hl={};H(hl,{assets:()=>Ta,commands:()=>ka,debug:()=>va,flux:()=>dl,native:()=>pl,patcher:()=>Kt,settings:()=>Yn,storage:()=>zi});var vl=p(()=>{"use strict";s();l();Te();ge();Sn();no();ml();vf();tr();Me()});function En(e,r){return(...t)=>{var o=r(...t);return e.push(o),o}}function gf(e){var r=new Array,t={...window.bunny,api:{...window.bunny.api,patcher:{before:En(r,Kt.before),after:En(r,Kt.after),instead:En(r,Kt.instead)},commands:{...window.bunny.api.commands,registerCommand:En(r,Lo)},flux:{...window.bunny.api.flux,intercept:En(r,window.bunny.api.flux.intercept)}},plugin:{createStorage:()=>he(`plugins/storage/${e}.json`),manifest:N.getManifest(e),logger:Ye}};return{object:t,disposers:r}}var yf=p(()=>{"use strict";s();l();Ct();vl();Sn();Me();ot()});function Bt(e,r,t){if(!e)throw new Error(`[${r}] Attempted to ${t}`)}var Sf,Ef,qp,Xp,Mr,_f,bf,N,ot=p(()=>{"use strict";s();l();be();Ct();La();rt();en();lt();Me();Ua();Ma();ua();Sf=F(un());yf();Ef=(e,r)=>or(new URL(r,e),{cache:"no-store"}),qp=(e,r)=>Ef(e,r).then(t=>t.text()),Xp=(e,r)=>Ef(e,r).then(t=>t.json());Mr=ze.from({}),_f=new Map,bf=new Map,N={settings:he("plugins/settings.json"),traces:he("plugins/infos.json"),initialize(){return S(function*(){var e=this;this.getAllIds().map(function(){var r=S(function*(t){e.settings[t].enabled&&(yield bf.get(t),e.start(t,{throwOnPluginError:!0}))});return function(t){return r.apply(this,arguments)}}())}).apply(this)},prepare(){return S(function*(){yield wr(this.settings,this.traces),yield this.migrate("VENDETTA_PLUGINS");var e=this.getAllIds();yield Promise.all(e.map(t=>vt(`plugins/manifests/${t}.json`)));for(var r of e)bf.set(r,this.fetch(this.traces[r].sourceUrl,{id:r}))}).apply(this)},migrate(e){var r=this;return Pr(e,function(){var t=S(function*(o){for(var n of Object.values(o)){var a=r.sanitizeId(n.id),c=yield qt(`../vd_mmkv/${a}`,{nullIfEmpty:!0});yield xr(`plugins/manifests/${a}.json`,r.convertToBn(n.id,n.manifest)),yield Ke(`plugins/scripts/${a}.js`,n.js),c&&(yield xr(`plugins/storage/${a}.json`,c)),r.settings[a]??={enabled:n.enabled,autoUpdate:n.update},r.traces[a]??={sourceUrl:n.id,installTime:null,isVendetta:!0}}});return function(o){return t.apply(this,arguments)}}())},usePlugin(e){e=this.sanitizeId(e),se([this.settings,this.traces,Mr],{pathsFrom:e})},usePlugins(){se([this.settings,this.traces,Mr])},convertToBn(e,r){return{id:this.sanitizeId(e),display:{name:r.name,description:r.description,authors:r.authors},main:r.main,hash:r.hash,extras:{...(0,Sf.omit)(r,["name","description","authors","main","hash"])}}},convertToVd(e){return{name:e.display.name,description:e.display.description,authors:e.display.authors,main:e.main,hash:e.hash,...e.extras}},sanitizeId(e){return lo(e)&&!e.endsWith("/")&&(e+="/"),e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-")},getManifest(e){return e=this.sanitizeId(e),he(`plugins/manifests/${e}.json`)},getAllIds(){return Object.keys(this.traces)},getType(e){if("display"in e)return"bunny";if(["name","main"].every(r=>r in e))return"vendetta";throw new Error("Invalid plugin manifest")},isProxied(e){var{sourceUrl:r}=this.traces[this.sanitizeId(e)];return r.startsWith(Ba)||r.startsWith(Fa)},getUnproxiedPlugins(){return this.getAllIds().filter(e=>!this.isProxied(e))},getSettingsComponent(e){return Mr[e]?.SettingsComponent},refetch(e){return S(function*(){e=this.sanitizeId(e);var{sourceUrl:r}=this.traces[e];yield this.fetch(r,{id:e})}).apply(this)},fetch(e,{id:r=""}={}){return S(function*(){e.endsWith("/")||(e+="/");var t=r||Object.entries(this.traces).find(([,c])=>c.sourceUrl===e)?.[0],o=t?this.getManifest(t):null;t&&$.updateStage(r,Se.FETCHING);var n;try{n=yield Xp(e,"manifest.json"),this.getType(n)==="vendetta"&&(n=this.convertToBn(e,n))}catch(c){throw new Error(`Failed to fetch manifest for ${e}`,{cause:c})}Bt(this.traces[n.id]?this.traces[n.id].sourceUrl===e:!0,n.id??e,"fetching a plugin already installed with another source");var a;if(o?.hash!==n.hash){try{a=yield qp(e,n.main)}catch{}if(a)try{yield Ke(`plugins/scripts/${n.id}.js`,a),yield xr(`plugins/manifests/${n.id}.json`,n)}catch{throw new Error(`Unable to update file for plugin ${r}`)}}if(!a&&!o)throw new Error(`Failed to fetch JS for ${e}`);return $.updateStage(n.id,Se.FETCHED),n}).apply(this)},start(e,{throwOnPluginError:r=!1,awaitPlugin:t=!0}={}){return S(function*(){e=this.sanitizeId(e);var o=this.getManifest(e);Bt(o,e,"start a non-registered plugin"),Bt(e in this.settings,e,"start a non-installed plugin"),Bt(this.settings[e]?.enabled,e,"start a disabled plugin"),Bt(!Mr[e],e,"start an already started plugin"),yield vt(`plugins/storage/${e}.json`);var n;if(this.traces[e].isVendetta){var d;try{$.updateStage(e,Se.PARSING);var b=yield st(`plugins/scripts/${e}.js`);d=globalEvalWithSourceUrl(`vendetta=>{return ${b}}`,`vd-plugin/${e}-${o.hash}`),$.updateStage(e,Se.PARSED)}catch(W){if($.reportPluginError(e,W),r)throw new Error("An error occured while parsing Vendetta plugin",{cause:W});return}try{$.updateStage(e,Se.INSTANTIATING);var h={...window.vendetta,plugin:{id:o.id,manifest:this.convertToVd(o),storage:yield qt(`plugins/storage/${this.sanitizeId(e)}.json`)},logger:Ye},x=d(h),I=typeof x=="function"?x():x,U=I?.default??I??{};n={start:U.onLoad&&(()=>U.onLoad()),stop:U.onUnload&&(()=>U.onUnload()),SettingsComponent:U.settings},Mr[e]=n,$.updateStage(e,Se.INSTANTIATED)}catch(W){if($.reportPluginError(e,W),this.disable(e,{throwOnPluginError:!1,reason:Mt.ERROR}),r)throw new Error("An error occured while instantiating Vendetta plugin",{cause:W});return}}else{var a;try{$.updateStage(e,Se.PARSING);var c=yield st(`plugins/scripts/${e}.js`);a=globalEvalWithSourceUrl(`(bunny,definePlugin)=>{${c};return plugin?.default ?? plugin;}`,`bunny-plugin/${e}-${o.hash}`),$.updateStage(e,Se.PARSED)}catch(W){throw $.reportPluginError(e,W),new Error("An error occured while parsing plugin's code, possibly a syntax error?",{cause:W})}try{$.updateStage(e,Se.INSTANTIATING);var u=gf(e);if(n=a(u.object,W=>Object.assign(W,{manifest:o})),!n)throw new Error(`Plugin '${e}' does not export a valid plugin instance`);_f.set(e,u),Mr[e]=n,$.updateStage(e,Se.INSTANTIATED)}catch(W){throw $.reportPluginError(e,W),new Error("An error occured while instantiating plugin's code",{cause:W})}}try{$.updateStage(e,Se.STARTING);var Q=n.start?.();t&&(yield Q),$.updateStage(e,Se.RUNNING)}catch(W){if($.reportPluginError(e,W),this.disable(e,{throwOnPluginError:!1,reason:Mt.ERROR}),r)throw new Error("An error occured while starting the plugin",{cause:W})}}).apply(this)},stop(e,{throwOnPluginError:r=!1,awaitPlugin:t=!1}={}){return S(function*(){e=this.sanitizeId(e);var o=Mr[e];Bt(o,e,"stop a non-started plugin");try{$.updateStage(e,Se.STOPPING);var n=o.stop?.();t&&(yield n),$.updateStage(e,Se.STOPPED)}catch(c){if(r)throw new Error("instance.stop() threw an error",{cause:c})}finally{var a=_f.get(e);a?.disposers.forEach(c=>c()),delete Mr[e]}}).apply(this)},enable(e,{start:r=!0}={}){return S(function*(){e=this.sanitizeId(e),Bt(this.settings[e],e,"enable a non-installed plugin"),this.settings[e].enabled=!0,$.clearPluginReports(e),r&&(yield this.start(e))}).apply(this)},disable(e,{throwOnPluginError:r=!1,reason:t=Mt.REQUESTED}={}){return S(function*(){e=this.sanitizeId(e),Bt(this.settings[e],e,"disable a non-installed plugin"),Mr[e]&&this.stop(e,{throwOnPluginError:r}),this.settings[e].enabled=!1,$.reportPluginDisable(e,t)}).apply(this)},install(e,{start:r=!0,enable:t=!0}={}){return S(function*(){if(e.endsWith("/")||(e+="/"),!(!r||t))throw new Error("Instant start is true but plugin is not pre-enabled");var o=yield this.fetch(e);this.traces[o.id]={sourceUrl:e,installTime:new Date().toISOString(),isVendetta:o.id.startsWith("https-")},this.settings[o.id]={enabled:t,autoUpdate:!0},r&&(yield this.start(o.id,{awaitPlugin:!1,throwOnPluginError:!1}))}).apply(this)},uninstall(e,{keepData:r=!1}={}){return S(function*(){e=this.sanitizeId(e),Mr[e]&&(yield this.stop(e)),delete this.traces[e],delete this.settings[e],$.clearPluginReports(e),yield Gr(`plugins/scripts/${e}.js`),yield yo(`plugins/manifests/${e}.json`),r||(yield yo(`plugins/storage/${e}.json`))}).apply(this)}}});var gl={};H(gl,{PluginManager:()=>N});var $a=p(()=>{"use strict";s();l();ot()});function Ga(e,r,t,o,n){return S(function*(){if(e)return void e();var a=yield t().then(c=>c.default);typeof o=="string"&&(o={title:o}),r??=Jp.getRootNavigationRef(),r.navigate("BUNNY_CUSTOM_PAGE",{...o,render:()=>i(a,{...n})})})}var Jp,Do,yl=p(()=>{"use strict";s();l();be();V();Y();Ee();ar();Jp=B("getRootNavigationRef"),Do=React.memo(()=>{var e=de.useNavigation(),r=de.useRoute(),{render:t,...o}=r.params;return React.useEffect(()=>void e.setOptions({...o}),[]),i(we,{children:i(t,{})})})});function Zp(){var e=de.useNavigation();return i(St,{children:Object.keys(Br).map(r=>i(Xs,{title:r,children:Br[r].filter(t=>t.usePredicate?.()??!0).map(t=>i(Qr,{label:t.title(),leading:i(ju,{source:t.icon}),trailing:Qr.Arrow,onPress:Ga(t.onPress,e,t.render,t.title())}))},r))})}function xf(e){e.push(_e("default",Ue("getScreens",!1),(t,o)=>({...o,VendettaCustomPage:{title:"Bunny",render:()=>i(Do,{})},BUNNY_CUSTOM_PAGE:{title:"Bunny",render:()=>i(Do,{})}})));var r=_e("default",Ue("UserSettingsOverviewWrapper",!1),(t,o)=>{var n=vr(o.props.children,a=>a.type?.name==="UserSettingsOverview");e.push(_e("renderSupportAndAcknowledgements",n.type.prototype,(a,{props:{children:c}})=>{var u=c.findIndex(d=>d?.type?.name==="UploadLogsButton");u!==-1&&c.splice(u,1)})),e.push(_e("render",n.type.prototype,(a,c)=>{var u=[xt.Messages.BILLING_SETTINGS,xt.Messages.PREMIUM_SETTINGS],d=vr(c.props.children,h=>h?.children?.[1]?.type===Xs)?.children;if(d){var b=d.findIndex(h=>u.includes(h?.props.label));d.splice(-~b||4,0,i(Zp,{}))}}))},!0);e.push(r)}var wf=p(()=>{"use strict";s();l();V();tr();Tr();Y();ne();Ee();Mo();yl()});function eh(){var e=!1;return React.useEffect(()=>void(e=!0),[]),e}function Tf(e){var r=()=>Object.values(Br).flatMap(n=>n.map(a=>({[a.key]:{type:"pressable",title:a.title,icon:a.icon,usePredicate:a.usePredicate,onPress:Ga(a.onPress,null,a.render,a.title()),withArrow:!0,...a.rawTabsConfig}}))).reduce((n,a)=>Object.assign(n,a)),t=Va.SETTING_RENDERER_CONFIG,o=Va.SETTING_RENDERER_CONFIG;Object.defineProperty(Va,"SETTING_RENDERER_CONFIG",{enumerable:!0,configurable:!0,get:()=>({...o,VendettaCustomPage:{type:"route",title:()=>"Bunny",screen:{route:"VendettaCustomPage",getComponent:()=>Do}},BUNNY_CUSTOM_PAGE:{type:"route",title:()=>"Bunny",screen:{route:"BUNNY_CUSTOM_PAGE",getComponent:()=>Do}},...r()}),set:n=>o=n}),e.push(()=>{Object.defineProperty(Va,"SETTING_RENDERER_CONFIG",{value:t,writable:!0,get:void 0,set:void 0})}),e.push(_e("default",Qp,(n,a)=>{if(!eh()){var{sections:c}=vr(a,d=>d.props?.sections).props,u=-~c.findIndex(d=>d.label===xt.Messages.ACCOUNT_SETTINGS)||1;Object.keys(Br).forEach(d=>{c.splice(u++,0,{label:d,title:d,settings:Br[d].map(b=>b.key)})})}}))}var Va,Qp,Af=p(()=>{"use strict";s();l();tr();Tr();Y();Ee();Mo();yl();Va=B("SETTING_RENDERER_CONFIG"),Qp=Ue("SettingsOverviewScreen",!1)});var bl={};H(bl,{patchSettingsSection:()=>_l,registerSection:()=>Ya,registeredSections:()=>Br});function Ya(e){return Br[e.name]=e.items,()=>delete Br[e.name]}function _l(){var e=new Array;return xf(e),Tf(e),()=>e.forEach(r=>r())}var Br,Mo=p(()=>{"use strict";s();l();wf();Af();Br={}});function Wa({label:e,version:r,icon:t}){return i(L,{label:e,icon:i(L.Icon,{source:y(t)}),trailing:i(A,{variant:"text-sm/normal",children:r}),onPress:()=>{Pe.setString(`${e} - ${r}`),ae.showCopyToClipboard()}})}var If=p(()=>{"use strict";s();l();V();ge();Y();ne();et()});function Sl(){O.useSettings();var e=gr(),r=[{label:g.BUNNY,version:e.bunny.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${e.discord.version} (${e.discord.build})`,icon:"Discord"},{label:"React",version:e.react.version,icon:"ic_category_16px"},{label:"React Native",version:e.react.nativeVersion,icon:"mobile"},{label:g.BYTECODE,version:e.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:g.LOADER,version:`${e.bunny.loader.name} (${e.bunny.loader.version})`,icon:"ic_download_24px"},{label:g.OPERATING_SYSTEM,version:`${e.os.name} ${e.os.version}`,icon:"ic_cog_24px"},...e.os.sdk?[{label:"SDK",version:e.os.sdk,icon:"pencil"}]:[],{label:g.MANUFACTURER,version:e.device.manufacturer,icon:"ic_badge_staff"},{label:g.BRAND,version:e.device.brand,icon:"ic_settings_boost_24px"},{label:g.MODEL,version:e.device.model,icon:"ic_phonelink_24px"},{label:Ka.Platform.select({android:g.CODENAME,ios:g.MACHINE_ID}),version:e.device.codename,icon:"ic_compose_24px"}];return i(Ka.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(pe,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24,children:[i(xe,{title:g.VERSIONS,children:r.map(o=>i(Wa,{label:o.label,version:o.version,icon:o.icon}))}),i(xe,{title:g.PLATFORM,children:t.map(o=>i(Wa,{label:o.label,version:o.version,icon:o.icon}))})]})})}var Ka,Rf=p(()=>{"use strict";s();l();V();Ae();Te();If();no();ne();Ka=F(oe())});var co,Cf,qa=p(()=>{"use strict";s();l();Fe();hr();({openAlert:co,dismissAlert:Cf}=ue(()=>z("openAlert","dismissAlert")))});var Of={};H(Of,{default:()=>Nf});function Nf(){O.useSettings();var e=gr(),r=de.useNavigation();return i(Xa.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(pe,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24,children:[_(xe,{title:g.INFO,children:[i(L,{label:g.BUNNY,icon:i(L.Icon,{source:{uri:Da}}),trailing:i(L.TrailingText,{text:e.bunny.version})}),i(L,{label:"Discord",icon:i(L.Icon,{source:y("Discord")}),trailing:i(L.TrailingText,{text:`${e.discord.version} (${e.discord.build})`})}),i(L,{arrow:!0,label:g.ABOUT,icon:i(L.Icon,{source:y("CircleInformationIcon-primary")}),onPress:()=>r.push("BUNNY_CUSTOM_PAGE",{title:g.ABOUT,render:()=>i(Sl,{})})})]}),_(xe,{title:g.LINKS,children:[i(L,{arrow:!0,label:g.DISCORD_SERVER,icon:i(L.Icon,{source:y("Discord")}),onPress:()=>Eo.openDeeplink(af)}),i(L,{arrow:!0,label:g.GITHUB,icon:i(L.Icon,{source:y("img_account_sync_github_white")}),onPress:()=>Eo.openURL(sf)})]}),_(xe,{title:g.ACTIONS,children:[i(L,{label:g.RELOAD_DISCORD,icon:i(L.Icon,{source:y("RetryIcon")}),onPress:()=>Xa.NativeModules.BundleUpdaterManager.reload()}),i(Jr,{label:"Safe Mode",subLabel:"Load Bunny without loading add-ons",icon:i(L.Icon,{source:y("ShieldIcon")}),value:O.isSafeMode(),onValueChange:t=>{da({to:t,reload:!1}),co("bunny-reload-safe-mode",i(io,{title:"Reload now?",content:t?"All add-ons will be temporarily disabled upon reload.":"All add-ons will load normally.",actions:_(Ea,{children:[i(Zr,{text:"Reload Now",variant:"destructive",onPress:()=>$r.reload()}),i(Zr,{text:"Later",variant:"secondary"})]})}))}}),i(Jr,{label:g.DEVELOPER_SETTINGS,icon:i(L.Icon,{source:y("WrenchIcon")}),value:O.developer.enabled,onValueChange:t=>{O.developer.enabled=t}})]}),i(xe,{title:g.MISCELLANEOUS,children:i(Jr,{label:g.SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS,subLabel:g.SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS_DESC,icon:i(L.Icon,{source:y("WrenchIcon")}),value:O.general.patchIsStaff,onValueChange:t=>{O.general.patchIsStaff=t}})})]})})}var Xa,Pf=p(()=>{"use strict";s();l();V();ks();Ae();Te();El();Rf();ge();no();er();Ua();qa();Y();ne();Xa=F(oe())});var Df=Cr((Lf,Ja)=>{s();l();Vo();Xo();Fn();oc();kn();((e,r)=>{typeof define=="function"&&define.amd?define([],r):typeof Ja=="object"&&Ja.exports?Ja.exports=r():e.fuzzysort=r()})(Lf,e=>{"use strict";var r=(E,v)=>{if(!E||!v)return Re;var w=U(E);Ut(v)||(v=I(v));var R=w.bitflags;return(R&v._bitflags)!==R?Re:W(w,v)},t=(E,v,w)=>{if(!E)return w?.all?Q(v,w):hi;var R=U(E),D=R.bitflags,P=R.containsSpace,T=h(w?.threshold||0),k=w?.limit||pi,M=0,q=0,K=v.length;function We(Ht){M<k?(Pn.add(Ht),++M):(++q,Ht._score>Pn.peek()._score&&Pn.replaceTop(Ht))}if(w?.key)for(var De=w.key,X=0;X<K;++X){var He=v[X],ee=On(He,De);if(ee&&(Ut(ee)||(ee=I(ee)),(D&ee._bitflags)===D)){var ie=W(R,ee);ie!==Re&&(ie._score<T||(ie.obj=He,We(ie)))}}else if(w?.keys){var Hr=w.keys,br=Hr.length;e:for(var X=0;X<K;++X){var He=v[X];{for(var Ce=0,ye=0;ye<br;++ye){var De=Hr[ye],ee=On(He,De);if(!ee){mi[ye]=zo;continue}Ut(ee)||(ee=I(ee)),mi[ye]=ee,Ce|=ee._bitflags}if((D&Ce)!==D)continue}if(P)for(var Xe=0;Xe<R.spaceSearches.length;Xe++)kr[Xe]=qe;for(var ye=0;ye<br;++ye){if(ee=mi[ye],ee===zo){po[ye]=zo;continue}if(po[ye]=W(R,ee,!1,P),po[ye]===Re){po[ye]=zo;continue}if(P)for(var j=0;j<R.spaceSearches.length;j++){if(Ft[j]>-1e3&&kr[j]>qe){var Je=(kr[j]+Ft[j])/4;Je>kr[j]&&(kr[j]=Je)}Ft[j]>kr[j]&&(kr[j]=Ft[j])}}if(P){for(var sr=0;sr<R.spaceSearches.length;sr++)if(kr[sr]===qe)continue e}else{for(var jt=!1,kt=0;kt<br;kt++)if(po[kt]._score!==qe){jt=!0;break}if(!jt)continue}for(var lr=new u(br),Ze=0;Ze<br;Ze++)lr[Ze]=po[Ze];if(P)for(var ce=0,ho=0;ho<R.spaceSearches.length;ho++)ce+=kr[ho];else for(var ce=qe,Qe=0;Qe<br;Qe++){var ie=lr[Qe];if(ie._score>-1e3&&ce>qe){var Je=(ce+ie._score)/4;Je>ce&&(ce=Je)}ie._score>ce&&(ce=ie._score)}if(lr.obj=He,lr._score=ce,w?.scoreFn){if(ce=w.scoreFn(lr),!ce)continue;ce=h(ce),lr._score=ce}ce<T||We(lr)}}else for(var X=0;X<K;++X){var ee=v[X];if(ee&&(Ut(ee)||(ee=I(ee)),(D&ee._bitflags)===D)){var ie=W(R,ee);ie!==Re&&(ie._score<T||We(ie))}}if(M===0)return hi;for(var $o=new Array(M),X=M-1;X>=0;--X)$o[X]=Pn.poll();return $o.total=M+q,$o},o=(E,v="<b>",w="</b>")=>{for(var R=typeof v=="function"?v:void 0,D=E.target,P=D.length,T=E.indexes,k="",M=0,q=0,K=!1,We=[],De=0;De<P;++De){var X=D[De];if(T[q]===De){if(++q,K||(K=!0,R?(We.push(k),k=""):k+=v),q===T.length){R?(k+=X,We.push(R(k,M++)),k="",We.push(D.substr(De+1))):k+=X+w+D.substr(De+1);break}}else K&&(K=!1,R?(We.push(R(k,M++)),k=""):k+=w);k+=X}return R?We:k},n=E=>{typeof E=="number"?E=""+E:typeof E!="string"&&(E="");var v=it(E);return d(E,{_targetLower:v._lower,_targetLowerCodes:v.lowerCodes,_bitflags:v.bitflags})},a=()=>{fi.clear(),di.clear()},c=function(){function E(){rr(this,E)}return Er(E,[{key:"indexes",get:function(){return this._indexes.slice(0,this._indexes.len).sort((w,R)=>w-R)}},{key:"indexes",set:function(w){return this._indexes=w}},{key:"highlight",value:function(w,R){return o(this,w,R)}},{key:"score",get:function(){return b(this._score)}},{key:"score",set:function(w){this._score=h(w)}}]),E}(),u=function(E){ut(w,E);var v=ft(w);function w(){return rr(this,w),v.apply(this,arguments)}return Er(w,[{key:"score",get:function(){return b(this._score)}},{key:"score",set:function(D){this._score=h(D)}}]),w}(jn(Array)),d=(E,v)=>{var w=new c;return w.target=E,w.obj=v.obj??Re,w._score=v._score??qe,w._indexes=v._indexes??[],w._targetLower=v._targetLower??"",w._targetLowerCodes=v._targetLowerCodes??Re,w._nextBeginningIndexes=v._nextBeginningIndexes??Re,w._bitflags=v._bitflags??0,w},b=E=>E===qe?0:E>1?E:Math.E**(((-E+1)**.04307-1)*-2),h=E=>E===0?qe:E>1?E:1-Math.pow(Math.log(E)/-2+1,1/.04307),x=E=>{typeof E=="number"?E=""+E:typeof E!="string"&&(E=""),E=E.trim();var v=it(E),w=[];if(v.containsSpace){var R=E.split(/\s+/);R=[...new Set(R)];for(var D=0;D<R.length;D++)if(R[D]!==""){var P=it(R[D]);w.push({lowerCodes:P.lowerCodes,_lower:R[D].toLowerCase(),containsSpace:!1})}}return{lowerCodes:v.lowerCodes,_lower:v._lower,containsSpace:v.containsSpace,bitflags:v.bitflags,spaceSearches:w}},I=E=>{if(E.length>999)return n(E);var v=fi.get(E);return v!==void 0||(v=n(E),fi.set(E,v)),v},U=E=>{if(E.length>999)return x(E);var v=di.get(E);return v!==void 0||(v=x(E),di.set(E,v)),v},Q=(E,v)=>{var w=[];w.total=E.length;var R=v?.limit||pi;if(v?.key)for(var D=0;D<E.length;D++){var P=E[D],T=On(P,v.key);if(T!=Re){Ut(T)||(T=I(T));var k=d(T.target,{_score:T._score,obj:P});if(w.push(k),w.length>=R)return w}}else if(v?.keys)for(var D=0;D<E.length;D++){for(var P=E[D],M=new u(v.keys.length),q=v.keys.length-1;q>=0;--q){var T=On(P,v.keys[q]);if(!T){M[q]=zo;continue}Ut(T)||(T=I(T)),T._score=qe,T._indexes.len=0,M[q]=T}if(M.obj=P,M._score=qe,w.push(M),w.length>=R)return w}else for(var D=0;D<E.length;D++){var T=E[D];if(T!=Re&&(Ut(T)||(T=I(T)),T._score=qe,T._indexes.len=0,w.push(T),w.length>=R))return w}return w},W=(E,v,w=!1,R=!1)=>{if(w===!1&&E.containsSpace)return Rn(E,v,R);for(var D=E._lower,P=E.lowerCodes,T=P[0],k=v._targetLowerCodes,M=P.length,q=k.length,X=0,K=0,We=0;;){var De=T===k[K];if(De){if(jr[We++]=K,++X,X===M)break;T=P[X]}if(++K,K>=q)return Re}var X=0,He=!1,ee=0,ie=v._nextBeginningIndexes;ie===Re&&(ie=v._nextBeginningIndexes=ke(v.target)),K=jr[0]===0?0:ie[jr[0]-1];var Hr=0;if(K!==q)for(;;)if(K>=q){if(X<=0||(++Hr,Hr>200))break;--X;var br=Cn[--ee];K=ie[br]}else{var De=P[X]===k[K];if(De){if(Cn[ee++]=K,++X,X===M){He=!0;break}++K}else K=ie[K]}var Ce=M<=1?-1:v._targetLower.indexOf(D,jr[0]),ye=!!~Ce,Xe=ye?Ce===0||v._nextBeginningIndexes[Ce-1]===Ce:!1;if(ye&&!Xe){for(var j=0;j<ie.length;j=ie[j])if(!(j<=Ce)){for(var Je=0;Je<M&&P[Je]===v._targetLowerCodes[j+Je];Je++);if(Je===M){Ce=j,Xe=!0;break}}}var sr=Ze=>{for(var ce=0,ho=0,Qe=1;Qe<M;++Qe)Ze[Qe]-Ze[Qe-1]!==1&&(ce-=Ze[Qe],++ho);var $o=Ze[M-1]-Ze[0]-(M-1);if(ce-=(12+$o)*ho,Ze[0]!==0&&(ce-=Ze[0]*Ze[0]*.2),!He)ce*=1e3;else{for(var Ht=1,Qe=ie[0];Qe<q;Qe=ie[Qe])++Ht;Ht>24&&(ce*=(Ht-24)*10)}return ce-=(q-M)/2,ye&&(ce/=1+M*M*1),Xe&&(ce/=1+M*M*1),ce-=(q-M)/2,ce};if(He)if(Xe){for(var j=0;j<M;++j)jr[j]=Ce+j;var jt=jr,kt=sr(jr)}else var jt=Cn,kt=sr(Cn);else{if(ye)for(var j=0;j<M;++j)jr[j]=Ce+j;var jt=jr,kt=sr(jt)}v._score=kt;for(var j=0;j<M;++j)v._indexes[j]=jt[j];v._indexes.len=M;var lr=new c;return lr.target=v.target,lr._score=v._score,lr._indexes=v._indexes,lr},Rn=(E,v,w)=>{for(var R=new Set,D=0,P=Re,T=0,k=E.spaceSearches,M=k.length,q=0,K=()=>{for(var sr=q-1;sr>=0;sr--)v._nextBeginningIndexes[Nn[sr*2+0]]=Nn[sr*2+1]},We=!1,j=0;j<M;++j){Ft[j]=qe;var De=k[j];if(P=W(De,v),w){if(P===Re)continue;We=!0}else if(P===Re)return K(),Re;var X=j===M-1;if(!X){for(var He=P._indexes,ee=!0,ie=0;ie<He.len-1;ie++)if(He[ie+1]-He[ie]!==1){ee=!1;break}if(ee)for(var Hr=He[He.len-1]+1,br=v._nextBeginningIndexes[Hr-1],Ce=Hr-1;Ce>=0&&br===v._nextBeginningIndexes[Ce];Ce--)v._nextBeginningIndexes[Ce]=Hr,Nn[q*2+0]=Ce,Nn[q*2+1]=br,q++}D+=P._score/M,Ft[j]=P._score/M,P._indexes[0]<T&&(D-=(T-P._indexes[0])*2),T=P._indexes[0];for(var ye=0;ye<P._indexes.len;++ye)R.add(P._indexes[ye])}if(w&&!We)return Re;K();var Xe=W(E,v,!0);if(Xe!==Re&&Xe._score>D){if(w)for(var j=0;j<M;++j)Ft[j]=Xe._score/M;return Xe}w&&(P=v),P._score=D;var j=0;for(var Je of R)P._indexes[j++]=Je;return P._indexes.len=j,P},it=E=>{for(var v=E.length,w=E.toLowerCase(),R=[],D=0,P=!1,T=0;T<v;++T){var k=R[T]=w.charCodeAt(T);if(k===32){P=!0;continue}var M=k>=97&&k<=122?k-97:k>=48&&k<=57?26:k<=127?30:31;D|=1<<M}return{lowerCodes:R,bitflags:D,containsSpace:P,_lower:w}},mo=E=>{for(var v=E.length,w=[],R=0,D=!1,P=!1,T=0;T<v;++T){var k=E.charCodeAt(T),M=k>=65&&k<=90,q=M||k>=97&&k<=122||k>=48&&k<=57,K=M&&!D||!P||!q;D=M,P=q,K&&(w[R++]=T)}return w},ke=E=>{for(var v=E.length,w=mo(E),R=[],D=w[0],P=0,T=0;T<v;++T)D>T?R[T]=D:(D=w[++P],R[T]=D===void 0?v:D);return R},fi=new Map,di=new Map,jr=[],Cn=[],Nn=[],kr=[],Ft=[],mi=[],po=[],On=(E,v)=>{var w=E[v];if(w!==void 0)return w;if(typeof v=="function")return v(E);var R=v;Array.isArray(v)||(R=v.split("."));for(var D=R.length,P=-1;E&&++P<D;)E=E[R[P]];return E},Ut=E=>typeof E=="object"&&typeof E._bitflags=="number",pi=1/0,qe=-pi,hi=[];hi.total=0;var Re=null,zo=n(""),am=E=>{var v=[],w=0,R={},D=P=>{for(var T=0,k=v[T],M=1;M<w;){var q=M+1;T=M,q<w&&v[q]._score<v[M]._score&&(T=q),v[T-1>>1]=v[T],M=1+(T<<1)}for(var K=T-1>>1;T>0&&k._score<v[K]._score;K=(T=K)-1>>1)v[T]=v[K];v[T]=k};return R.add=P=>{var T=w;v[w++]=P;for(var k=T-1>>1;T>0&&P._score<v[k]._score;k=(T=k)-1>>1)v[T]=v[k];v[T]=P},R.poll=P=>{if(w!==0){var T=v[0];return v[0]=v[--w],D(),T}},R.peek=P=>{if(w!==0)return v[0]},R.replaceTop=P=>{v[0]=P,D()},R},Pn=am();return{single:r,go:t,prepare:n,cleanup:a}})});function oh(e){var[r,t]=React.useState(""),[o,n]=React.useState(""),[a,c]=React.useState(!1);function u(){c(!0),e.fetchFn(r).then(()=>Cf("AddonInputAlert")).catch(d=>d instanceof Error?n(d.message):String(d)).finally(()=>c(!1))}return i(io,{title:e.label,content:"Type in the source URL you want to install from:",extraContent:_(pe,{style:{marginTop:-12},children:[i(Le,{autoFocus:!0,isClearable:!0,value:r,onChange:d=>{t(d),o&&n("")},returnKeyType:"done",onSubmitEditing:u,state:o?"error":void 0,errorMessage:o||void 0}),i(ir.ScrollView,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:{gap:8},children:i(G,{size:"sm",variant:"tertiary",text:"Import from clipboard",icon:y("ClipboardListIcon"),onPress:()=>Pe.getString().then(d=>t(d))})})]}),actions:_(pe,{children:[i(G,{loading:a,text:"Install",variant:"primary",disabled:!r||!lo(r),onPress:u}),i(Zr,{disabled:a,text:"Cancel",variant:"secondary"})]})})}function uo({CardComponent:e,...r}){O.useSettings();var[t,o]=React.useState(""),[n,a]=React.useState(()=>null),c=de.useNavigation();(0,Bo.useEffect)(()=>{r.OptionsActionSheetComponent&&c.setOptions({headerRight:()=>i(je,{size:"sm",variant:"secondary",icon:y("MoreHorizontalIcon"),onPress:()=>Xr("AddonMoreSheet",r.OptionsActionSheetComponent)})})},[c]);var u=(0,Bo.useMemo)(()=>{var h=r.items;r.resolveItem&&(h=h.map(r.resolveItem).filter(Hn));var x=h.filter(I=>Hn(I)&&typeof I=="object");return!t&&n&&x.sort(n),Mf.default.go(t,x,{keys:r.searchKeywords,all:!0})},[r.items,n,t]),d=(0,Bo.useCallback)(()=>{if(!r.installAction)return()=>{};var{label:h,onPress:x,fetchFn:I}=r.installAction;I?co("AddonInputAlert",i(oh,{label:h??"Install",fetchFn:I})):x?.()},[]);if(u.length===0&&!t)return _(ir.View,{style:{gap:32,flexGrow:1,justifyContent:"center",alignItems:"center"},children:[_(ir.View,{style:{gap:8,alignItems:"center"},children:[i(ir.Image,{source:y("empty_quick_switcher")}),i(A,{variant:"text-lg/semibold",color:"text-normal",children:"Oops! Nothing to see here\u2026 yet!"})]}),i(G,{size:"lg",icon:y("DownloadIcon"),text:r.installAction?.label??"Install",onPress:d})]});var b=_(ir.View,{style:{paddingBottom:8},children:[O.isSafeMode()&&_(ir.View,{style:{marginBottom:10},children:[i(ya,{messageType:0,children:r.safeModeHint?.message}),r.safeModeHint?.footer]}),_(ir.View,{style:{flexDirection:"row",gap:8},children:[i(Dt,{style:{flexGrow:1},isRound:!!r.sortOptions,onChangeText:h=>o(h)}),r.sortOptions&&i(je,{icon:y("ic_forum_channel_sort_order_24px"),variant:"tertiary",disabled:!!t,onPress:()=>rh({key:"AddonListSortOptions",header:{title:"Sort Options",onClose:()=>th("AddonListSortOptions")},options:Object.entries(r.sortOptions).map(([h,x])=>({label:h,onPress:()=>a(()=>x)}))})})]}),r.ListHeaderComponent&&i(r.ListHeaderComponent,{})]});return _(we,{children:[i(wa,{data:u,extraData:t,estimatedItemSize:136,ListHeaderComponent:b,ListEmptyComponent:()=>_(ir.View,{style:{gap:12,padding:12,alignItems:"center"},children:[i(ir.Image,{source:y("devices_not_found")}),i(A,{variant:"text-lg/semibold",color:"text-normal",children:"Hmmm... could not find that!"})]}),contentContainerStyle:{padding:8,paddingHorizontal:12,paddingBottom:90},ItemSeparatorComponent:()=>i(ir.View,{style:{height:8}}),ListFooterComponent:r.ListFooterComponent,renderItem:({item:h})=>i(e,{item:h.obj,result:h})}),r.installAction&&i(Fu,{icon:y("PlusLargeIcon"),onPress:d})]})}var Mf,Bo,ir,rh,th,Za=p(()=>{"use strict";s();l();V();Te();ge();qa();Ro();Ma();Fe();hr();Y();ne();ar();Wt();Mf=F(Df()),Bo=F(_r()),ir=F(oe()),{showSimpleActionSheet:rh,hideActionSheet:th}=ue(()=>z("showSimpleActionSheet"))});var Bf,Ff=p(()=>{"use strict";s();l();Y();Ar();Bf=nr({smallIcon:{tintColor:J.colors.LOGO_PRIMARY,height:18,width:18}})});function xn(e){$.useReporter();var r=Zt(J.colors.STATUS_DANGER_BACKGROUND),t=Zt(J.colors.STATUS_POSITIVE_BACKGROUND),o=Zt(J.colors.STATUS_OFFLINE),n=$.stages[e],a=$.disableReason[e];return n===Se.RUNNING?t:a===Mt.ERROR?r:o}var xl=p(()=>{"use strict";s();l();La();rt();Y()});function wl(){return(0,Uf.default)(J.unsafe_rawColors.YELLOW_300).alpha(.3).hex()}function nh(){var e=Bf(),{plugin:r,result:t}=Qa(),o=xn(r.id),n=t[0].highlight((u,d)=>i(A,{style:{backgroundColor:wl()},children:u},d)),a=r.icon&&y(r.icon),c=i(A,{numberOfLines:1,variant:"heading-lg/semibold",children:n.length?n:r.name});return _(nt.View,{style:{flexDirection:"row",alignItems:"center",gap:6},children:[a&&i(nt.Image,{style:e.smallIcon,source:a}),c,i(nt.View,{style:{borderRadius:4,backgroundColor:o,height:8,width:8}})]})}function ah(){var{plugin:e,result:r}=Qa();if(!e.authors)return null;var t=r[2].highlight((a,c)=>i(A,{style:{backgroundColor:wl()},children:a},c));if(t.length>0)return _(A,{variant:"text-md/semibold",color:"text-muted",children:["by ",t]});var o=["by "];for(var n of e.authors)o.push(typeof n=="string"?n:n.name),o.push(", ");return o.pop(),i(A,{variant:"text-md/semibold",color:"text-muted",children:o})}function ih(){var{plugin:e,result:r}=Qa(),t=r[1].highlight((o,n)=>i(A,{style:{backgroundColor:wl()},children:o},n));return i(A,{variant:"text-md/medium",children:t.length?t:e.description})}function sh(){var{plugin:e}=Qa(),r=de.useNavigation();return _(nt.View,{style:{flexDirection:"row",gap:6},children:[i(je,{size:"sm",variant:"secondary",icon:y("WrenchIcon"),disabled:!e.getPluginSettingsComponent(),onPress:()=>r.push("BUNNY_CUSTOM_PAGE",{title:e.name,render:e.getPluginSettingsComponent()})}),i(je,{size:"sm",variant:"secondary",icon:y("CircleInformationIcon-primary"),onPress:()=>void Xr("PluginInfoActionSheet",e.resolveSheetComponent(),{plugin:e,navigation:r})})]})}function Tl({result:e,item:r}){r.usePluginState();var t=de.useNavigation(),o=(0,Fo.useMemo)(()=>({plugin:r,result:e}),[r,e]);return r.isInstalled()?i(jf.Provider,{value:o,children:i(fe,{onPress:()=>void Xr("PluginInfoActionSheet",r.resolveSheetComponent(),{plugin:r,navigation:t}),children:_(pe,{spacing:16,children:[_(nt.View,{style:{flexDirection:"row",justifyContent:"space-between"},children:[_(nt.View,{style:{flexShrink:1},children:[i(nh,{}),i(ah,{})]}),i(nt.View,{children:_(pe,{spacing:12,direction:"horizontal",children:[i(sh,{}),i(Sa,{value:r.isEnabled(),onValueChange:n=>{r.toggle(n)}})]})})]}),i(ih,{})]})})}):null}var Uf,Fo,nt,jf,Qa,kf=p(()=>{"use strict";s();l();V();Ff();xl();ge();Y();ne();Ro();Uf=F(Qt()),Fo=F(_r()),nt=F(oe()),jf=(0,Fo.createContext)(null),Qa=()=>(0,Fo.useContext)(jf)});function Al({title:e,confirmText:r,confirmColor:t,onConfirm:o,cancelText:n,placeholder:a,initialValue:c="",secureTextEntry:u}){var[d,b]=React.useState(c),[h,x]=React.useState("");function I(){var U=Promise.resolve(o(d));U.then(()=>{Hf.close()}).catch(Q=>{x(Q.message)})}return i(ga,{title:e,confirmText:r,confirmColor:t,isConfirmButtonDisabled:h.length!==0,onConfirm:I,cancelText:n,onCancel:()=>Hf.close(),children:i(ku,{placeholder:a,value:d,onChange:U=>{b(typeof U=="string"?U:U.text),h&&x("")},returnKeyType:"done",onSubmitEditing:I,error:h||void 0,secureTextEntry:u,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}})})}var Hf,zf=p(()=>{"use strict";s();l();V();ne();Ee();Hf=B("openLazy","close")});var ri={};H(ri,{showConfirmationAlert:()=>Fr,showCustomAlert:()=>ei,showInputAlert:()=>Il});function Fr(e){var r=e;return r.body=e.content,delete r.content,r.isDismissable??=!0,$f.show(r)}var $f,ei,Il,Uo=p(()=>{"use strict";s();l();be();Ee();zf();$f=B("openLazy","close");ei=(e,r)=>$f.openLazy({importer:S(function*(){return()=>React.createElement(e,r)})}),Il=e=>ei(Al,e)});var Rl,Gf=p(()=>{"use strict";s();l();Ee();Rl=Xt("UserStore")});var Vf,Yf=p(()=>{"use strict";s();l();Ar();Y();Vf=nr({badge:{backgroundColor:J.colors.CARD_PRIMARY_BG,borderRadius:8,paddingVertical:4,paddingHorizontal:8,textAlignVertical:"center"}})});function Kf(e){$.useReporter();var r=Vf(),t=xn(e.id),o=$.stages[e.id],n=N.isProxied(e.id);return i(Wf.View,{style:{gap:8,flexDirection:"row"},children:[{text:o,bg:t},n&&{text:"proxied"}].filter(a=>a&&typeof a=="object").map(a=>i(A,{variant:"eyebrow",color:a.bg?"white":"text-normal",style:[r.badge,a.bg?{backgroundColor:a.bg}:null],children:a.text}))})}var Wf,qf=p(()=>{"use strict";s();l();V();rt();xl();$a();ne();Wf=F(oe());Yf()});function Xf({plugin:e}){var r=Ts.useStateFromStoresArray([Rl],()=>(e.authors?.forEach(c=>c.id&&ch(c.id)),e.authors?.map(c=>Rl.getUser(c.id)))),{authors:t}=e,o=[];if(t){var n=function(c){o.push(i(A,{onPress:()=>lh({userId:c.id}),variant:"text-md/medium",children:c.name})),o.push(", ")};for(var a of t)n(a);o.pop()}return _(wn.View,{style:{gap:12},children:[_(wn.View,{children:[i(A,{variant:"heading-xl/semibold",children:e.name}),t?.length&&_(wn.View,{style:{flexDirection:"row",gap:8,alignItems:"center"},children:[r.length&&i(Du,{size:"xxsmall",names:e.authors?.map(c=>c.name),totalCount:e.authors?.length,children:r.map(c=>i(Mu,{size:"xxsmall",user:c}))}),i(A,{variant:"text-md/medium",children:o})]})]}),i(wn.View,{children:i(Kf,{id:e.id})})]})}var wn,lh,ch,Jf=p(()=>{"use strict";s();l();V();Fe();hr();Y();ne();Gf();wn=F(oe());qf();lh=Ue("showUserProfileActionSheet"),{getUser:ch}=ue(()=>z("getUser","fetchProfile"))});var ed={};H(ed,{default:()=>Qf});function uh({opt:e}){var[r,t]=(0,oi.useState)();switch(e.type){case"string":var o=e.textArea===!0?Bu:Le,n=()=>e.regexValidation?r?.match(e.regexValidation):!0;return i(L,{label:i(o,{size:"sm",label:e.label,placeholder:e.placeholder,value:r,onChange:a=>t(a),state:n()?"error":void 0,errorMessage:n()?void 0:"Invalid input"}),subLabel:e.description,icon:ti(e.icon)});case"boolean":return i(Jr,{label:e.label,subLabel:e.description,icon:ti(e.icon),value:r==="true",onValueChange:()=>{t(a=>String(String(a)!=="true"))}});case"select":return _(fe,{start:!1,end:!1,variant:"secondary",children:[i(xe,{title:e.label,children:e.options.map(a=>i(Ou,{label:a.label,subLabel:a.description,icon:ti(a.icon),checked:a.value===r,onPress:()=>{}}))}),i(A,{style:{marginTop:8},color:"text-secondary",variant:"text-sm/normal",children:e.description})]});case"radio":return _(fe,{start:!1,end:!1,variant:"secondary",children:[i(mn,{title:e.label,value:String(e.options[0].value),onChange:()=>{},children:e.options.map(a=>i(Nt,{label:a.label,subLabel:a.description,icon:ti(a.icon),value:String(a.value)}))}),i(A,{style:{marginTop:8},color:"text-secondary",variant:"text-sm/normal",children:e.description})]});case"slider":}}function ti(e){if(e)return i(L.Icon,{source:typeof e=="string"?y(e):e})}function fh({plugin:e,navigation:r}){var t=N.getManifest(e.id),o=e.getPluginSettingsComponent();return _(xe,{title:"Configurations",children:[Object.entries(t.options??{}).map(([n,a])=>i(uh,{opt:a})),i(L,{arrow:!0,label:"More...",icon:i(L.Icon,{source:y("WrenchIcon")}),disabled:!o,onPress:()=>{ao("PluginInfoActionSheet"),r.push("BUNNY_CUSTOM_PAGE",{title:e.name,render:o})}})]})}function Qf({plugin:e,navigation:r}){e.usePluginState();var t=N.settings[e.id];return i(Ot,{children:_(Zf,{style:{paddingVertical:8},contentContainerStyle:{gap:18},children:[_(Cl.View,{style:{flexDirection:"row",alignItems:"center",paddingTop:24},children:[i(Xf,{plugin:e}),i(dh,{plugin:e})]}),$.errors[e.id]&&_(fe,{style:{gap:8},children:[i(A,{color:"text-danger",variant:"eyebrow",children:"Error"}),i(A,{variant:"heading-md/normal",children:"An error occured while starting the plugin."}),i(Ve,{selectable:!0,children:String($.getError(e.id))})]}),i(fh,{plugin:e,navigation:r}),i(xe,{title:"Actions",children:i(pe,{children:_(Zf,{horizontal:!0,contentContainerStyle:{gap:4},children:[i(G,{size:"md",variant:"secondary",text:g.REFETCH,icon:y("RetryIcon"),onPress:S(function*(){var o=t.enabled;o&&N.stop(e.id);try{yield N.refetch(e.id),ae(g.PLUGIN_REFETCH_SUCCESSFUL,y("toast_image_saved"))}catch{ae(g.PLUGIN_REFETCH_FAILED,y("Small"))}o&&(yield N.start(e.id))})}),i(G,{size:"md",variant:"secondary",text:g.COPY_URL,icon:y("LinkIcon"),onPress:()=>{Pe.setString(N.traces[e.id].sourceUrl),ae.showCopyToClipboard()}}),i(G,{size:"md",variant:"secondary",text:t.autoUpdate?g.DISABLE_UPDATES:g.ENABLE_UPDATES,icon:y("DownloadIcon"),onPress:()=>{t.autoUpdate=!t.autoUpdate,ae(Ir("TOASTS_PLUGIN_UPDATE",{update:t.autoUpdate,name:e.name}),y("toast_image_saved"))}}),i(G,{size:"md",variant:"destructive",text:g.CLEAR_DATA,icon:y("CopyIcon"),onPress:()=>Fr({title:g.HOLD_UP,content:Ir("ARE_YOU_SURE_TO_CLEAR_DATA",{name:e.name}),confirmText:g.CLEAR,cancelText:g.CANCEL,confirmColor:"red",onConfirm:S(function*(){t.enabled&&N.stop(e.id);try{yield N.fetch(e.id),ae(g.PLUGIN_REFETCH_SUCCESSFUL,y("toast_image_saved"))}catch{ae(g.PLUGIN_REFETCH_FAILED,y("Small"))}var o;try{yo(`plugins/storage/${N.sanitizeId(e.id)}.json`),o=["CLEAR_DATA_SUCCESSFUL","trash"]}catch{o=["CLEAR_DATA_FAILED","Small"]}ae(Ir(o[0],{name:e.name}),y(o[1])),t.enabled&&(yield N.start(e.id)),ao("PluginInfoActionSheet")})})}),i(G,{size:"md",variant:"destructive",text:g.DELETE,icon:y("TrashIcon"),onPress:()=>Fr({title:g.HOLD_UP,content:Ir("ARE_YOU_SURE_TO_DELETE_PLUGIN",{name:e.name}),confirmText:g.DELETE,cancelText:g.CANCEL,confirmColor:"red",onConfirm:S(function*(){try{yield N.uninstall(e.id)}catch(o){ae(String(o),y("Small"))}ao("PluginInfoActionSheet")})})})]})})})]})})}function dh({plugin:e}){var r=(0,oi.useReducer)(t=>~t,0)[1];return e.usePluginState(),i(Cl.View,{style:{marginLeft:"auto"},children:i(Sa,{value:e.isEnabled(),onValueChange:function(){var t=S(function*(o){yield e.toggle(o),r()});return function(o){return t.apply(this,arguments)}}()})})}var oi,Cl,Zf,rd=p(()=>{"use strict";s();l();be();V();Ae();rt();Uo();ot();ge();Me();ar();Fe();hr();Y();ne();Ro();et();oi=F(_r()),Cl=F(oe());Jf();({ScrollView:Zf}=ue(()=>z("NativeViewGestureHandler")))});function Nl(e){return{id:e.id,name:e.display.name,description:e.display.description,authors:e.display.authors,icon:e.extras?.vendetta?.icon,isEnabled:()=>N.settings[e.id].enabled,isInstalled:()=>!!N.settings[e.id],usePluginState(){N.usePlugin(e.id)},toggle(r){return r?N.enable(e.id):N.disable(e.id)},resolveSheetComponent(){return Promise.resolve().then(()=>(rd(),ed))},getPluginSettingsComponent(){return N.getSettingsComponent(e.id)}}}var td=p(()=>{"use strict";s();l();ot()});function Ol(e){var r=$.getError(e.id);return r instanceof Error?i(vn,{header:i(A,{variant:"eyebrow",children:e.id}),error:r}):_(fe,{style:{gap:8},children:[i(A,{variant:"heading-md/bold",children:e.id}),i(Ve,{selectable:!0,children:String(r)})]})}var od=p(()=>{"use strict";s();l();V();rt();Aa();ar();ne()});var ad={};H(ad,{default:()=>nd});function nd(){return i(ni.FlatList,{data:Object.keys($.errors),contentContainerStyle:{padding:8},ItemSeparatorComponent:()=>i(ni.View,{style:{height:8}}),renderItem:e=>i(Ol,{id:e.item})})}var ni,id=p(()=>{"use strict";s();l();V();rt();ni=F(oe());od()});var cd={};H(cd,{default:()=>ld});function mh(e){var r=e.useItems();return i(uo,{CardComponent:Tl,title:g.PLUGINS,searchKeywords:["name","description",t=>t.authors?.map(o=>typeof o=="string"?o:o.name).join()??"unknown"],sortOptions:{"Name (A-Z)":(t,o)=>t.name.localeCompare(o.name),"Name (Z-A)":(t,o)=>o.name.localeCompare(t.name)},safeModeHint:{message:g.SAFE_MODE_NOTICE_PLUGINS},items:r,...e})}function ld(){return O.useSettings(),i(mh,{useItems:()=>(se([N.settings]),N.getAllIds().map(e=>N.getManifest(e))),resolveItem:Nl,ListHeaderComponent:hh,ListFooterComponent:ph,installAction:{label:"Install a plugin",fetchFn:function(){var e=S(function*(r){if(!r.startsWith(Ba)&&!r.startsWith(Fa)&&!O.developer.enabled)co("bunny-plugin-unproxied-confirmation",i(io,{title:"Hold On!",content:"You're trying to install a plugin from an unproxied external source. This means you're trusting the creator to run their code in this app without your knowledge. Are you sure you want to continue?",extraContent:i(fe,{children:i(A,{variant:"text-md/bold",children:r})}),actions:_(Ea,{children:[i(Zr,{text:"Continue",variant:"primary",onPress:()=>{N.install(r).then(()=>ae(g.TOASTS_INSTALLED_PLUGIN,y("Check"))).catch(t=>co("bunny-plugin-install-failed",i(io,{title:"Install Failed",content:`Unable to install plugin from '${r}':`,extraContent:i(fe,{children:i(A,{variant:"text-md/normal",children:t instanceof Error?t.message:String(t)})}),actions:i(Zr,{text:"Okay",variant:"primary"})})))}}),i(Zr,{text:"Cancel",variant:"secondary"})]})}));else return yield N.install(r)});return function(r){return e.apply(this,arguments)}}()}})}function ph(){return i(Tn.View,{style:{flexDirection:"row",justifyContent:"center",paddingVertical:8},children:_(A,{variant:"text-sm/semibold",children:[N.getAllIds().length," installed"]})})}function hh(){var[e,r]=(0,sd.useState)(!1),t=de.useNavigation(),o=N.getUnproxiedPlugins();return _(Tn.View,{style:{marginVertical:8,gap:8},children:[$.hasErrors()&&_(fe,{border:"strong",style:{gap:4},children:[i(A,{color:"text-danger",variant:"eyebrow",children:"Error"}),i(A,{variant:"heading-lg/bold",children:"Some plugins have been disabled"}),i(A,{variant:"text-md/medium",children:"These plugins were disabled due to an error during startup."}),i(G,{size:"md",text:"Review",style:{marginTop:8},onPress:()=>{t.push("BUNNY_CUSTOM_PAGE",{title:"Plugin Errors",render:React.lazy(()=>Promise.resolve().then(()=>(id(),ad)))})}})]}),!!o.length&&!e&&_(fe,{border:"strong",style:{gap:4},children:[i(A,{color:"text-warning",variant:"eyebrow",children:"Warning"}),i(A,{variant:"heading-lg/bold",children:"Unproxied plugins detected"}),i(A,{variant:"text-md/medium",children:"Plugins installed from unproxied sources may run unreviewed code in this app without your awareness."}),i(Tn.View,{style:{height:8}}),_(ba,{children:[i(G,{size:"md",text:"Dismiss",variant:"secondary",onPress:()=>r(!0)}),i(G,{size:"md",text:"Review",onPress:()=>{t.push("BUNNY_CUSTOM_PAGE",{title:"Unproxied Plugins",render:()=>i(wa,{data:o,contentContainerStyle:{padding:8},ItemSeparatorComponent:()=>i(Tn.View,{style:{height:8}}),renderItem:({item:n})=>i(fe,{children:i(A,{variant:"heading-md/semibold",children:n})})})})}})]})]})]})}var sd,Tn,ud=p(()=>{"use strict";s();l();be();V();Ae();rt();Te();Za();kf();ot();ge();Me();Ua();qa();et();Y();ne();sd=F(_r()),Tn=F(oe());td()});function Pl(e){var r=yh();return i(fe,{children:_(pe,{spacing:16,children:[_(fo.View,{style:{flexDirection:"row",alignItems:"center"},children:[_(fo.View,{style:r.headerLeading,children:[i(A,{variant:"text-md/semibold",children:e.headerLabel}),e.headerSublabel&&i(A,{variant:"text-md/semibold",color:"text-muted",children:e.headerSublabel})]}),_(fo.View,{style:[r.headerTrailing,{marginLeft:"auto"}],children:[_(fo.View,{style:r.actions,children:[e.overflowActions&&i(je,{onPress:()=>gh({key:"CardOverflow",header:{title:e.overflowTitle,icon:e.headerIcon&&i(Qr.Icon,{style:{marginRight:8},source:y(e.headerIcon)}),onClose:()=>vh()},options:e.overflowActions?.map(t=>({...t,icon:y(t.icon)}))}),size:"sm",variant:"secondary",icon:y("CircleInformationIcon-primary")}),e.actions?.map(({icon:t,onPress:o,disabled:n})=>i(je,{onPress:o,disabled:n,size:"sm",variant:"secondary",icon:y(t)}))]}),e.toggleType&&(e.toggleType==="switch"?i(Pu,{value:e.toggleValue(),onValueChange:e.onToggleChange}):i(fo.TouchableOpacity,{onPress:()=>{e.onToggleChange?.(!e.toggleValue())},children:i(Lu,{selected:e.toggleValue()})}))]})]}),e.descriptionLabel&&i(A,{variant:"text-md/medium",children:e.descriptionLabel})]})})}var fo,vh,gh,yh,fd=p(()=>{"use strict";s();l();V();ge();Fe();Y();ne();Ee();Ar();fo=F(oe()),{hideActionSheet:vh}=ue(()=>z("openLazy","hideActionSheet")),{showSimpleActionSheet:gh}=ue(()=>z("showSimpleActionSheet")),yh=nr({card:{backgroundColor:J.colors.CARD_SECONDARY_BG,borderRadius:12,overflow:"hidden"},header:{padding:0},headerLeading:{flexDirection:"column",justifyContent:"center"},headerTrailing:{display:"flex",flexDirection:"row",gap:15,alignItems:"center"},actions:{flexDirection:"row-reverse",alignItems:"center",gap:5},iconStyle:{tintColor:J.colors.LOGO_PRIMARY,opacity:.2,height:64,width:64,left:void 0,right:"30%",top:"-10%"}})});function Ll({item:e}){se([C.preferences]);var{authors:r}=e;return i(Pl,{headerLabel:e.name,headerSublabel:r?`by ${r.map(t=>t.name).join(", ")}`:"",descriptionLabel:e.description??"No description.",toggleType:O.isSafeMode()?void 0:"radio",toggleValue:()=>C.preferences.selected===e.id,onToggleChange:t=>{C.select(t?e.id:null)},overflowTitle:e.name,overflowActions:[{icon:"ic_sync_24px",label:g.REFETCH,onPress:()=>{C.refresh(e.id).then(()=>{ae(g.THEME_REFETCH_SUCCESSFUL,y("toast_image_saved"))}).catch(()=>{ae(g.THEME_REFETCH_FAILED,y("Small"))})}},{icon:"copy",label:g.COPY_URL,onPress:()=>{Pe.setString(C.infos[e.id].sourceUrl),ae.showCopyToClipboard()}},{icon:"ic_message_delete",label:g.DELETE,isDestructive:!0,onPress:()=>Fr({title:g.HOLD_UP,content:Ir("ARE_YOU_SURE_TO_DELETE_THEME",{name:e.name}),confirmText:g.DELETE,cancelText:g.CANCEL,confirmColor:"red",onConfirm:()=>{C.uninstall(e.id).catch(t=>{ae(t.message,y("Small"))})}})}]})}var dd=p(()=>{"use strict";s();l();V();Ae();Te();fd();Uo();oo();ge();Me();Y();et()});var hd={};H(hd,{default:()=>pd});function pd(){return O.useSettings(),se([C.infos,C.preferences]),i(uo,{title:g.THEMES,searchKeywords:["name","description",e=>e.authors?.map(r=>r.name).join(", ")??"unknown"],sortOptions:{"Name (A-Z)":(e,r)=>e.name.localeCompare(r.name),"Name (Z-A)":(e,r)=>r.name.localeCompare(e.name)},installAction:{label:"Install a theme",fetchFn:e=>C.install(e)},items:C.getAllIds(),resolveItem:e=>C.getDisplayInfo(e),safeModeHint:{message:Ir("SAFE_MODE_NOTICE_THEMES",{enabled:!!C.preferences.selected}),footer:C.preferences.selected&&i(G,{size:"small",text:g.DISABLE_THEME,onPress:()=>C.select(null),style:{marginTop:8}})},CardComponent:Ll,OptionsActionSheetComponent:()=>(se([C.preferences]),_(Ot,{children:[i(xa,{title:"Options"}),_(md.View,{style:{paddingVertical:20,gap:12},children:[_(mn,{title:"Override Theme Type",value:C.preferences.type??"auto",hasIcons:!0,onChange:e=>{C.preferences.type=e!=="auto"?e:void 0,It(C.getCurrentManifest(),{update:!0})},children:[i(Nt,{icon:i(Co,{source:y("RobotIcon")}),label:"Auto",value:"auto"}),i(Nt,{icon:i(Co,{source:y("ThemeDarkIcon")}),label:"Dark",value:"dark"}),i(Nt,{icon:i(Co,{source:y("ThemeLightIcon")}),label:"Light",value:"light"})]}),_(mn,{title:"Chat Background",value:C.preferences.customBackground??"shown",hasIcons:!0,onChange:e=>{C.preferences.customBackground=e!=="shown"?e:null},children:[i(Nt,{icon:i(Co,{source:y("ImageIcon")}),label:"Show",value:"shown"}),i(Nt,{icon:i(Co,{source:y("DenyIcon")}),label:"Hide",value:"hidden"})]})]})]}))})}var md,vd=p(()=>{"use strict";s();l();V();Ae();Te();Za();dd();oo();ro();ge();Me();ne();md=F(oe())});function _h(e){var r=e.map(o=>{var{pathname:n}=new URL(o),a=n.replace(/\.[^/.]+$/,"");return a.split("/").pop()}).filter(Boolean),t=r.reduce((o,n)=>n.length<o.length?n:o,r[0]||"");return t?.replace(/-[A-Za-z]*$/,"")||null}function bh({fonts:e,setName:r}){var t=C.getCurrentManifest(),o=t.fonts,[n,a]=(0,Ie.useState)(_h(Object.values(o))),[c,u]=(0,Ie.useState)(void 0);return _(at.View,{style:{padding:8,paddingBottom:16,gap:12},children:[i(Le,{autoFocus:!0,size:"md",label:g.FONT_NAME,value:n,placeholder:n||"Whitney",onChange:a,errorMessage:c,state:c?"error":void 0}),i(A,{variant:"text-xs/normal",color:"text-muted",children:Ir("THEME_EXTRACTOR_DESC",{fonts:Object.keys(o).join(g.SEPARATOR)})}),i(G,{size:"md",variant:"primary",text:g.EXTRACT,disabled:!n,onPress:()=>{if(n)try{Z.validate({spec:3,id:n.toLowerCase(),display:{name:n},main:o},null),r(n),Object.assign(e,o),ao("FontEditorActionSheet")}catch(d){u(String(d))}}})]})}function Sh({fonts:e,setName:r,setId:t,setSource:o}){var[n,a]=(0,Ie.useState)(""),[c,u]=(0,Ie.useState)(!1),[d,b]=(0,Ie.useState)(void 0);return _(at.View,{style:{padding:8,paddingBottom:16,gap:12},children:[i(Le,{autoFocus:!0,size:"md",label:"Font Link",value:n,placeholder:"https://link.to/font/pack.json",onChange:a,errorMessage:d,state:d?"error":void 0}),i(G,{size:"md",variant:"primary",text:"Import",disabled:!n||c,loading:c,onPress:()=>{u(!0),S(function*(){var h=yield or(n,{cache:"no-store"}),x=yield h.json();Z.validate(x,n),t(x.spec===3?x.id:x.name.toLowerCase()),r(x.spec===3?x.display.name:x.name),o(n),Object.assign(e,x.main)})().then(()=>ao("FontEditorActionSheet")).catch(h=>b(String(h))).finally(()=>u(!1))}})]})}function Eh(e){var[r,t]=(0,Ie.useState)(e.name),[o,n]=(0,Ie.useState)(e.fontEntries[e.name]);return _(at.View,{style:{padding:8,paddingBottom:16,gap:12},children:[i(Le,{autoFocus:!0,size:"md",label:"Family Name (to override)",value:r,placeholder:"ggsans-Bold",onChange:t}),i(Le,{size:"md",label:"Font URL",value:o,placeholder:"https://link.to/the/font.ttf",onChange:n}),i(G,{size:"md",variant:"primary",text:"Apply",onPress:()=>{delete e.fontEntries[e.name],e.fontEntries[r]=o}})]})}function Dl(e,r,t){Xr("FontEditorActionSheet",()=>i(we,{children:_(Ot,{children:[i(xa,{title:"Import Font"}),i(e,{fonts:r,...t})]})}))}function xh({fontEntry:e}){var r=(0,Ie.useRef)(),t=(0,Ie.useRef)(),[o,n]=(0,Ie.useState)(!1),[a,c]=(0,Ie.useState)();return _(at.View,{style:{flexDirection:"row",gap:8,justifyContent:"flex-start"},children:[i(at.View,{style:{flex:1},children:i(Le,{isRound:!0,size:"md",label:o?r.current:void 0,placeholder:o?"https://path.to/the/file.ttf":"PostScript name (e.g. ggsans-Bold)",leadingIcon:()=>o?null:i(L.Icon,{source:y("PlusSmallIcon")}),leadingText:o?r.current:"",onChange:u=>(o?t:r).current=u,errorMessage:a,state:a?"error":void 0})}),o&&i(je,{size:"md",variant:"secondary",onPress:()=>{r.current="",n(!1)},icon:y("TrashIcon")}),i(je,{size:"md",variant:"primary",onPress:()=>{if(!o&&r.current)n(!0);else if(o&&r.current&&t.current)try{var u=new URL(t.current);if(!u.protocol||!u.host)throw"Invalid URL";e[r.current]=t.current,r.current=void 0,t.current=void 0,n(!1)}catch(d){c(String(d))}},icon:y(o?"PlusSmallIcon":"ArrowLargeRightIcon")})]})}function An(e){var[r,t]=(0,Ie.useState)(e.id),[o,n]=(0,Ie.useState)(""),[a,c]=(0,Ie.useState)(),[u,d]=(0,Ie.useState)(!1),b=(0,Ie.useMemo)(()=>ze.from(e.id?{...Z.getManifest(e.id).main}:{}),[e.id]);se([b]);var h=de.useNavigation();return i(at.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(pe,{style:{paddingVertical:24,paddingHorizontal:12},spacing:12,children:[e.id?_(xe,{title:"Actions",children:[i(L,{label:"Refetch fonts from source",icon:i(L.Icon,{source:y("RetryIcon")}),onPress:S(function*(){var{sourceUrl:x}=Z.traces[e.id];x&&(yield Z.uninstall(e.id),yield Z.install(x),h.goBack())})}),i(L,{label:"Delete font pack",icon:i(L.Icon,{source:y("TrashIcon")}),onPress:()=>Z.uninstall(e.id).then(()=>h.goBack())})]}):_(xe,{title:"Import",children:[C.getCurrentManifest()?.fonts&&i(L,{label:g.LABEL_EXTRACT_FONTS_FROM_THEME,subLabel:g.DESC_EXTRACT_FONTS_FROM_THEME,icon:i(L.Icon,{source:y("HammerIcon")}),onPress:()=>Dl(bh,b,{setName:n})}),i(L,{label:"Import font entries from a link",subLabel:"Directly import from a link with a pre-configured JSON file",icon:i(L.Icon,{source:y("LinkIcon")}),onPress:()=>Dl(Sh,b,{setName:n,setSource:c,setId:t})})]}),i(Le,{size:"lg",value:r,label:"Font ID",placeholder:"whitney",onChange:t}),i(Le,{size:"lg",value:o,label:g.FONT_NAME,placeholder:"Whitney",onChange:n}),_(xe,{title:"Font Entries",children:[Object.entries(b).map(([x,I])=>i(L,{label:x,subLabel:I,trailing:_(pe,{spacing:2,direction:"horizontal",children:[i(je,{size:"sm",variant:"secondary",icon:y("PencilIcon"),onPress:()=>Dl(Eh,b,{name:x,fontEntries:b})}),i(je,{size:"sm",variant:"secondary",icon:y("TrashIcon"),onPress:()=>delete b[x]})]})})),i(L,{label:i(xh,{fontEntry:b})})]}),i(at.View,{style:{flexDirection:"row",justifyContent:"flex-end",bottom:0,left:0},children:i(G,{size:"lg",loading:u,disabled:u||!o||!r||Object.keys(b).length===0,variant:"primary",text:e.id?"Save":"Import",onPress:S(function*(){o&&(d(!0),e.id?(Z.saveLocally({...Z.getManifest(e.id),id:r,main:b,display:{...Z.getManifest(e.id).display,name:o}},{markAsEdited:!0}).then(()=>h.goBack()).finally(()=>d(!1)),d(!1),h.goBack()):Z.saveLocally({spec:3,id:o,main:b,display:{name:o}},{markAsEdited:!1}).then(()=>h.goBack()).finally(()=>d(!1)))}),icon:y(e.id?"toast_image_saved":"DownloadIcon"),style:{marginLeft:8}})})]})})}var Ie,at,Ml=p(()=>{"use strict";s();l();be();V();Ae();en();Oo();oo();ge();Me();Ro();Tr();Y();ne();ar();Ie=F(_r()),at=F(oe())});var yd=Cr((qN,gd)=>{s();l();gd.exports=Tt()["@shopify/react-native-skia"]});function wh({font:e}){var r=Zt(J.colors.TEXT_NORMAL),{fontFamily:t,fontSize:o}=dn["text-md/medium"],n=t.split(/,/g)[0],a=ko.useFont(e.main[n])?.getTypeface(),c=(0,_d.useMemo)(()=>{if(!a)return null;var u=SkiaApi.TypefaceFontProvider.Make();return u.registerFont(a,n),SkiaApi.ParagraphBuilder.Make({},u).pushStyle({color:SkiaApi.Color(r),fontFamilies:[n],fontSize:o}).addText("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.").pop().build()},[a]);return i(jo.View,{style:{height:64},children:a?i(ko.Canvas,{style:{height:64},children:i(ko.Paragraph,{paragraph:c,x:0,y:0,width:300})}):i(jo.View,{style:{justifyContent:"center",alignItems:"center"},children:i(A,{color:"text-muted",variant:"heading-lg/semibold",children:"Loading..."})})})}function Bl({item:e}){se([Z.preferences,Z.traces]);var r=de.useNavigation(),t=Z.preferences.selected===e.id;return i(fe,{children:_(pe,{spacing:16,children:[_(jo.View,{style:{flexDirection:"row",alignItems:"center"},children:[i(jo.View,{children:i(A,{variant:"heading-lg/semibold",children:e.display.name})}),i(jo.View,{style:{marginLeft:"auto"},children:_(pe,{spacing:12,direction:"horizontal",children:[i(je,{onPress:()=>{r.push("BUNNY_CUSTOM_PAGE",{title:"Edit Font",render:()=>i(An,{id:e.id})})},size:"sm",variant:"secondary",disabled:t,icon:y("PencilIcon")}),i(G,{size:"sm",variant:t?"secondary":"primary",text:t?"Unapply":"Apply",onPress:S(function*(){yield Z.select(t?null:e.id),Fr({title:g.HOLD_UP,content:"Reload Discord to apply changes?",confirmText:g.RELOAD,cancelText:g.CANCEL,confirmColor:"red",onConfirm:$r.reload})})})]})})]}),i(wh,{font:e})]})})}var ko,_d,jo,bd=p(()=>{"use strict";s();l();be();V();Ae();Uo();Oo();ge();er();Me();Y();ne();ko=F(yd());Ar();_d=F(_r()),jo=F(oe());Ml()});var Ed={};H(Ed,{default:()=>Sd});function Sd(){O.useSettings(),se([Z.preferences,Z.traces]);var e=de.useNavigation();return i(uo,{title:g.FONTS,searchKeywords:["display.name"],sortOptions:{"Name (A-Z)":(r,t)=>r.display.name.localeCompare(t.display.name),"Name (Z-A)":(r,t)=>t.display.name.localeCompare(r.display.name)},items:Z.getAllIds(),resolveItem:r=>Z.getManifest(r),safeModeHint:{message:g.SAFE_MODE_NOTICE_FONTS},CardComponent:Bl,installAction:{label:"Install a font",onPress:()=>{e.push("BUNNY_CUSTOM_PAGE",{title:"Import Font",render:()=>i(An,{})})}}})}var xd=p(()=>{"use strict";s();l();V();Ae();Te();Za();Ml();Oo();Me();Y();bd()});function wd(e,r){var[t,o]=(0,Ho.useState)(2),n=()=>ur(e,r).then(c=>o(c?1:0)).catch(()=>o(3)),a=(0,Ho.useMemo)(()=>new Proxy(Go,{get(c,u,d){var b=Reflect.get(c,u,d);if(typeof b=="function")return(...h)=>{var x=(n(),b(...h));return x?.constructor?.name==="Promise"&&(o(2),x.finally(n)),x}}}),[]);return(0,Ho.useEffect)(()=>void n(),[]),[t,a]}var Ho,Ur,Td=p(()=>{"use strict";s();l();lt();Ho=F(_r());(function(e){e[e.FALSE=0]="FALSE",e[e.TRUE=1]="TRUE",e[e.LOADING=2]="LOADING",e[e.ERROR=3]="ERROR"})(Ur||(Ur={}))});function Fl({asset:e}){return i(Qr,{label:`${e.name} - ${e.id}`,trailing:i(Ad.Image,{source:e.id,style:{width:32,height:32}}),onPress:()=>{Pe.setString(e.name),ae.showCopyToClipboard()}})}var Ad,Id=p(()=>{"use strict";s();l();V();Y();ne();et();Ad=F(oe())});function Ul(){var[e,r]=React.useState(""),t=(0,Rd.useMemo)(()=>Array.from(Pt()),[]);return i(we,{children:_(ai.View,{style:{flex:1},children:[i(Dt,{style:{margin:10},onChangeText:o=>r(o)}),i(ai.FlatList,{data:t.filter(o=>o.name.includes(e)||o.id.toString()===e),renderItem:({item:o})=>i(Fl,{asset:o}),ItemSeparatorComponent:Uu,keyExtractor:o=>o.name})]})})}var Rd,ai,Cd=p(()=>{"use strict";s();l();V();Id();ge();ne();ar();Rd=F(_r()),ai=F(oe())});var Od={};H(Od,{default:()=>Nd});function Nd(){var[e,r]=wd("preloads/reactDevtools.js"),t=Rh(),o=de.useNavigation();return O.useSettings(),i(we,{children:i(ii.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(pe,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24,children:[i(Le,{label:g.DEBUGGER_URL,placeholder:"127.0.0.1:9090",size:"md",leadingIcon:()=>i(Hu,{style:t.leadingText,children:"ws://"}),defaultValue:O.developer.debuggerUrl,onChange:n=>O.developer.debuggerUrl=n}),_(xe,{title:g.DEBUG,children:[i(L,{label:g.CONNECT_TO_DEBUG_WEBSOCKET,icon:i(L.Icon,{source:y("copy")}),onPress:()=>Oa(O.developer.debuggerUrl)}),ve.features.rdt&&i(St,{children:i(L,{label:g.CONNECT_TO_REACT_DEVTOOLS,icon:i(L.Icon,{source:y("ic_badge_staff")}),onPress:()=>ve.features.rdt?.exports?.connectToDevTools({host:O.developer.debuggerUrl.split(":")?.[0],resolveRNStyle:ii.StyleSheet.flatten})})})]}),ve.features.loaderConfig&&i(St,{children:_(xe,{title:"Loader config",children:[i(Jr,{label:g.LOAD_FROM_CUSTOM_URL,subLabel:g.LOAD_FROM_CUSTOM_URL_DEC,icon:i(L.Icon,{source:y("copy")}),value:O.loader.customLoadUrl.enabled,onValueChange:n=>{O.loader.customLoadUrl.enabled=n}}),O.loader.customLoadUrl.enabled&&i(L,{label:i(Le,{defaultValue:O.loader.customLoadUrl.url,size:"md",onChange:n=>O.loader.customLoadUrl.url=n,placeholder:"http://localhost:4040/vendetta.js",label:g.BUNNY_URL})})]})}),_(xe,{title:"Other",children:[i(L,{arrow:!0,label:g.ASSET_BROWSER,icon:i(L.Icon,{source:y("ic_image")}),trailing:L.Arrow,onPress:()=>o.push("BUNNY_CUSTOM_PAGE",{title:g.ASSET_BROWSER,render:Ul})}),i(L,{arrow:!0,label:g.ERROR_BOUNDARY_TOOLS_LABEL,icon:i(L.Icon,{source:y("ic_warning_24px")}),onPress:()=>Ah({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:i(L.Icon,{style:{marginRight:8},source:y("ic_warning_24px")}),onClose:()=>Th()},options:[{label:g.BUNNY,onPress:()=>o.push("BUNNY_CUSTOM_PAGE",{render:()=>i("undefined",{})})},{label:"Discord",isDestructive:!0,onPress:()=>o.push("BUNNY_CUSTOM_PAGE",{noErrorBoundary:!0})}]})}),i(L,{label:g.INSTALL_REACT_DEVTOOLS,subLabel:g.RESTART_REQUIRED_TO_TAKE_EFFECT,icon:i(L.Icon,{source:y("DownloadIcon")}),trailing:i(G,{size:"sm",loading:e===Ur.LOADING,disabled:e===Ur.LOADING,variant:e===Ur.TRUE?"secondary":"primary",text:e===Ur.TRUE?g.UNINSTALL:g.INSTALL,onPress:S(function*(){e===Ur.FALSE?r.downloadFile(Ih,"preloads/reactDevtools.js"):e===Ur.TRUE&&r.removeFile("preloads/reactDevtools.js")}),icon:y(e===Ur.TRUE?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}})}),i(Jr,{label:g.ENABLE_EVAL_COMMAND,subLabel:g.ENABLE_EVAL_COMMAND_DESC,icon:i(L.Icon,{source:y("PencilIcon")}),value:O.developer.evalCommandEnabled,onValueChange:n=>{O.developer.evalCommandEnabled=n}})]})]})})})}var ii,Th,Ah,Ih,Rh,Pd=p(()=>{"use strict";s();l();be();V();Ae();Pa();Te();Td();Cd();ge();to();Fe();Y();ne();Ee();ar();Ar();ii=F(oe()),{hideActionSheet:Th}=ue(()=>z("openLazy","hideActionSheet")),{showSimpleActionSheet:Ah}=ue(()=>z("showSimpleActionSheet")),Ih="https://raw.githubusercontent.com/amsyarasyiq/rdt-embedder/main/dist.js",Rh=nr({leadingText:{...dn["heading-md/semibold"],color:J.colors.TEXT_MUTED,marginRight:-4}})});function jl(){Ya({name:"Bunny",items:[{key:"BUNNY",title:()=>g.BUNNY,icon:{uri:Da},render:()=>Promise.resolve().then(()=>(Pf(),Of)),rawTabsConfig:{useTrailing:()=>"(2b93038-dev)"}},{key:"BUNNY_PLUGINS",title:()=>g.PLUGINS,icon:y("ActivitiesIcon"),render:()=>Promise.resolve().then(()=>(ud(),cd)),rawTabsConfig:{useTrailing:()=>(N.usePlugins(),`${N.getAllIds().length} installed`)}},{key:"BUNNY_THEMES",title:()=>g.THEMES,icon:y("PaintPaletteIcon"),render:()=>Promise.resolve().then(()=>(vd(),hd)),usePredicate:()=>ve.features.themes!=null,rawTabsConfig:{useTrailing:()=>(C.useColors(),`${C.getAllIds().length} installed`)}},{key:"BUNNY_FONTS",title:()=>g.FONTS,icon:y("ic_add_text"),render:()=>Promise.resolve().then(()=>(xd(),Ed)),usePredicate:()=>ve.features.fonts!=null,rawTabsConfig:{useTrailing:()=>(Z.useFonts(),`${Z.getAllIds().length} installed`)}},{key:"BUNNY_DEVELOPER",title:()=>g.DEVELOPER,icon:y("WrenchIcon"),render:()=>Promise.resolve().then(()=>(Pd(),Od)),usePredicate:()=>(O.useSettings(),O.developer.enabled??!1)}]}),Ya({name:"Vendetta",items:[]})}var El=p(()=>{"use strict";s();l();nf();Ae();Te();cl();$a();eo();ge();to();Mo()});function In(e={}){var r=new $n,t=e,o=new WeakMap,n=new WeakSet;function a(c,u){return new Proxy(c,{get(d,b){if(b===Md)return r;var h=[...u,b],x=d[b];if(x!=null){if(r.emit("GET",{parent:t,path:h,value:x}),typeof x=="object"){if(n.has(x))return x;if(o.has(x))return o.get(x);var I=a(x,h);return o.set(x,I),I}return x}return x},set(d,b,h){if(typeof h=="object")if(o.has(h))d[b]=o.get(h);else{var x=a(h,[...u,b]);o.set(h,x),n.add(h),d[b]=x}else d[b]=h;return r.emit("SET",{parent:t,path:[...u,b],value:d[b]}),!0},deleteProperty(d,b){var h=typeof d[b]=="object"?o.get(d[b]):d[b],x=delete d[b];return x&&r.emit("DEL",{value:h,parent:t,path:[...u,b]}),x}})}return{proxy:a(e,[]),emitter:r}}function jd(e){var r=e?.[Md];if(!r)throw new Error("storage?.[emitterSymbol] is undefined");var[,t]=React.useReducer(o=>~o,0);return React.useEffect(()=>{var o=(n,a)=>{n==="DEL"&&a.value===e||t()};return r.on("SET",o),r.on("DEL",o),()=>{r.off("SET",o),r.off("DEL",o)}},[]),e}function kd(e){return Hl.apply(this,arguments)}function Hl(){return Hl=S(function*(e){var r=yield e.get(),{proxy:t,emitter:o}=In(r),n=()=>e.set(t);return o.on("SET",n),o.on("DEL",n),t}),Hl.apply(this,arguments)}function Hd(e){var r=void 0,t=[],o=n=>r?n():t.push(n);return e.then(n=>{r=n,t.forEach(a=>a())}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(n=>[n,(a,...c)=>Reflect[n](r??a,...c)])),get(n,a,c){return a===Bd?o:Reflect.get(r??n,a,c)}})}function zd(...e){return Promise.all(e.map(r=>new Promise(t=>r[Bd](t))))}var Dd,Md,Bd,Ld,kl,Fd,bP,Ud,zl,$d=p(()=>{"use strict";s();l();be();er();Dd=F(oe());Di();Md=Symbol.for("vendetta.storage.emitter"),Bd=Symbol.for("vendetta.storage.accessor"),Ld=/[<>:"/\\|?*]/g,kl=e=>Dd.Platform.select({default:e,ios:re.saveFileToGallery?e:`Documents/${e}`}),Fd=e=>(Ld.test(e)&&(e=e.replace(Ld,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`),bP=function(){var e=S(function*(r){(yield zr.getItem(r))&&zr.removeItem(r);var t=Fd(r);(yield re.fileExists(`${re.getConstants().DocumentsDirPath}/${t}`))&&(yield re.removeFile?.("documents",t))});return function(t){return e.apply(this,arguments)}}(),Ud=(e,r={})=>{var t=Fd(e),o=JSON.stringify(r);return zl(t,r,S(function*(){var n=`${re.getConstants().DocumentsDirPath}/${t}`;if(!(yield re.fileExists(n))){var a=(yield zr.getItem(e))??o;if(a==="!!LARGE_VALUE!!"){var c=`${re.getConstants().CacheDirPath}/mmkv/${e}`;(yield re.fileExists(c))?a=yield re.readFile(c,"utf8"):(console.log(`${e}: Experienced data loss :(`),a=o)}try{JSON.parse(a)}catch{console.error(`${e} had an unparseable data while migrating`),a=o}yield re.writeFile("documents",kl(t),a,"utf8"),(yield zr.getItem(e))!==null&&(zr.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}})())},zl=(e,r={},t)=>({get:S(function*(){yield t;var o=`${re.getConstants().DocumentsDirPath}/${e}`;if(yield re.fileExists(o)){var n=yield re.readFile(o,"utf8");try{return JSON.parse(n)}catch{}}return yield re.writeFile("documents",kl(e),JSON.stringify(r),"utf8"),JSON.parse(yield re.readFile(o,"utf8"))}),set:function(){var o=S(function*(n){yield t,yield re.writeFile("documents",kl(e),JSON.stringify(n),"utf8")});return function(n){return o.apply(this,arguments)}}()})});var Vd=Cr((xP,Gd)=>{s();l();Gd.exports=Tt().moment});var Wd=Cr((AP,Yd)=>{s();l();Yd.exports=Tt().util});function Nh(){var e=(0,$l.memoize)(()=>N.getAllIds().reduce((r,t)=>Object.assign(r,{[N.traces[t].sourceUrl]:{id:N.traces[t].sourceUrl,manifest:N.convertToVd(N.getManifest(t)),get enabled(){return N.settings[t].enabled},get update(){return N.settings[t].autoUpdate},get js(){return"()=>{}"}}}),{}),()=>N.getAllIds().length);return{plugins:In(new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(r=>[r,(t,...o)=>Reflect[r](e(),...o)]))})).proxy,fetchPlugin:r=>N.fetch(r),installPlugin:(r,t=!0)=>N.install(r,{enable:t}),startPlugin:r=>N.start(r),stopPlugin:(r,t=!0)=>{t?N.stop(r):N.disable(r)},removePlugin:r=>N.uninstall(r,{keepData:!1}),getSettings:r=>N.getSettingsComponent(r)}}function Oh(){var e=(0,$l.memoize)(()=>C.getAllIds().reduce((r,t)=>Object.assign(r,{[C.infos[t].sourceUrl]:{id:C.infos[t].sourceUrl,get selected(){return C.preferences.selected===t},data:C.convertToVd(C.getManifest(t))}}),{}),()=>C.getAllIds().length);return{themes:In(new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(r=>[r,(t,...o)=>Reflect[r](e(),...o)]))})).proxy,fetchTheme:(r,t)=>t?C.refresh(r):C.fetch(r),installTheme:r=>C.install(r),selectTheme:r=>C.select(r==="default"?null:r),removeTheme:r=>C.uninstall(r),getCurrentTheme:()=>{var{selected:r}=C.preferences,t=C.getCurrentManifest();return r==null||t==null?null:{id:C.getId(t,C.infos[r].sourceUrl),data:C.convertToVd(t),selected:!0}},updateThemes:()=>C.updateAll()}}var $l,si,li,Kd,qd=p(()=>{"use strict";s();l();V();Ct();Pa();Te();Uo();ot();oo();ge();Sn();no();to();tr();Ar();Tr();Rs();hr();Y();ne();ne();ar();et();Wt();$l=F(un()),si=F(_r()),li=F(oe());$d();Kd=()=>{var e=t=>o=>t(on.createSimpleFilter(o,nu(new Error().stack))),r=window.vendetta={patcher:{before:qo.before,after:qo.after,instead:qo.instead},metro:{modules:window.modules,find:e(Ge),findAll:e(bt),findByProps:(...t)=>{t.length===1&&t[0]==="KeyboardAwareScrollView"&&t.push("listenToKeyboardEvents");var o=z(...t);if(o==null&&t.includes("ActionSheetTitleHeader")){var n=z("ActionSheetRow");return{...n,ActionSheetTitleHeader:n.BottomSheetTitleHeader,ActionSheetContentContainer:({children:a})=>((0,si.useEffect)(()=>Ye.warn("Discord has removed 'ActionSheetContentContainer', please move into something else. This has been temporarily replaced with View"),[]),(0,si.createElement)(li.View,null,a))}}return o},findByPropsAll:(...t)=>us(...t),findByName:(t,o)=>t==="create"&&typeof o>"u"?oa("create",!1).default:oa(t,o??!0),findByNameAll:(t,o=!0)=>fs(t,o),findByDisplayName:(t,o=!0)=>ds(t,o),findByDisplayNameAll:(t,o=!0)=>ps(t,o),findByTypeName:(t,o=!0)=>hs(t,o),findByTypeNameAll:(t,o=!0)=>vs(t,o),findByStoreName:t=>gs(t),common:{constants:Et,channels:_s,i18n:xt,url:Eo,toasts:xo,stylesheet:{createThemedStyleSheet:function(o){for(var n in o)o[n]=new Proxy(li.StyleSheet.flatten(o[n]),{get(a,c,u){var d=Reflect.get(a,c,u);return $s(d)?Gs(d):d}});return o}},clipboard:Pe,assets:bs,invites:Ss,commands:Jt,navigation:Es,navigationStack:xs,NavigationNative:de,Flux:ws,FluxDispatcher:wt,React:ln,ReactNative:na,moment:Vd(),chroma:Qt(),lodash:un(),util:Wd()}},constants:{DISCORD_SERVER:"https://discord.gg/n9QQ4XhhJP",GITHUB:"https://github.com/vendetta-mod",PROXY_PREFIX:"https://vd-plugins.github.io/proxy",HTTP_REGEX:/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&/=]*)$/,HTTP_REGEX_MULTI:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*)/g,DISCORD_SERVER_ID:"1015931589865246730",PLUGINS_CHANNEL_ID:"1091880384561684561",THEMES_CHANNEL_ID:"1091880434939482202"},utils:{findInReactTree:(t,o)=>vr(t,o),findInTree:(t,o,n)=>Kr(t,o,n),safeFetch:(t,o,n)=>or(t,o,n),unfreeze:t=>Object.isFrozen(t)?{...t}:t,without:(t,...o)=>Yt(t,o)},debug:{connectToDebugger:t=>Oa(t),getDebugInfo:()=>gr()},ui:{components:{Forms:qs,General:na,Alert:ga,Button:Nu,HelpMessage:(...t)=>i(ya,{...t}),SafeAreaView:(...t)=>i(_a,{...t}),Summary:yn,ErrorBoundary:we,Codeblock:Ve,Search:Dt},toasts:{showToast:(t,o)=>ae(t,o)},alerts:{showConfirmationAlert:t=>Fr(t),showCustomAlert:(t,o)=>ei(t,o),showInputAlert:t=>Il(t)},assets:{all:new Proxy({},{get(t,o){if(typeof o=="string"){if(t[o])return t[o];for(var n of Pt())if(n.name)return t[o]=n}},ownKeys(t){var o=new Set;for(var n of Pt())t[n.name]=n,o.add(n.name);return[...o]}}),find:t=>No(t),getAssetByName:t=>No(t),getAssetByID:t=>No(t),getAssetIDByName:t=>y(t)},semanticColors:J.colors,rawColors:J.unsafe_rawColors},plugins:Nh(),themes:Oh(),commands:{registerCommand:Lo},storage:{createProxy:t=>In(t),useProxy:t=>jd(t),createStorage:t=>kd(t),wrapSync:t=>Hd(t),awaitSyncWrapper:t=>zd(t),createMMKVBackend:t=>Ud(t),createFileBackend:t=>(ve.type==="bunny"&&t==="vendetta_theme.json"&&(t="pyoncord/current-theme.json"),zl(t))},settings:{get debuggerUrl(){return O.developer.debuggerUrl},get developerSettings(){return O.developer.enabled},get enableDiscordDeveloperSettings(){return O.general.patchIsStaff},get safeMode(){return{enabled:O.isSafeMode()}},get enableEvalCommand(){return O.developer.evalCommandEnabled}},loader:{identity:Bs()??void 0,config:O.loader},logger:{log:(...t)=>console.log(...t),info:(...t)=>console.info(...t),warn:(...t)=>console.warn(...t),error:(...t)=>console.error(...t),time:(...t)=>console.time(...t),trace:(...t)=>console.trace(...t),verbose:(...t)=>console.log(...t)},version:gr().vendetta.version,unload:()=>{delete window.vendetta}};return()=>r.unload()}});var Xd=p(()=>{"use strict";s();l()});var Jd=p(()=>{"use strict";s();l()});var Gl={};H(Gl,{colors:()=>Us});var Zd=p(()=>{"use strict";s();l();eo()});var Vl={};H(Vl,{alerts:()=>ri,components:()=>Ra,settings:()=>bl,styles:()=>Ys,toasts:()=>Na});var Qd=p(()=>{"use strict";s();l();Uo();ar();Mo();Ar();et()});var Yl={};H(Yl,{api:()=>hl,fonts:()=>ll,metro:()=>ia,plugins:()=>gl,themes:()=>Gl,ui:()=>Vl,unload:()=>ci,utils:()=>fa});function ci(){for(var e of em)typeof e=="function"&&e();delete window.bunny}var em,rm=p(()=>{"use strict";s();l();Xd();Jd();cl();$a();Zd();vl();Qd();Tr();hr();em=[];ci.push=e=>{em.push(e)}});var tm={};H(tm,{default:()=>Ph});var Ph,om=p(()=>{"use strict";s();l();be();ef();Ae();Ct();Pa();rt();Te();El();qd();Oo();ot();oo();Sn();ml();Mo();rm();Ph=S(function*(){yield O.prepare(),yield C.prepare(),yield N.prepare(),yield Z.prepare(),yield $.prepare(),yield Promise.all([fl(),_l(),tf(),ul(),Kd(),Ru(),jl(),al()]).then(e=>e.forEach(r=>r&&ci.push(r))),window.bunny=Yl,O.isSafeMode()||(C.initialize(),N.initialize(),Z.initialize()),Ye.log("Bunny is ready!")})});s();l();be();var{instead:Lh}=Dn();globalThis.window=globalThis;function nm(){return Wl.apply(this,arguments)}function Wl(){return Wl=S(function*(){try{Object.freeze=Object.seal=Object,yield(pt(),cr(zc)).initMetroCache(),yield(om(),cr(tm)).default()}catch(t){var{ClientInfoManager:e}=(er(),cr(Mn)),r=t instanceof Error?t.stack:void 0;console.log(r??t?.toString?.()??t),alert([`Failed to load Bunny!
`,`Build Number: ${e.Build}`,"Bunny: 2b93038-dev",r||t?.toString?.()].join(`
`))}}),Wl.apply(this,arguments)}if(typeof globalThis.__r<"u")nm();else{var e=function(r){var t=window.__fbBatchedBridge,o=[],n=Lh("callFunctionReturnFlushedQueue",t,(c,u)=>c[0]==="AppRegistry"||!t.getCallableModule(c[0])?(o.push(c),t.flushedQueue()):u.apply(t,c)),a=function(){var c=S(function*(){yield nm(),n(),r(0),o.forEach(u=>t.getCallableModule(u[0])&&t.__callFunction(...u))});return function(){return c.apply(this,arguments)}}();a()};Dh=e,Object.defineProperties(globalThis,{__r:{configurable:!0,get:()=>ui,set(r){ui=function(o){if(o===0)e(r),ui=r;else return r(o)}}},__d:{configurable:!0,get(){return window.Object&&!window.modules&&(window.modules=window.__c?.()),this.value},set(r){this.value=r}}})}var ui,Dh;})();
//# sourceURL=bunny
